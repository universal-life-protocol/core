var sl=Object.defineProperty;var go=f=>{throw TypeError(f)};var al=(f,a,o)=>a in f?sl(f,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[a]=o;var Ae=(f,a,o)=>al(f,typeof a!="symbol"?a+"":a,o),Hr=(f,a,o)=>a.has(f)||go("Cannot "+o);var U=(f,a,o)=>(Hr(f,a,"read from private field"),o?o.call(f):a.get(f)),Ue=(f,a,o)=>a.has(f)?go("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(f):a.set(f,o),Ce=(f,a,o,s)=>(Hr(f,a,"write to private field"),s?s.call(f,o):a.set(f,o),o),Pe=(f,a,o)=>(Hr(f,a,"access private method"),o);var lr=(f,a,o,s)=>({set _(l){Ce(f,a,l,o)},get _(){return U(f,a,s)}});(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&s(t)}).observe(document,{childList:!0,subtree:!0});function o(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=o(l);fetch(l.href,r)}})();const ll="ulp_blackboard",ul=1,zt="traces";function cl(){return new Promise((f,a)=>{const o=indexedDB.open(ll,ul);o.onupgradeneeded=()=>{const s=o.result;if(!s.objectStoreNames.contains(zt)){const l=s.createObjectStore(zt,{keyPath:"id"});l.createIndex("ts","ts",{unique:!1}),l.createIndex("template","template",{unique:!1}),l.createIndex("kind","kind",{unique:!1})}},o.onsuccess=()=>f(o.result),o.onerror=()=>a(o.error)})}class fl{constructor(){Ae(this,"dbp");this.dbp=cl()}async put(a){const o=await this.dbp;return new Promise((s,l)=>{const t=o.transaction(zt,"readwrite").objectStore(zt),n=t.get(a.id);n.onsuccess=()=>{if(n.result){s("duplicate");return}const e=t.add(a);e.onsuccess=()=>s("inserted"),e.onerror=()=>l(e.error)},n.onerror=()=>l(n.error)})}async listRecent(a=100){const o=await this.dbp;return new Promise((s,l)=>{const n=o.transaction(zt,"readonly").objectStore(zt).index("ts"),e=[],i=n.openCursor(null,"prev");i.onsuccess=()=>{const u=i.result;if(!u||e.length>=a){s(e);return}e.push(u.value),u.continue()},i.onerror=()=>l(i.error)})}}function Yr(f){if(f===null||typeof f!="object")return JSON.stringify(f);if(Array.isArray(f))return`[${f.map(Yr).join(",")}]`;const a=f;return`{${Object.keys(a).sort().map(l=>`${JSON.stringify(l)}:${Yr(a[l])}`).join(",")}}`}async function ks(f){const a=new TextEncoder().encode(f),o=await crypto.subtle.digest("SHA-256",a);return[...new Uint8Array(o)].map(l=>l.toString(16).padStart(2,"0")).join("")}function Zi(f){return Yr(f)}async function hl(f){const a={v:2,ts:f.ts??Math.floor(Date.now()/1e3),kind:f.kind,template:f.template,author:f.author??null,payload:f.payload,refs:f.refs??[],sig:null},o=Zi(a),s=await ks(o);return{...a,id:`ulp:v2:${s}`}}async function pl(f){if(f.v!==2)return{ok:!1,reason:"Unsupported protocol version"};if(!f.id.startsWith("ulp:v2:"))return{ok:!1,reason:"Bad id prefix"};const{id:a,...o}=f,s=Zi(o),r=`ulp:v2:${await ks(s)}`;return a!==r?{ok:!1,reason:"ID hash mismatch"}:{ok:!0}}function dl(f,a){let o=f.slice();return o.sort((s,l)=>l.ts-s.ts||(s.id<l.id?-1:1)),o}function qe(f,a={},...o){const s=document.createElement(f);for(const[l,r]of Object.entries(a))l==="class"?s.className=String(r):l.startsWith("on")&&typeof r=="function"?s[l.toLowerCase()]=r:s.setAttribute(l,String(r));for(const l of o)s.append(l instanceof Node?l:document.createTextNode(l));return s}function gl(f){for(;f.firstChild;)f.removeChild(f.firstChild)}class yl{constructor(a){Ae(this,"name","http");Ae(this,"baseUrl");Ae(this,"aborted",!1);Ae(this,"lastError");this.baseUrl=a.replace(/\/$/,"")}async publish(a){const o=Array.isArray(a)?a:[a];try{const s=await fetch(`${this.baseUrl}/traces`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({traces:o})});if(!s.ok)throw new Error(`HTTP ${s.status}`);return await s.json()}catch(s){const l=s instanceof Error?s.message:String(s);return this.lastError=l,{accepted:[],rejected:o.map(r=>({id:r.id,reason:l}))}}}async*subscribe(a){const o=new URL(`${this.baseUrl}/traces/stream`);a!=null&&a.since&&o.searchParams.set("since",String(a.since));for(const s of(a==null?void 0:a.templates)??[])o.searchParams.append("template",s);for(const s of(a==null?void 0:a.kinds)??[])o.searchParams.append("kind",s);for(;!this.aborted;)try{const s=await fetch(o.toString(),{method:"GET"});if(!s.ok||!s.body)throw new Error(`HTTP ${s.status}`);const l=s.body.getReader(),r=new TextDecoder;let t="";for(;!this.aborted;){const{value:n,done:e}=await l.read();if(e)break;t+=r.decode(n,{stream:!0});let i;for(;(i=t.indexOf(`
`))>=0;){const u=t.slice(0,i).trim();t=t.slice(i+1),u&&(yield JSON.parse(u))}}}catch(s){this.lastError=s instanceof Error?s.message:String(s),await new Promise(l=>setTimeout(l,1500))}}status(){return{connected:!this.aborted,lastError:this.lastError}}close(){this.aborted=!0}}const yo="blackboard.post.v1",Ts={"blackboard.post.v1":{id:"blackboard.post.v1",schema:{type:"object",properties:{text:{type:"string"}},required:["text"]},projection:{feedText:"text"}},"blackboard.listing.v1":{id:"blackboard.listing.v1",schema:{type:"object",properties:{title:{type:"string"},price:{type:"number"},text:{type:"string"}},required:["title","price"]},projection:{feedTitle:"title",feedText:"text"}}};function bl(f,a){const o=Ts[f];if(!o)return{ok:!0};const{schema:s}=o;if(s.type!=="object"||a===null||typeof a!="object")return{ok:!1,reason:"Payload must be an object"};for(const l of s.required??[])if(!(l in a))return{ok:!1,reason:`Missing field: ${l}`};for(const[l,r]of Object.entries(s.properties)){if(!(l in a))continue;const t=a[l];if(r.type==="string"&&typeof t!="string")return{ok:!1,reason:`Field ${l} must be a string`};if(r.type==="number"&&typeof t!="number")return{ok:!1,reason:`Field ${l} must be a number`};if(r.type==="boolean"&&typeof t!="boolean")return{ok:!1,reason:`Field ${l} must be a boolean`}}return{ok:!0}}function ml(f,a){const o=Ts[f];if(!o)return{text:String((a==null?void 0:a.text)??"")};const s=o.projection.feedTitle,l=o.projection.feedText,r=s?a[s]:void 0,t=l?a[l]:void 0;return{title:r!=null?String(r):void 0,text:t!=null?String(t):void 0}}async function vl(f="/world/.interrupt"){try{const a=await fetch(f,{cache:"no-store"});if(!a.ok)return{};const o=await a.text();return wl(o)}catch{return{}}}function wl(f){const a={};for(const o of f.split(`
`)){const s=o.trim();if(!s||s.startsWith("#"))continue;const l=s.indexOf("=");if(l<=0)continue;const r=s.slice(0,l).trim(),t=s.slice(l+1).trim();!r||!t||(a[r]=t)}return a}var eo=Object.defineProperty,_l=Object.getOwnPropertyDescriptor,Sl=Object.getOwnPropertyNames,El=Object.prototype.hasOwnProperty,ot=(f,a)=>()=>(f&&(a=f(f=0)),a),me=(f,a)=>()=>(a||f((a={exports:{}}).exports,a),a.exports),Vt=(f,a)=>{for(var o in a)eo(f,o,{get:a[o],enumerable:!0})},Al=(f,a,o,s)=>{if(a&&typeof a=="object"||typeof a=="function")for(let l of Sl(a))!El.call(f,l)&&l!==o&&eo(f,l,{get:()=>a[l],enumerable:!(s=_l(a,l))||s.enumerable});return f},Fe=f=>Al(eo({},"__esModule",{value:!0}),f),he=ot(()=>{}),Le={};Vt(Le,{_debugEnd:()=>Rn,_debugProcess:()=>Pn,_events:()=>Hn,_eventsCount:()=>Kn,_exiting:()=>yn,_fatalExceptions:()=>kn,_getActiveHandles:()=>Ns,_getActiveRequests:()=>Ms,_kill:()=>vn,_linkedBinding:()=>Cs,_maxListeners:()=>Vn,_preload_modules:()=>$n,_rawDebug:()=>pn,_startProfilerIdleNotifier:()=>Cn,_stopProfilerIdleNotifier:()=>jn,_tickCallback:()=>On,abort:()=>Un,addListener:()=>Gn,allowedNodeEnvironmentFlags:()=>In,arch:()=>Xr,argv:()=>tn,argv0:()=>qn,assert:()=>Bs,binding:()=>an,browser:()=>hn,chdir:()=>cn,config:()=>bn,cpuUsage:()=>Xt,cwd:()=>un,debugPort:()=>Wn,default:()=>ro,dlopen:()=>js,domain:()=>gn,emit:()=>Zn,emitWarning:()=>sn,env:()=>en,execArgv:()=>rn,execPath:()=>Fn,exit:()=>En,features:()=>xn,hasUncaughtExceptionCaptureCallback:()=>Us,hrtime:()=>fr,kill:()=>Sn,listeners:()=>Ds,memoryUsage:()=>_n,moduleLoadList:()=>dn,nextTick:()=>Ps,off:()=>Yn,on:()=>pt,once:()=>Qn,openStdin:()=>An,pid:()=>Ln,platform:()=>Zr,ppid:()=>Dn,prependListener:()=>ei,prependOnceListener:()=>ti,reallyExit:()=>mn,release:()=>fn,removeAllListeners:()=>Xn,removeListener:()=>Jn,resourceUsage:()=>wn,setSourceMapsEnabled:()=>zn,setUncaughtExceptionCaptureCallback:()=>Tn,stderr:()=>Nn,stdin:()=>Bn,stdout:()=>Mn,title:()=>Jr,umask:()=>ln,uptime:()=>Ls,version:()=>nn,versions:()=>on});function to(f){throw new Error("Node.js process "+f+" is not supported by JSPM core outside of Node.js")}function Il(){!Bt||!Mt||(Bt=!1,Mt.length?ct=Mt.concat(ct):rr=-1,ct.length&&Os())}function Os(){if(!Bt){var f=setTimeout(Il,0);Bt=!0;for(var a=ct.length;a;){for(Mt=ct,ct=[];++rr<a;)Mt&&Mt[rr].run();rr=-1,a=ct.length}Mt=null,Bt=!1,clearTimeout(f)}}function Ps(f){var a=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)a[o-1]=arguments[o];ct.push(new Rs(f,a)),ct.length===1&&!Bt&&setTimeout(Os,0)}function Rs(f,a){this.fun=f,this.array=a}function Ze(){}function Cs(f){to("_linkedBinding")}function js(f){to("dlopen")}function Ms(){return[]}function Ns(){return[]}function Bs(f,a){if(!f)throw new Error(a||"assertion error")}function Us(){return!1}function Ls(){return gt.now()/1e3}function fr(f){var a=Math.floor((Date.now()-gt.now())*.001),o=gt.now()*.001,s=Math.floor(o)+a,l=Math.floor(o%1*1e9);return f&&(s=s-f[0],l=l-f[1],l<0&&(s--,l+=hr)),[s,l]}function pt(){return ro}function Ds(f){return[]}var ct,Bt,Mt,rr,Jr,Xr,Zr,en,tn,rn,nn,on,sn,an,ln,un,cn,fn,hn,pn,dn,gn,yn,bn,mn,vn,Xt,wn,_n,Sn,En,An,In,xn,kn,Tn,On,Pn,Rn,Cn,jn,Mn,Nn,Bn,Un,Ln,Dn,Fn,Wn,qn,$n,zn,gt,Kr,hr,Vn,Hn,Kn,Gn,Qn,Yn,Jn,Xn,Zn,ei,ti,ro,xl=ot(()=>{he(),de(),pe(),ct=[],Bt=!1,rr=-1,Rs.prototype.run=function(){this.fun.apply(null,this.array)},Jr="browser",Xr="x64",Zr="browser",en={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},tn=["/usr/bin/node"],rn=[],nn="v16.8.0",on={},sn=function(f,a){console.warn((a?a+": ":"")+f)},an=function(f){to("binding")},ln=function(f){return 0},un=function(){return"/"},cn=function(f){},fn={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},hn=!0,pn=Ze,dn=[],gn={},yn=!1,bn={},mn=Ze,vn=Ze,Xt=function(){return{}},wn=Xt,_n=Xt,Sn=Ze,En=Ze,An=Ze,In={},xn={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},kn=Ze,Tn=Ze,On=Ze,Pn=Ze,Rn=Ze,Cn=Ze,jn=Ze,Mn=void 0,Nn=void 0,Bn=void 0,Un=Ze,Ln=2,Dn=1,Fn="/bin/usr/node",Wn=9229,qn="node",$n=[],zn=Ze,gt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},gt.now===void 0&&(Kr=Date.now(),gt.timing&&gt.timing.navigationStart&&(Kr=gt.timing.navigationStart),gt.now=()=>Date.now()-Kr),hr=1e9,fr.bigint=function(f){var a=fr(f);return typeof BigInt>"u"?a[0]*hr+a[1]:BigInt(a[0]*hr)+BigInt(a[1])},Vn=10,Hn={},Kn=0,Gn=pt,Qn=pt,Yn=pt,Jn=pt,Xn=pt,Zn=Ze,ei=pt,ti=pt,ro={version:nn,versions:on,arch:Xr,platform:Zr,browser:hn,release:fn,_rawDebug:pn,moduleLoadList:dn,binding:an,_linkedBinding:Cs,_events:Hn,_eventsCount:Kn,_maxListeners:Vn,on:pt,addListener:Gn,once:Qn,off:Yn,removeListener:Jn,removeAllListeners:Xn,emit:Zn,prependListener:ei,prependOnceListener:ti,listeners:Ds,domain:gn,_exiting:yn,config:bn,dlopen:js,uptime:Ls,_getActiveRequests:Ms,_getActiveHandles:Ns,reallyExit:mn,_kill:vn,cpuUsage:Xt,resourceUsage:wn,memoryUsage:_n,kill:Sn,exit:En,openStdin:An,allowedNodeEnvironmentFlags:In,assert:Bs,features:xn,_fatalExceptions:kn,setUncaughtExceptionCaptureCallback:Tn,hasUncaughtExceptionCaptureCallback:Us,emitWarning:sn,nextTick:Ps,_tickCallback:On,_debugProcess:Pn,_debugEnd:Rn,_startProfilerIdleNotifier:Cn,_stopProfilerIdleNotifier:jn,stdout:Mn,stdin:Bn,stderr:Nn,abort:Un,umask:ln,chdir:cn,cwd:un,env:en,title:Jr,argv:tn,execArgv:rn,pid:Ln,ppid:Dn,execPath:Fn,debugPort:Wn,hrtime:fr,argv0:qn,_preload_modules:$n,setSourceMapsEnabled:zn}}),pe=ot(()=>{xl()});function kl(){if(ri)return Wt;ri=!0,Wt.byteLength=n,Wt.toByteArray=i,Wt.fromByteArray=p;for(var f=[],a=[],o=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,r=s.length;l<r;++l)f[l]=s[l],a[s.charCodeAt(l)]=l;a[45]=62,a[95]=63;function t(b){var m=b.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=b.indexOf("=");S===-1&&(S=m);var w=S===m?0:4-S%4;return[S,w]}function n(b){var m=t(b),S=m[0],w=m[1];return(S+w)*3/4-w}function e(b,m,S){return(m+S)*3/4-S}function i(b){var m,S=t(b),w=S[0],A=S[1],g=new o(e(b,w,A)),_=0,E=A>0?w-4:w,v;for(v=0;v<E;v+=4)m=a[b.charCodeAt(v)]<<18|a[b.charCodeAt(v+1)]<<12|a[b.charCodeAt(v+2)]<<6|a[b.charCodeAt(v+3)],g[_++]=m>>16&255,g[_++]=m>>8&255,g[_++]=m&255;return A===2&&(m=a[b.charCodeAt(v)]<<2|a[b.charCodeAt(v+1)]>>4,g[_++]=m&255),A===1&&(m=a[b.charCodeAt(v)]<<10|a[b.charCodeAt(v+1)]<<4|a[b.charCodeAt(v+2)]>>2,g[_++]=m>>8&255,g[_++]=m&255),g}function u(b){return f[b>>18&63]+f[b>>12&63]+f[b>>6&63]+f[b&63]}function d(b,m,S){for(var w,A=[],g=m;g<S;g+=3)w=(b[g]<<16&16711680)+(b[g+1]<<8&65280)+(b[g+2]&255),A.push(u(w));return A.join("")}function p(b){for(var m,S=b.length,w=S%3,A=[],g=16383,_=0,E=S-w;_<E;_+=g)A.push(d(b,_,_+g>E?E:_+g));return w===1?(m=b[S-1],A.push(f[m>>2]+f[m<<4&63]+"==")):w===2&&(m=(b[S-2]<<8)+b[S-1],A.push(f[m>>10]+f[m>>4&63]+f[m<<2&63]+"=")),A.join("")}return Wt}function Tl(){return ni?Zt:(ni=!0,Zt.read=function(f,a,o,s,l){var r,t,n=l*8-s-1,e=(1<<n)-1,i=e>>1,u=-7,d=o?l-1:0,p=o?-1:1,b=f[a+d];for(d+=p,r=b&(1<<-u)-1,b>>=-u,u+=n;u>0;r=r*256+f[a+d],d+=p,u-=8);for(t=r&(1<<-u)-1,r>>=-u,u+=s;u>0;t=t*256+f[a+d],d+=p,u-=8);if(r===0)r=1-i;else{if(r===e)return t?NaN:(b?-1:1)*(1/0);t=t+Math.pow(2,s),r=r-i}return(b?-1:1)*t*Math.pow(2,r-s)},Zt.write=function(f,a,o,s,l,r){var t,n,e,i=r*8-l-1,u=(1<<i)-1,d=u>>1,p=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=s?0:r-1,m=s?1:-1,S=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(n=isNaN(a)?1:0,t=u):(t=Math.floor(Math.log(a)/Math.LN2),a*(e=Math.pow(2,-t))<1&&(t--,e*=2),t+d>=1?a+=p/e:a+=p*Math.pow(2,1-d),a*e>=2&&(t++,e/=2),t+d>=u?(n=0,t=u):t+d>=1?(n=(a*e-1)*Math.pow(2,l),t=t+d):(n=a*Math.pow(2,d-1)*Math.pow(2,l),t=0));l>=8;f[o+b]=n&255,b+=m,n/=256,l-=8);for(t=t<<l|n,i+=l;i>0;f[o+b]=t&255,b+=m,t/=256,i-=8);f[o+b-m]|=S*128},Zt)}function Ol(){if(ii)return At;ii=!0;let f=kl(),a=Tl(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;At.Buffer=t,At.SlowBuffer=A,At.INSPECT_MAX_BYTES=50;let s=2147483647;At.kMaxLength=s,t.TYPED_ARRAY_SUPPORT=l(),!t.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{let c=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(c,h),c.foo()===42}catch{return!1}}Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}});function r(c){if(c>s)throw new RangeError('The value "'+c+'" is invalid for option "size"');let h=new Uint8Array(c);return Object.setPrototypeOf(h,t.prototype),h}function t(c,h,y){if(typeof c=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(c)}return n(c,h,y)}t.poolSize=8192;function n(c,h,y){if(typeof c=="string")return d(c,h);if(ArrayBuffer.isView(c))return b(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(J(c,ArrayBuffer)||c&&J(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(c,SharedArrayBuffer)||c&&J(c.buffer,SharedArrayBuffer)))return m(c,h,y);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let T=c.valueOf&&c.valueOf();if(T!=null&&T!==c)return t.from(T,h,y);let M=S(c);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return t.from(c[Symbol.toPrimitive]("string"),h,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}t.from=function(c,h,y){return n(c,h,y)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array);function e(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function i(c,h,y){return e(c),c<=0?r(c):h!==void 0?typeof y=="string"?r(c).fill(h,y):r(c).fill(h):r(c)}t.alloc=function(c,h,y){return i(c,h,y)};function u(c){return e(c),r(c<0?0:w(c)|0)}t.allocUnsafe=function(c){return u(c)},t.allocUnsafeSlow=function(c){return u(c)};function d(c,h){if((typeof h!="string"||h==="")&&(h="utf8"),!t.isEncoding(h))throw new TypeError("Unknown encoding: "+h);let y=g(c,h)|0,T=r(y),M=T.write(c,h);return M!==y&&(T=T.slice(0,M)),T}function p(c){let h=c.length<0?0:w(c.length)|0,y=r(h);for(let T=0;T<h;T+=1)y[T]=c[T]&255;return y}function b(c){if(J(c,Uint8Array)){let h=new Uint8Array(c);return m(h.buffer,h.byteOffset,h.byteLength)}return p(c)}function m(c,h,y){if(h<0||c.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<h+(y||0))throw new RangeError('"length" is outside of buffer bounds');let T;return h===void 0&&y===void 0?T=new Uint8Array(c):y===void 0?T=new Uint8Array(c,h):T=new Uint8Array(c,h,y),Object.setPrototypeOf(T,t.prototype),T}function S(c){if(t.isBuffer(c)){let h=w(c.length)|0,y=r(h);return y.length===0||c.copy(y,0,0,h),y}if(c.length!==void 0)return typeof c.length!="number"||ve(c.length)?r(0):p(c);if(c.type==="Buffer"&&Array.isArray(c.data))return p(c.data)}function w(c){if(c>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return c|0}function A(c){return+c!=c&&(c=0),t.alloc(+c)}t.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==t.prototype},t.compare=function(c,h){if(J(c,Uint8Array)&&(c=t.from(c,c.offset,c.byteLength)),J(h,Uint8Array)&&(h=t.from(h,h.offset,h.byteLength)),!t.isBuffer(c)||!t.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===h)return 0;let y=c.length,T=h.length;for(let M=0,z=Math.min(y,T);M<z;++M)if(c[M]!==h[M]){y=c[M],T=h[M];break}return y<T?-1:T<y?1:0},t.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(c,h){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return t.alloc(0);let y;if(h===void 0)for(h=0,y=0;y<c.length;++y)h+=c[y].length;let T=t.allocUnsafe(h),M=0;for(y=0;y<c.length;++y){let z=c[y];if(J(z,Uint8Array))M+z.length>T.length?(t.isBuffer(z)||(z=t.from(z)),z.copy(T,M)):Uint8Array.prototype.set.call(T,z,M);else if(t.isBuffer(z))z.copy(T,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=z.length}return T};function g(c,h){if(t.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||J(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);let y=c.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&y===0)return 0;let M=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Q(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return ge(c).length;default:if(M)return T?-1:Q(c).length;h=(""+h).toLowerCase(),M=!0}}t.byteLength=g;function _(c,h,y){let T=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,h>>>=0,y<=h))return"";for(c||(c="utf8");;)switch(c){case"hex":return Z(this,h,y);case"utf8":case"utf-8":return q(this,h,y);case"ascii":return ae(this,h,y);case"latin1":case"binary":return te(this,h,y);case"base64":return x(this,h,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,h,y);default:if(T)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),T=!0}}t.prototype._isBuffer=!0;function E(c,h,y){let T=c[h];c[h]=c[y],c[y]=T}t.prototype.swap16=function(){let c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<c;h+=2)E(this,h,h+1);return this},t.prototype.swap32=function(){let c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<c;h+=4)E(this,h,h+3),E(this,h+1,h+2);return this},t.prototype.swap64=function(){let c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<c;h+=8)E(this,h,h+7),E(this,h+1,h+6),E(this,h+2,h+5),E(this,h+3,h+4);return this},t.prototype.toString=function(){let c=this.length;return c===0?"":arguments.length===0?q(this,0,c):_.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(c){if(!t.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:t.compare(this,c)===0},t.prototype.inspect=function(){let c="",h=At.INSPECT_MAX_BYTES;return c=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(c+=" ... "),"<Buffer "+c+">"},o&&(t.prototype[o]=t.prototype.inspect),t.prototype.compare=function(c,h,y,T,M){if(J(c,Uint8Array)&&(c=t.from(c,c.offset,c.byteLength)),!t.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(h===void 0&&(h=0),y===void 0&&(y=c?c.length:0),T===void 0&&(T=0),M===void 0&&(M=this.length),h<0||y>c.length||T<0||M>this.length)throw new RangeError("out of range index");if(T>=M&&h>=y)return 0;if(T>=M)return-1;if(h>=y)return 1;if(h>>>=0,y>>>=0,T>>>=0,M>>>=0,this===c)return 0;let z=M-T,ne=y-h,W=Math.min(z,ne),Y=this.slice(T,M),Ie=c.slice(h,y);for(let ke=0;ke<W;++ke)if(Y[ke]!==Ie[ke]){z=Y[ke],ne=Ie[ke];break}return z<ne?-1:ne<z?1:0};function v(c,h,y,T,M){if(c.length===0)return-1;if(typeof y=="string"?(T=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ve(y)&&(y=M?0:c.length-1),y<0&&(y=c.length+y),y>=c.length){if(M)return-1;y=c.length-1}else if(y<0)if(M)y=0;else return-1;if(typeof h=="string"&&(h=t.from(h,T)),t.isBuffer(h))return h.length===0?-1:R(c,h,y,T,M);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(c,h,y):Uint8Array.prototype.lastIndexOf.call(c,h,y):R(c,[h],y,T,M);throw new TypeError("val must be string, number or Buffer")}function R(c,h,y,T,M){let z=1,ne=c.length,W=h.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(c.length<2||h.length<2)return-1;z=2,ne/=2,W/=2,y/=2}function Y(ke,Te){return z===1?ke[Te]:ke.readUInt16BE(Te*z)}let Ie;if(M){let ke=-1;for(Ie=y;Ie<ne;Ie++)if(Y(c,Ie)===Y(h,ke===-1?0:Ie-ke)){if(ke===-1&&(ke=Ie),Ie-ke+1===W)return ke*z}else ke!==-1&&(Ie-=Ie-ke),ke=-1}else for(y+W>ne&&(y=ne-W),Ie=y;Ie>=0;Ie--){let ke=!0;for(let Te=0;Te<W;Te++)if(Y(c,Ie+Te)!==Y(h,Te)){ke=!1;break}if(ke)return Ie}return-1}t.prototype.includes=function(c,h,y){return this.indexOf(c,h,y)!==-1},t.prototype.indexOf=function(c,h,y){return v(this,c,h,y,!0)},t.prototype.lastIndexOf=function(c,h,y){return v(this,c,h,y,!1)};function P(c,h,y,T){y=Number(y)||0;let M=c.length-y;T?(T=Number(T),T>M&&(T=M)):T=M;let z=h.length;T>z/2&&(T=z/2);let ne;for(ne=0;ne<T;++ne){let W=parseInt(h.substr(ne*2,2),16);if(ve(W))return ne;c[y+ne]=W}return ne}function I(c,h,y,T){return we(Q(h,c.length-y),c,y,T)}function O(c,h,y,T){return we(oe(h),c,y,T)}function k(c,h,y,T){return we(ge(h),c,y,T)}function F(c,h,y,T){return we(ye(h,c.length-y),c,y,T)}t.prototype.write=function(c,h,y,T){if(h===void 0)T="utf8",y=this.length,h=0;else if(y===void 0&&typeof h=="string")T=h,y=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(y)?(y=y>>>0,T===void 0&&(T="utf8")):(T=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let M=this.length-h;if((y===void 0||y>M)&&(y=M),c.length>0&&(y<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");let z=!1;for(;;)switch(T){case"hex":return P(this,c,h,y);case"utf8":case"utf-8":return I(this,c,h,y);case"ascii":case"latin1":case"binary":return O(this,c,h,y);case"base64":return k(this,c,h,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,c,h,y);default:if(z)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),z=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(c,h,y){return h===0&&y===c.length?f.fromByteArray(c):f.fromByteArray(c.slice(h,y))}function q(c,h,y){y=Math.min(c.length,y);let T=[],M=h;for(;M<y;){let z=c[M],ne=null,W=z>239?4:z>223?3:z>191?2:1;if(M+W<=y){let Y,Ie,ke,Te;switch(W){case 1:z<128&&(ne=z);break;case 2:Y=c[M+1],(Y&192)===128&&(Te=(z&31)<<6|Y&63,Te>127&&(ne=Te));break;case 3:Y=c[M+1],Ie=c[M+2],(Y&192)===128&&(Ie&192)===128&&(Te=(z&15)<<12|(Y&63)<<6|Ie&63,Te>2047&&(Te<55296||Te>57343)&&(ne=Te));break;case 4:Y=c[M+1],Ie=c[M+2],ke=c[M+3],(Y&192)===128&&(Ie&192)===128&&(ke&192)===128&&(Te=(z&15)<<18|(Y&63)<<12|(Ie&63)<<6|ke&63,Te>65535&&Te<1114112&&(ne=Te))}}ne===null?(ne=65533,W=1):ne>65535&&(ne-=65536,T.push(ne>>>10&1023|55296),ne=56320|ne&1023),T.push(ne),M+=W}return L(T)}let V=4096;function L(c){let h=c.length;if(h<=V)return String.fromCharCode.apply(String,c);let y="",T=0;for(;T<h;)y+=String.fromCharCode.apply(String,c.slice(T,T+=V));return y}function ae(c,h,y){let T="";y=Math.min(c.length,y);for(let M=h;M<y;++M)T+=String.fromCharCode(c[M]&127);return T}function te(c,h,y){let T="";y=Math.min(c.length,y);for(let M=h;M<y;++M)T+=String.fromCharCode(c[M]);return T}function Z(c,h,y){let T=c.length;(!h||h<0)&&(h=0),(!y||y<0||y>T)&&(y=T);let M="";for(let z=h;z<y;++z)M+=Ee[c[z]];return M}function le(c,h,y){let T=c.slice(h,y),M="";for(let z=0;z<T.length-1;z+=2)M+=String.fromCharCode(T[z]+T[z+1]*256);return M}t.prototype.slice=function(c,h){let y=this.length;c=~~c,h=h===void 0?y:~~h,c<0?(c+=y,c<0&&(c=0)):c>y&&(c=y),h<0?(h+=y,h<0&&(h=0)):h>y&&(h=y),h<c&&(h=c);let T=this.subarray(c,h);return Object.setPrototypeOf(T,t.prototype),T};function H(c,h,y){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+h>y)throw new RangeError("Trying to access beyond buffer length")}t.prototype.readUintLE=t.prototype.readUIntLE=function(c,h,y){c=c>>>0,h=h>>>0,y||H(c,h,this.length);let T=this[c],M=1,z=0;for(;++z<h&&(M*=256);)T+=this[c+z]*M;return T},t.prototype.readUintBE=t.prototype.readUIntBE=function(c,h,y){c=c>>>0,h=h>>>0,y||H(c,h,this.length);let T=this[c+--h],M=1;for(;h>0&&(M*=256);)T+=this[c+--h]*M;return T},t.prototype.readUint8=t.prototype.readUInt8=function(c,h){return c=c>>>0,h||H(c,1,this.length),this[c]},t.prototype.readUint16LE=t.prototype.readUInt16LE=function(c,h){return c=c>>>0,h||H(c,2,this.length),this[c]|this[c+1]<<8},t.prototype.readUint16BE=t.prototype.readUInt16BE=function(c,h){return c=c>>>0,h||H(c,2,this.length),this[c]<<8|this[c+1]},t.prototype.readUint32LE=t.prototype.readUInt32LE=function(c,h){return c=c>>>0,h||H(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},t.prototype.readUint32BE=t.prototype.readUInt32BE=function(c,h){return c=c>>>0,h||H(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},t.prototype.readBigUInt64LE=ce(function(c){c=c>>>0,re(c,"offset");let h=this[c],y=this[c+7];(h===void 0||y===void 0)&&be(c,this.length-8);let T=h+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,M=this[++c]+this[++c]*2**8+this[++c]*2**16+y*2**24;return BigInt(T)+(BigInt(M)<<BigInt(32))}),t.prototype.readBigUInt64BE=ce(function(c){c=c>>>0,re(c,"offset");let h=this[c],y=this[c+7];(h===void 0||y===void 0)&&be(c,this.length-8);let T=h*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],M=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+y;return(BigInt(T)<<BigInt(32))+BigInt(M)}),t.prototype.readIntLE=function(c,h,y){c=c>>>0,h=h>>>0,y||H(c,h,this.length);let T=this[c],M=1,z=0;for(;++z<h&&(M*=256);)T+=this[c+z]*M;return M*=128,T>=M&&(T-=Math.pow(2,8*h)),T},t.prototype.readIntBE=function(c,h,y){c=c>>>0,h=h>>>0,y||H(c,h,this.length);let T=h,M=1,z=this[c+--T];for(;T>0&&(M*=256);)z+=this[c+--T]*M;return M*=128,z>=M&&(z-=Math.pow(2,8*h)),z},t.prototype.readInt8=function(c,h){return c=c>>>0,h||H(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},t.prototype.readInt16LE=function(c,h){c=c>>>0,h||H(c,2,this.length);let y=this[c]|this[c+1]<<8;return y&32768?y|4294901760:y},t.prototype.readInt16BE=function(c,h){c=c>>>0,h||H(c,2,this.length);let y=this[c+1]|this[c]<<8;return y&32768?y|4294901760:y},t.prototype.readInt32LE=function(c,h){return c=c>>>0,h||H(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},t.prototype.readInt32BE=function(c,h){return c=c>>>0,h||H(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},t.prototype.readBigInt64LE=ce(function(c){c=c>>>0,re(c,"offset");let h=this[c],y=this[c+7];(h===void 0||y===void 0)&&be(c,this.length-8);let T=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(y<<24);return(BigInt(T)<<BigInt(32))+BigInt(h+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),t.prototype.readBigInt64BE=ce(function(c){c=c>>>0,re(c,"offset");let h=this[c],y=this[c+7];(h===void 0||y===void 0)&&be(c,this.length-8);let T=(h<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(T)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+y)}),t.prototype.readFloatLE=function(c,h){return c=c>>>0,h||H(c,4,this.length),a.read(this,c,!0,23,4)},t.prototype.readFloatBE=function(c,h){return c=c>>>0,h||H(c,4,this.length),a.read(this,c,!1,23,4)},t.prototype.readDoubleLE=function(c,h){return c=c>>>0,h||H(c,8,this.length),a.read(this,c,!0,52,8)},t.prototype.readDoubleBE=function(c,h){return c=c>>>0,h||H(c,8,this.length),a.read(this,c,!1,52,8)};function ie(c,h,y,T,M,z){if(!t.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>M||h<z)throw new RangeError('"value" argument is out of bounds');if(y+T>c.length)throw new RangeError("Index out of range")}t.prototype.writeUintLE=t.prototype.writeUIntLE=function(c,h,y,T){if(c=+c,h=h>>>0,y=y>>>0,!T){let ne=Math.pow(2,8*y)-1;ie(this,c,h,y,ne,0)}let M=1,z=0;for(this[h]=c&255;++z<y&&(M*=256);)this[h+z]=c/M&255;return h+y},t.prototype.writeUintBE=t.prototype.writeUIntBE=function(c,h,y,T){if(c=+c,h=h>>>0,y=y>>>0,!T){let ne=Math.pow(2,8*y)-1;ie(this,c,h,y,ne,0)}let M=y-1,z=1;for(this[h+M]=c&255;--M>=0&&(z*=256);)this[h+M]=c/z&255;return h+y},t.prototype.writeUint8=t.prototype.writeUInt8=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,1,255,0),this[h]=c&255,h+1},t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,2,65535,0),this[h]=c&255,this[h+1]=c>>>8,h+2},t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,2,65535,0),this[h]=c>>>8,this[h+1]=c&255,h+2},t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,4,4294967295,0),this[h+3]=c>>>24,this[h+2]=c>>>16,this[h+1]=c>>>8,this[h]=c&255,h+4},t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,4,4294967295,0),this[h]=c>>>24,this[h+1]=c>>>16,this[h+2]=c>>>8,this[h+3]=c&255,h+4};function j(c,h,y,T,M){ee(h,T,M,c,y,7);let z=Number(h&BigInt(4294967295));c[y++]=z,z=z>>8,c[y++]=z,z=z>>8,c[y++]=z,z=z>>8,c[y++]=z;let ne=Number(h>>BigInt(32)&BigInt(4294967295));return c[y++]=ne,ne=ne>>8,c[y++]=ne,ne=ne>>8,c[y++]=ne,ne=ne>>8,c[y++]=ne,y}function G(c,h,y,T,M){ee(h,T,M,c,y,7);let z=Number(h&BigInt(4294967295));c[y+7]=z,z=z>>8,c[y+6]=z,z=z>>8,c[y+5]=z,z=z>>8,c[y+4]=z;let ne=Number(h>>BigInt(32)&BigInt(4294967295));return c[y+3]=ne,ne=ne>>8,c[y+2]=ne,ne=ne>>8,c[y+1]=ne,ne=ne>>8,c[y]=ne,y+8}t.prototype.writeBigUInt64LE=ce(function(c,h=0){return j(this,c,h,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeBigUInt64BE=ce(function(c,h=0){return G(this,c,h,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeIntLE=function(c,h,y,T){if(c=+c,h=h>>>0,!T){let W=Math.pow(2,8*y-1);ie(this,c,h,y,W-1,-W)}let M=0,z=1,ne=0;for(this[h]=c&255;++M<y&&(z*=256);)c<0&&ne===0&&this[h+M-1]!==0&&(ne=1),this[h+M]=(c/z>>0)-ne&255;return h+y},t.prototype.writeIntBE=function(c,h,y,T){if(c=+c,h=h>>>0,!T){let W=Math.pow(2,8*y-1);ie(this,c,h,y,W-1,-W)}let M=y-1,z=1,ne=0;for(this[h+M]=c&255;--M>=0&&(z*=256);)c<0&&ne===0&&this[h+M+1]!==0&&(ne=1),this[h+M]=(c/z>>0)-ne&255;return h+y},t.prototype.writeInt8=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,1,127,-128),c<0&&(c=255+c+1),this[h]=c&255,h+1},t.prototype.writeInt16LE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,2,32767,-32768),this[h]=c&255,this[h+1]=c>>>8,h+2},t.prototype.writeInt16BE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,2,32767,-32768),this[h]=c>>>8,this[h+1]=c&255,h+2},t.prototype.writeInt32LE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,4,2147483647,-2147483648),this[h]=c&255,this[h+1]=c>>>8,this[h+2]=c>>>16,this[h+3]=c>>>24,h+4},t.prototype.writeInt32BE=function(c,h,y){return c=+c,h=h>>>0,y||ie(this,c,h,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[h]=c>>>24,this[h+1]=c>>>16,this[h+2]=c>>>8,this[h+3]=c&255,h+4},t.prototype.writeBigInt64LE=ce(function(c,h=0){return j(this,c,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeBigInt64BE=ce(function(c,h=0){return G(this,c,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(c,h,y,T,M,z){if(y+T>c.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function $(c,h,y,T,M){return h=+h,y=y>>>0,M||fe(c,h,y,4),a.write(c,h,y,T,23,4),y+4}t.prototype.writeFloatLE=function(c,h,y){return $(this,c,h,!0,y)},t.prototype.writeFloatBE=function(c,h,y){return $(this,c,h,!1,y)};function _e(c,h,y,T,M){return h=+h,y=y>>>0,M||fe(c,h,y,8),a.write(c,h,y,T,52,8),y+8}t.prototype.writeDoubleLE=function(c,h,y){return _e(this,c,h,!0,y)},t.prototype.writeDoubleBE=function(c,h,y){return _e(this,c,h,!1,y)},t.prototype.copy=function(c,h,y,T){if(!t.isBuffer(c))throw new TypeError("argument should be a Buffer");if(y||(y=0),!T&&T!==0&&(T=this.length),h>=c.length&&(h=c.length),h||(h=0),T>0&&T<y&&(T=y),T===y||c.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),c.length-h<T-y&&(T=c.length-h+y);let M=T-y;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,y,T):Uint8Array.prototype.set.call(c,this.subarray(y,T),h),M},t.prototype.fill=function(c,h,y,T){if(typeof c=="string"){if(typeof h=="string"?(T=h,h=0,y=this.length):typeof y=="string"&&(T=y,y=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!t.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(c.length===1){let z=c.charCodeAt(0);(T==="utf8"&&z<128||T==="latin1")&&(c=z)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(h<0||this.length<h||this.length<y)throw new RangeError("Out of range index");if(y<=h)return this;h=h>>>0,y=y===void 0?this.length:y>>>0,c||(c=0);let M;if(typeof c=="number")for(M=h;M<y;++M)this[M]=c;else{let z=t.isBuffer(c)?c:t.from(c,T),ne=z.length;if(ne===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(M=0;M<y-h;++M)this[M+h]=z[M%ne]}return this};let X={};function D(c,h,y){X[c]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(T){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:T,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}D("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(c,h){return`The "${c}" argument must be of type number. Received type ${typeof h}`},TypeError),D("ERR_OUT_OF_RANGE",function(c,h,y){let T=`The value of "${c}" is out of range.`,M=y;return Number.isInteger(y)&&Math.abs(y)>2**32?M=se(String(y)):typeof y=="bigint"&&(M=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(M=se(M)),M+="n"),T+=` It must be ${h}. Received ${M}`,T},RangeError);function se(c){let h="",y=c.length,T=c[0]==="-"?1:0;for(;y>=T+4;y-=3)h=`_${c.slice(y-3,y)}${h}`;return`${c.slice(0,y)}${h}`}function K(c,h,y){re(h,"offset"),(c[h]===void 0||c[h+y]===void 0)&&be(h,c.length-(y+1))}function ee(c,h,y,T,M,z){if(c>y||c<h){let ne=typeof h=="bigint"?"n":"",W;throw h===0||h===BigInt(0)?W=`>= 0${ne} and < 2${ne} ** ${(z+1)*8}${ne}`:W=`>= -(2${ne} ** ${(z+1)*8-1}${ne}) and < 2 ** ${(z+1)*8-1}${ne}`,new X.ERR_OUT_OF_RANGE("value",W,c)}K(T,M,z)}function re(c,h){if(typeof c!="number")throw new X.ERR_INVALID_ARG_TYPE(h,"number",c)}function be(c,h,y){throw Math.floor(c)!==c?(re(c,y),new X.ERR_OUT_OF_RANGE("offset","an integer",c)):h<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,c)}let ue=/[^+/0-9A-Za-z-_]/g;function N(c){if(c=c.split("=")[0],c=c.trim().replace(ue,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Q(c,h){h=h||1/0;let y,T=c.length,M=null,z=[];for(let ne=0;ne<T;++ne){if(y=c.charCodeAt(ne),y>55295&&y<57344){if(!M){if(y>56319){(h-=3)>-1&&z.push(239,191,189);continue}else if(ne+1===T){(h-=3)>-1&&z.push(239,191,189);continue}M=y;continue}if(y<56320){(h-=3)>-1&&z.push(239,191,189),M=y;continue}y=(M-55296<<10|y-56320)+65536}else M&&(h-=3)>-1&&z.push(239,191,189);if(M=null,y<128){if((h-=1)<0)break;z.push(y)}else if(y<2048){if((h-=2)<0)break;z.push(y>>6|192,y&63|128)}else if(y<65536){if((h-=3)<0)break;z.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((h-=4)<0)break;z.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return z}function oe(c){let h=[];for(let y=0;y<c.length;++y)h.push(c.charCodeAt(y)&255);return h}function ye(c,h){let y,T,M,z=[];for(let ne=0;ne<c.length&&!((h-=2)<0);++ne)y=c.charCodeAt(ne),T=y>>8,M=y%256,z.push(M),z.push(T);return z}function ge(c){return f.toByteArray(N(c))}function we(c,h,y,T){let M;for(M=0;M<T&&!(M+y>=h.length||M>=c.length);++M)h[M+y]=c[M];return M}function J(c,h){return c instanceof h||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===h.name}function ve(c){return c!==c}let Ee=function(){let c="0123456789abcdef",h=new Array(256);for(let y=0;y<16;++y){let T=y*16;for(let M=0;M<16;++M)h[T+M]=c[y]+c[M]}return h}();function ce(c){return typeof BigInt>"u"?je:c}function je(){throw new Error("BigInt not supported")}return At}var Wt,ri,Zt,ni,At,ii,Pl=ot(()=>{he(),de(),pe(),Wt={},ri=!1,Zt={},ni=!1,At={},ii=!1}),Je={};Vt(Je,{Buffer:()=>Lr,INSPECT_MAX_BYTES:()=>Fs,default:()=>dt,kMaxLength:()=>Ws});var dt,Lr,Fs,Ws,Xe=ot(()=>{he(),de(),pe(),Pl(),dt=Ol(),dt.Buffer,dt.SlowBuffer,dt.INSPECT_MAX_BYTES,dt.kMaxLength,Lr=dt.Buffer,Fs=dt.INSPECT_MAX_BYTES,Ws=dt.kMaxLength}),de=ot(()=>{Xe()}),He=me((f,a)=>{he(),de(),pe();var o=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let l="";for(let r=0;r<s.length;r++)l+=`    ${s[r].stack}
`;super(l),this.name="AggregateError",this.errors=s}};a.exports={AggregateError:o,ArrayIsArray(s){return Array.isArray(s)},ArrayPrototypeIncludes(s,l){return s.includes(l)},ArrayPrototypeIndexOf(s,l){return s.indexOf(l)},ArrayPrototypeJoin(s,l){return s.join(l)},ArrayPrototypeMap(s,l){return s.map(l)},ArrayPrototypePop(s,l){return s.pop(l)},ArrayPrototypePush(s,l){return s.push(l)},ArrayPrototypeSlice(s,l,r){return s.slice(l,r)},Error,FunctionPrototypeCall(s,l,...r){return s.call(l,...r)},FunctionPrototypeSymbolHasInstance(s,l){return Function.prototype[Symbol.hasInstance].call(s,l)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(s,l){return Object.defineProperties(s,l)},ObjectDefineProperty(s,l,r){return Object.defineProperty(s,l,r)},ObjectGetOwnPropertyDescriptor(s,l){return Object.getOwnPropertyDescriptor(s,l)},ObjectKeys(s){return Object.keys(s)},ObjectSetPrototypeOf(s,l){return Object.setPrototypeOf(s,l)},Promise,PromisePrototypeCatch(s,l){return s.catch(l)},PromisePrototypeThen(s,l,r){return s.then(l,r)},PromiseReject(s){return Promise.reject(s)},PromiseResolve(s){return Promise.resolve(s)},ReflectApply:Reflect.apply,RegExpPrototypeTest(s,l){return s.test(l)},SafeSet:Set,String,StringPrototypeSlice(s,l,r){return s.slice(l,r)},StringPrototypeToLowerCase(s){return s.toLowerCase()},StringPrototypeToUpperCase(s){return s.toUpperCase()},StringPrototypeTrim(s){return s.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(s,l,r){return s.set(l,r)},Boolean,Uint8Array}}),qs=me((f,a)=>{he(),de(),pe(),a.exports={format(o,...s){return o.replace(/%([sdifj])/g,function(...[l,r]){let t=s.shift();return r==="f"?t.toFixed(6):r==="j"?JSON.stringify(t):r==="s"&&typeof t=="object"?`${t.constructor!==Object?t.constructor.name:""} {}`.trim():t.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),nt=me((f,a)=>{he(),de(),pe();var{format:o,inspect:s}=qs(),{AggregateError:l}=He(),r=globalThis.AggregateError||l,t=Symbol("kIsNodeError"),n=["string","function","number","object","Function","Object","boolean","bigint","symbol"],e=/^([A-Z][a-z0-9]*)+$/,i="__node_internal_",u={};function d(g,_){if(!g)throw new u.ERR_INTERNAL_ASSERTION(_)}function p(g){let _="",E=g.length,v=g[0]==="-"?1:0;for(;E>=v+4;E-=3)_=`_${g.slice(E-3,E)}${_}`;return`${g.slice(0,E)}${_}`}function b(g,_,E){if(typeof _=="function")return d(_.length<=E.length,`Code: ${g}; The provided arguments length (${E.length}) does not match the required ones (${_.length}).`),_(...E);let v=(_.match(/%[dfijoOs]/g)||[]).length;return d(v===E.length,`Code: ${g}; The provided arguments length (${E.length}) does not match the required ones (${v}).`),E.length===0?_:o(_,...E)}function m(g,_,E){E||(E=Error);class v extends E{constructor(...P){super(b(g,_,P))}toString(){return`${this.name} [${g}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:E.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${g}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=g,v.prototype[t]=!0,u[g]=v}function S(g){let _=i+g.name;return Object.defineProperty(g,"name",{value:_}),g}function w(g,_){if(g&&_&&g!==_){if(Array.isArray(_.errors))return _.errors.push(g),_;let E=new r([_,g],_.message);return E.code=_.code,E}return g||_}var A=class extends Error{constructor(g="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",_);super(g,_),this.code="ABORT_ERR",this.name="AbortError"}};m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(g,_,E)=>{d(typeof g=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let v="The ";g.endsWith(" argument")?v+=`${g} `:v+=`"${g}" ${g.includes(".")?"property":"argument"} `,v+="must be ";let R=[],P=[],I=[];for(let k of _)d(typeof k=="string","All expected entries have to be of type string"),n.includes(k)?R.push(k.toLowerCase()):e.test(k)?P.push(k):(d(k!=="object",'The value "object" should be written as "Object"'),I.push(k));if(P.length>0){let k=R.indexOf("object");k!==-1&&(R.splice(R,k,1),P.push("Object"))}if(R.length>0){switch(R.length){case 1:v+=`of type ${R[0]}`;break;case 2:v+=`one of type ${R[0]} or ${R[1]}`;break;default:{let k=R.pop();v+=`one of type ${R.join(", ")}, or ${k}`}}(P.length>0||I.length>0)&&(v+=" or ")}if(P.length>0){switch(P.length){case 1:v+=`an instance of ${P[0]}`;break;case 2:v+=`an instance of ${P[0]} or ${P[1]}`;break;default:{let k=P.pop();v+=`an instance of ${P.join(", ")}, or ${k}`}}I.length>0&&(v+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(v+="an "),v+=`${I[0]}`;break;case 2:v+=`one of ${I[0]} or ${I[1]}`;break;default:{let k=I.pop();v+=`one of ${I.join(", ")}, or ${k}`}}if(E==null)v+=`. Received ${E}`;else if(typeof E=="function"&&E.name)v+=`. Received function ${E.name}`;else if(typeof E=="object"){var O;if((O=E.constructor)!==null&&O!==void 0&&O.name)v+=`. Received an instance of ${E.constructor.name}`;else{let k=s(E,{depth:-1});v+=`. Received ${k}`}}else{let k=s(E,{colors:!1});k.length>25&&(k=`${k.slice(0,25)}...`),v+=`. Received type ${typeof E} (${k})`}return v},TypeError),m("ERR_INVALID_ARG_VALUE",(g,_,E="is invalid")=>{let v=s(_);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${g.includes(".")?"property":"argument"} '${g}' ${E}. Received ${v}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(g,_,E)=>{var v;let R=E!=null&&(v=E.constructor)!==null&&v!==void 0&&v.name?`instance of ${E.constructor.name}`:`type ${typeof E}`;return`Expected ${g} to be returned from the "${_}" function but got ${R}.`},TypeError),m("ERR_MISSING_ARGS",(...g)=>{d(g.length>0,"At least one arg needs to be specified");let _,E=g.length;switch(g=(Array.isArray(g)?g:[g]).map(v=>`"${v}"`).join(" or "),E){case 1:_+=`The ${g[0]} argument`;break;case 2:_+=`The ${g[0]} and ${g[1]} arguments`;break;default:{let v=g.pop();_+=`The ${g.join(", ")}, and ${v} arguments`}break}return`${_} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(g,_,E)=>{d(_,'Missing "range" argument');let v;if(Number.isInteger(E)&&Math.abs(E)>2**32)v=p(String(E));else if(typeof E=="bigint"){v=String(E);let R=BigInt(2)**BigInt(32);(E>R||E<-R)&&(v=p(v)),v+="n"}else v=s(E);return`The value of "${g}" is out of range. It must be ${_}. Received ${v}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),a.exports={AbortError:A,aggregateTwoErrors:S(w),hideStackFrames:S,codes:u}}),ir=me((f,a)=>{he(),de(),pe();var{AbortController:o,AbortSignal:s}=typeof self<"u"?self:typeof window<"u"?window:void 0;a.exports=o,a.exports.AbortSignal=s,a.exports.default=o}),Pt={};Vt(Pt,{EventEmitter:()=>$s,default:()=>qt,defaultMaxListeners:()=>zs,init:()=>Vs,listenerCount:()=>Hs,on:()=>Ks,once:()=>Gs});function Rl(){if(oi)return er;oi=!0;var f=typeof Reflect=="object"?Reflect:null,a=f&&typeof f.apply=="function"?f.apply:function(E,v,R){return Function.prototype.apply.call(E,v,R)},o;f&&typeof f.ownKeys=="function"?o=f.ownKeys:Object.getOwnPropertySymbols?o=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:o=function(E){return Object.getOwnPropertyNames(E)};function s(E){console&&console.warn&&console.warn(E)}var l=Number.isNaN||function(E){return E!==E};function r(){r.init.call(this)}er=r,er.once=A,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var t=10;function n(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");t=E}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function e(E){return E._maxListeners===void 0?r.defaultMaxListeners:E._maxListeners}r.prototype.getMaxListeners=function(){return e(this)},r.prototype.emit=function(E){for(var v=[],R=1;R<arguments.length;R++)v.push(arguments[R]);var P=E==="error",I=this._events;if(I!==void 0)P=P&&I.error===void 0;else if(!P)return!1;if(P){var O;if(v.length>0&&(O=v[0]),O instanceof Error)throw O;var k=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw k.context=O,k}var F=I[E];if(F===void 0)return!1;if(typeof F=="function")a(F,this,v);else for(var x=F.length,q=m(F,x),R=0;R<x;++R)a(q[R],this,v);return!0};function i(E,v,R,P){var I,O,k;if(n(R),O=E._events,O===void 0?(O=E._events=Object.create(null),E._eventsCount=0):(O.newListener!==void 0&&(E.emit("newListener",v,R.listener?R.listener:R),O=E._events),k=O[v]),k===void 0)k=O[v]=R,++E._eventsCount;else if(typeof k=="function"?k=O[v]=P?[R,k]:[k,R]:P?k.unshift(R):k.push(R),I=e(E),I>0&&k.length>I&&!k.warned){k.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=E,F.type=v,F.count=k.length,s(F)}return E}r.prototype.addListener=function(E,v){return i(this,E,v,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(E,v){return i(this,E,v,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,v,R){var P={fired:!1,wrapFn:void 0,target:E,type:v,listener:R},I=u.bind(P);return I.listener=R,P.wrapFn=I,I}r.prototype.once=function(E,v){return n(v),this.on(E,d(this,E,v)),this},r.prototype.prependOnceListener=function(E,v){return n(v),this.prependListener(E,d(this,E,v)),this},r.prototype.removeListener=function(E,v){var R,P,I,O,k;if(n(v),P=this._events,P===void 0)return this;if(R=P[E],R===void 0)return this;if(R===v||R.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete P[E],P.removeListener&&this.emit("removeListener",E,R.listener||v));else if(typeof R!="function"){for(I=-1,O=R.length-1;O>=0;O--)if(R[O]===v||R[O].listener===v){k=R[O].listener,I=O;break}if(I<0)return this;I===0?R.shift():S(R,I),R.length===1&&(P[E]=R[0]),P.removeListener!==void 0&&this.emit("removeListener",E,k||v)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(E){var v,R,P;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[E]),this;if(arguments.length===0){var I=Object.keys(R),O;for(P=0;P<I.length;++P)O=I[P],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=R[E],typeof v=="function")this.removeListener(E,v);else if(v!==void 0)for(P=v.length-1;P>=0;P--)this.removeListener(E,v[P]);return this};function p(E,v,R){var P=E._events;if(P===void 0)return[];var I=P[v];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?w(I):m(I,I.length)}r.prototype.listeners=function(E){return p(this,E,!0)},r.prototype.rawListeners=function(E){return p(this,E,!1)},r.listenerCount=function(E,v){return typeof E.listenerCount=="function"?E.listenerCount(v):b.call(E,v)},r.prototype.listenerCount=b;function b(E){var v=this._events;if(v!==void 0){var R=v[E];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}r.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function m(E,v){for(var R=new Array(v),P=0;P<v;++P)R[P]=E[P];return R}function S(E,v){for(;v+1<E.length;v++)E[v]=E[v+1];E.pop()}function w(E){for(var v=new Array(E.length),R=0;R<v.length;++R)v[R]=E[R].listener||E[R];return v}function A(E,v){return new Promise(function(R,P){function I(k){E.removeListener(v,O),P(k)}function O(){typeof E.removeListener=="function"&&E.removeListener("error",I),R([].slice.call(arguments))}_(E,v,O,{once:!0}),v!=="error"&&g(E,I,{once:!0})})}function g(E,v,R){typeof E.on=="function"&&_(E,"error",v,R)}function _(E,v,R,P){if(typeof E.on=="function")P.once?E.once(v,R):E.on(v,R);else if(typeof E.addEventListener=="function")E.addEventListener(v,function I(O){P.once&&E.removeEventListener(v,I),R(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return er}var er,oi,qt,$s,zs,Vs,Hs,Ks,Gs,Lt=ot(()=>{he(),de(),pe(),er={},oi=!1,qt=Rl(),qt.once,qt.once=function(f,a){return new Promise((o,s)=>{function l(...t){r!==void 0&&f.removeListener("error",r),o(t)}let r;a!=="error"&&(r=t=>{f.removeListener(name,l),s(t)},f.once("error",r)),f.once(a,l)})},qt.on=function(f,a){let o=[],s=[],l=null,r=!1,t={async next(){let i=o.shift();if(i)return createIterResult(i,!1);if(l){let u=Promise.reject(l);return l=null,u}return r?createIterResult(void 0,!0):new Promise((u,d)=>s.push({resolve:u,reject:d}))},async return(){f.removeListener(a,n),f.removeListener("error",e),r=!0;for(let i of s)i.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(i){l=i,f.removeListener(a,n),f.removeListener("error",e)},[Symbol.asyncIterator](){return this}};return f.on(a,n),f.on("error",e),t;function n(...i){let u=s.shift();u?u.resolve(createIterResult(i,!1)):o.push(i)}function e(i){r=!0;let u=s.shift();u?u.reject(i):l=i,t.return()}},{EventEmitter:$s,defaultMaxListeners:zs,init:Vs,listenerCount:Hs,on:Ks,once:Gs}=qt}),it=me((f,a)=>{he(),de(),pe();var o=(Xe(),Fe(Je)),{format:s,inspect:l}=qs(),{codes:{ERR_INVALID_ARG_TYPE:r}}=nt(),{kResistStopPropagation:t,AggregateError:n,SymbolDispose:e}=He(),i=globalThis.AbortSignal||ir().AbortSignal,u=globalThis.AbortController||ir().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||o.Blob,b=typeof p<"u"?function(w){return w instanceof p}:function(w){return!1},m=(w,A)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new r(A,"AbortSignal",w)},S=(w,A)=>{if(typeof w!="function")throw new r(A,"Function",w)};a.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(w){let A=!1;return function(...g){A||(A=!0,w.apply(this,g))}},createDeferredPromise:function(){let w,A;return{promise:new Promise((g,_)=>{w=g,A=_}),resolve:w,reject:A}},promisify(w){return new Promise((A,g)=>{w((_,...E)=>_?g(_):A(...E))})},debuglog(){return function(){}},format:s,inspect:l,types:{isAsyncFunction(w){return w instanceof d},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:b,deprecate(w,A){return w},addAbortListener:(Lt(),Fe(Pt)).addAbortListener||function(w,A){if(w===void 0)throw new r("signal","AbortSignal",w);m(w,"signal"),S(A,"listener");let g;return w.aborted?queueMicrotask(()=>A()):(w.addEventListener("abort",A,{__proto__:null,once:!0,[t]:!0}),g=()=>{w.removeEventListener("abort",A)}),{__proto__:null,[e](){var _;(_=g)===null||_===void 0||_()}}},AbortSignalAny:i.any||function(w){if(w.length===1)return w[0];let A=new u,g=()=>A.abort();return w.forEach(_=>{m(_,"signals"),_.addEventListener("abort",g,{once:!0})}),A.signal.addEventListener("abort",()=>{w.forEach(_=>_.removeEventListener("abort",g))},{once:!0}),A.signal}},a.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),or=me((f,a)=>{he(),de(),pe();var{ArrayIsArray:o,ArrayPrototypeIncludes:s,ArrayPrototypeJoin:l,ArrayPrototypeMap:r,NumberIsInteger:t,NumberIsNaN:n,NumberMAX_SAFE_INTEGER:e,NumberMIN_SAFE_INTEGER:i,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:b,StringPrototypeToUpperCase:m,StringPrototypeTrim:S}=He(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:A,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:v}}=nt(),{normalizeEncoding:R}=it(),{isAsyncFunction:P,isArrayBufferView:I}=it().types,O={};function k(J){return J===(J|0)}function F(J){return J===J>>>0}var x=/^[0-7]+$/,q="must be a 32-bit unsigned integer or an octal string";function V(J,ve,Ee){if(typeof J>"u"&&(J=Ee),typeof J=="string"){if(p(x,J)===null)throw new _(ve,J,q);J=u(J,8)}return te(J,ve),J}var L=w((J,ve,Ee=i,ce=e)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new E(ve,"an integer",J);if(J<Ee||J>ce)throw new E(ve,`>= ${Ee} && <= ${ce}`,J)}),ae=w((J,ve,Ee=-2147483648,ce=2147483647)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new E(ve,"an integer",J);if(J<Ee||J>ce)throw new E(ve,`>= ${Ee} && <= ${ce}`,J)}),te=w((J,ve,Ee=!1)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new E(ve,"an integer",J);let ce=Ee?1:0,je=4294967295;if(J<ce||J>je)throw new E(ve,`>= ${ce} && <= ${je}`,J)});function Z(J,ve){if(typeof J!="string")throw new g(ve,"string",J)}function le(J,ve,Ee=void 0,ce){if(typeof J!="number")throw new g(ve,"number",J);if(Ee!=null&&J<Ee||ce!=null&&J>ce||(Ee!=null||ce!=null)&&n(J))throw new E(ve,`${Ee!=null?`>= ${Ee}`:""}${Ee!=null&&ce!=null?" && ":""}${ce!=null?`<= ${ce}`:""}`,J)}var H=w((J,ve,Ee)=>{if(!s(Ee,J)){let ce="must be one of: "+l(r(Ee,je=>typeof je=="string"?`'${je}'`:b(je)),", ");throw new _(ve,J,ce)}});function ie(J,ve){if(typeof J!="boolean")throw new g(ve,"boolean",J)}function j(J,ve,Ee){return J==null||!d(J,ve)?Ee:J[ve]}var G=w((J,ve,Ee=null)=>{let ce=j(Ee,"allowArray",!1),je=j(Ee,"allowFunction",!1);if(!j(Ee,"nullable",!1)&&J===null||!ce&&o(J)||typeof J!="object"&&(!je||typeof J!="function"))throw new g(ve,"Object",J)}),fe=w((J,ve)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new g(ve,"a dictionary",J)}),$=w((J,ve,Ee=0)=>{if(!o(J))throw new g(ve,"Array",J);if(J.length<Ee){let ce=`must be longer than ${Ee}`;throw new _(ve,J,ce)}});function _e(J,ve){$(J,ve);for(let Ee=0;Ee<J.length;Ee++)Z(J[Ee],`${ve}[${Ee}]`)}function X(J,ve){$(J,ve);for(let Ee=0;Ee<J.length;Ee++)ie(J[Ee],`${ve}[${Ee}]`)}function D(J,ve){$(J,ve);for(let Ee=0;Ee<J.length;Ee++){let ce=J[Ee],je=`${ve}[${Ee}]`;if(ce==null)throw new g(je,"AbortSignal",ce);be(ce,je)}}function se(J,ve="signal"){if(Z(J,ve),O[J]===void 0)throw O[m(J)]!==void 0?new v(J+" (signals must use all capital letters)"):new v(J)}var K=w((J,ve="buffer")=>{if(!I(J))throw new g(ve,["Buffer","TypedArray","DataView"],J)});function ee(J,ve){let Ee=R(ve),ce=J.length;if(Ee==="hex"&&ce%2!==0)throw new _("encoding",ve,`is invalid for data of length ${ce}`)}function re(J,ve="Port",Ee=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&S(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Ee)throw new A(ve,J,Ee);return J|0}var be=w((J,ve)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new g(ve,"AbortSignal",J)}),ue=w((J,ve)=>{if(typeof J!="function")throw new g(ve,"Function",J)}),N=w((J,ve)=>{if(typeof J!="function"||P(J))throw new g(ve,"Function",J)}),Q=w((J,ve)=>{if(J!==void 0)throw new g(ve,"undefined",J)});function oe(J,ve,Ee){if(!s(Ee,J))throw new g(ve,`('${l(Ee,"|")}')`,J)}var ye=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ge(J,ve){if(typeof J>"u"||!p(ye,J))throw new _(ve,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function we(J){if(typeof J=="string")return ge(J,"hints"),J;if(o(J)){let ve=J.length,Ee="";if(ve===0)return Ee;for(let ce=0;ce<ve;ce++){let je=J[ce];ge(je,"hints"),Ee+=je,ce!==ve-1&&(Ee+=", ")}return Ee}throw new _("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}a.exports={isInt32:k,isUint32:F,parseFileMode:V,validateArray:$,validateStringArray:_e,validateBooleanArray:X,validateAbortSignalArray:D,validateBoolean:ie,validateBuffer:K,validateDictionary:fe,validateEncoding:ee,validateFunction:ue,validateInt32:ae,validateInteger:L,validateNumber:le,validateObject:G,validateOneOf:H,validatePlainFunction:N,validatePort:re,validateSignalName:se,validateString:Z,validateUint32:te,validateUndefined:Q,validateUnion:oe,validateAbortSignal:be,validateLinkHeaderValue:we}}),Dt=me((f,a)=>{he(),de(),pe();var o=a.exports={},s,l;function r(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=r}catch{s=r}try{typeof clearTimeout=="function"?l=clearTimeout:l=t}catch{l=t}})();function n(A){if(s===setTimeout)return setTimeout(A,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(A,0);try{return s(A,0)}catch{try{return s.call(null,A,0)}catch{return s.call(this,A,0)}}}function e(A){if(l===clearTimeout)return clearTimeout(A);if((l===t||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(A);try{return l(A)}catch{try{return l.call(null,A)}catch{return l.call(this,A)}}}var i=[],u=!1,d,p=-1;function b(){!u||!d||(u=!1,d.length?i=d.concat(i):p=-1,i.length&&m())}function m(){if(!u){var A=n(b);u=!0;for(var g=i.length;g;){for(d=i,i=[];++p<g;)d&&d[p].run();p=-1,g=i.length}d=null,u=!1,e(A)}}o.nextTick=function(A){var g=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)g[_-1]=arguments[_];i.push(new S(A,g)),i.length===1&&!u&&n(m)};function S(A,g){this.fun=A,this.array=g}S.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function w(){}o.on=w,o.addListener=w,o.once=w,o.off=w,o.removeListener=w,o.removeAllListeners=w,o.emit=w,o.prependListener=w,o.prependOnceListener=w,o.listeners=function(A){return[]},o.binding=function(A){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(A){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),vt=me((f,a)=>{he(),de(),pe();var{SymbolAsyncIterator:o,SymbolIterator:s,SymbolFor:l}=He(),r=l("nodejs.stream.destroyed"),t=l("nodejs.stream.errored"),n=l("nodejs.stream.readable"),e=l("nodejs.stream.writable"),i=l("nodejs.stream.disturbed"),u=l("nodejs.webstream.isClosedPromise"),d=l("nodejs.webstream.controllerErrorFunction");function p(j,G=!1){var fe;return!!(j&&typeof j.pipe=="function"&&typeof j.on=="function"&&(!G||typeof j.pause=="function"&&typeof j.resume=="function")&&(!j._writableState||((fe=j._readableState)===null||fe===void 0?void 0:fe.readable)!==!1)&&(!j._writableState||j._readableState))}function b(j){var G;return!!(j&&typeof j.write=="function"&&typeof j.on=="function"&&(!j._readableState||((G=j._writableState)===null||G===void 0?void 0:G.writable)!==!1))}function m(j){return!!(j&&typeof j.pipe=="function"&&j._readableState&&typeof j.on=="function"&&typeof j.write=="function")}function S(j){return j&&(j._readableState||j._writableState||typeof j.write=="function"&&typeof j.on=="function"||typeof j.pipe=="function"&&typeof j.on=="function")}function w(j){return!!(j&&!S(j)&&typeof j.pipeThrough=="function"&&typeof j.getReader=="function"&&typeof j.cancel=="function")}function A(j){return!!(j&&!S(j)&&typeof j.getWriter=="function"&&typeof j.abort=="function")}function g(j){return!!(j&&!S(j)&&typeof j.readable=="object"&&typeof j.writable=="object")}function _(j){return w(j)||A(j)||g(j)}function E(j,G){return j==null?!1:G===!0?typeof j[o]=="function":G===!1?typeof j[s]=="function":typeof j[o]=="function"||typeof j[s]=="function"}function v(j){if(!S(j))return null;let G=j._writableState,fe=j._readableState,$=G||fe;return!!(j.destroyed||j[r]||$!=null&&$.destroyed)}function R(j){if(!b(j))return null;if(j.writableEnded===!0)return!0;let G=j._writableState;return G!=null&&G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function P(j,G){if(!b(j))return null;if(j.writableFinished===!0)return!0;let fe=j._writableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.finished)!="boolean"?null:!!(fe.finished||G===!1&&fe.ended===!0&&fe.length===0)}function I(j){if(!p(j))return null;if(j.readableEnded===!0)return!0;let G=j._readableState;return!G||G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function O(j,G){if(!p(j))return null;let fe=j._readableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.endEmitted)!="boolean"?null:!!(fe.endEmitted||G===!1&&fe.ended===!0&&fe.length===0)}function k(j){return j&&j[n]!=null?j[n]:typeof(j==null?void 0:j.readable)!="boolean"?null:v(j)?!1:p(j)&&j.readable&&!O(j)}function F(j){return j&&j[e]!=null?j[e]:typeof(j==null?void 0:j.writable)!="boolean"?null:v(j)?!1:b(j)&&j.writable&&!R(j)}function x(j,G){return S(j)?v(j)?!0:!((G==null?void 0:G.readable)!==!1&&k(j)||(G==null?void 0:G.writable)!==!1&&F(j)):null}function q(j){var G,fe;return S(j)?j.writableErrored?j.writableErrored:(G=(fe=j._writableState)===null||fe===void 0?void 0:fe.errored)!==null&&G!==void 0?G:null:null}function V(j){var G,fe;return S(j)?j.readableErrored?j.readableErrored:(G=(fe=j._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&G!==void 0?G:null:null}function L(j){if(!S(j))return null;if(typeof j.closed=="boolean")return j.closed;let G=j._writableState,fe=j._readableState;return typeof(G==null?void 0:G.closed)=="boolean"||typeof(fe==null?void 0:fe.closed)=="boolean"?(G==null?void 0:G.closed)||(fe==null?void 0:fe.closed):typeof j._closed=="boolean"&&ae(j)?j._closed:null}function ae(j){return typeof j._closed=="boolean"&&typeof j._defaultKeepAlive=="boolean"&&typeof j._removedConnection=="boolean"&&typeof j._removedContLen=="boolean"}function te(j){return typeof j._sent100=="boolean"&&ae(j)}function Z(j){var G;return typeof j._consuming=="boolean"&&typeof j._dumped=="boolean"&&((G=j.req)===null||G===void 0?void 0:G.upgradeOrConnect)===void 0}function le(j){if(!S(j))return null;let G=j._writableState,fe=j._readableState,$=G||fe;return!$&&te(j)||!!($&&$.autoDestroy&&$.emitClose&&$.closed===!1)}function H(j){var G;return!!(j&&((G=j[i])!==null&&G!==void 0?G:j.readableDidRead||j.readableAborted))}function ie(j){var G,fe,$,_e,X,D,se,K,ee,re;return!!(j&&((G=(fe=($=(_e=(X=(D=j[t])!==null&&D!==void 0?D:j.readableErrored)!==null&&X!==void 0?X:j.writableErrored)!==null&&_e!==void 0?_e:(se=j._readableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&$!==void 0?$:(K=j._writableState)===null||K===void 0?void 0:K.errorEmitted)!==null&&fe!==void 0?fe:(ee=j._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&G!==void 0?G:!((re=j._writableState)===null||re===void 0)&&re.errored))}a.exports={isDestroyed:v,kIsDestroyed:r,isDisturbed:H,kIsDisturbed:i,isErrored:ie,kIsErrored:t,isReadable:k,kIsReadable:n,kIsClosedPromise:u,kControllerErrorFunction:d,kIsWritable:e,isClosed:L,isDuplexNodeStream:m,isFinished:x,isIterable:E,isReadableNodeStream:p,isReadableStream:w,isReadableEnded:I,isReadableFinished:O,isReadableErrored:V,isNodeStream:S,isWebStream:_,isWritable:F,isWritableNodeStream:b,isWritableStream:A,isWritableEnded:R,isWritableFinished:P,isWritableErrored:q,isServerRequest:Z,isServerResponse:te,willEmitClose:le,isTransformStream:g}}),Rt=me((f,a)=>{he(),de(),pe();var o=Dt(),{AbortError:s,codes:l}=nt(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:t}=l,{kEmptyObject:n,once:e}=it(),{validateAbortSignal:i,validateFunction:u,validateObject:d,validateBoolean:p}=or(),{Promise:b,PromisePrototypeThen:m,SymbolDispose:S}=He(),{isClosed:w,isReadable:A,isReadableNodeStream:g,isReadableStream:_,isReadableFinished:E,isReadableErrored:v,isWritable:R,isWritableNodeStream:P,isWritableStream:I,isWritableFinished:O,isWritableErrored:k,isNodeStream:F,willEmitClose:x,kIsClosedPromise:q}=vt(),V;function L(H){return H.setHeader&&typeof H.abort=="function"}var ae=()=>{};function te(H,ie,j){var G,fe;if(arguments.length===2?(j=ie,ie=n):ie==null?ie=n:d(ie,"options"),u(j,"callback"),i(ie.signal,"options.signal"),j=e(j),_(H)||I(H))return Z(H,ie,j);if(!F(H))throw new r("stream",["ReadableStream","WritableStream","Stream"],H);let $=(G=ie.readable)!==null&&G!==void 0?G:g(H),_e=(fe=ie.writable)!==null&&fe!==void 0?fe:P(H),X=H._writableState,D=H._readableState,se=()=>{H.writable||re()},K=x(H)&&g(H)===$&&P(H)===_e,ee=O(H,!1),re=()=>{ee=!0,H.destroyed&&(K=!1),!(K&&(!H.readable||$))&&(!$||be)&&j.call(H)},be=E(H,!1),ue=()=>{be=!0,H.destroyed&&(K=!1),!(K&&(!H.writable||_e))&&(!_e||ee)&&j.call(H)},N=J=>{j.call(H,J)},Q=w(H),oe=()=>{Q=!0;let J=k(H)||v(H);if(J&&typeof J!="boolean")return j.call(H,J);if($&&!be&&g(H,!0)&&!E(H,!1))return j.call(H,new t);if(_e&&!ee&&!O(H,!1))return j.call(H,new t);j.call(H)},ye=()=>{Q=!0;let J=k(H)||v(H);if(J&&typeof J!="boolean")return j.call(H,J);j.call(H)},ge=()=>{H.req.on("finish",re)};L(H)?(H.on("complete",re),K||H.on("abort",oe),H.req?ge():H.on("request",ge)):_e&&!X&&(H.on("end",se),H.on("close",se)),!K&&typeof H.aborted=="boolean"&&H.on("aborted",oe),H.on("end",ue),H.on("finish",re),ie.error!==!1&&H.on("error",N),H.on("close",oe),Q?o.nextTick(oe):X!=null&&X.errorEmitted||D!=null&&D.errorEmitted?K||o.nextTick(ye):(!$&&(!K||A(H))&&(ee||R(H)===!1)||!_e&&(!K||R(H))&&(be||A(H)===!1)||D&&H.req&&H.aborted)&&o.nextTick(ye);let we=()=>{j=ae,H.removeListener("aborted",oe),H.removeListener("complete",re),H.removeListener("abort",oe),H.removeListener("request",ge),H.req&&H.req.removeListener("finish",re),H.removeListener("end",se),H.removeListener("close",se),H.removeListener("finish",re),H.removeListener("end",ue),H.removeListener("error",N),H.removeListener("close",oe)};if(ie.signal&&!Q){let J=()=>{let ve=j;we(),ve.call(H,new s(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)o.nextTick(J);else{V=V||it().addAbortListener;let ve=V(ie.signal,J),Ee=j;j=e((...ce)=>{ve[S](),Ee.apply(H,ce)})}}return we}function Z(H,ie,j){let G=!1,fe=ae;if(ie.signal)if(fe=()=>{G=!0,j.call(H,new s(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)o.nextTick(fe);else{V=V||it().addAbortListener;let _e=V(ie.signal,fe),X=j;j=e((...D)=>{_e[S](),X.apply(H,D)})}let $=(..._e)=>{G||o.nextTick(()=>j.apply(H,_e))};return m(H[q].promise,$,$),ae}function le(H,ie){var j;let G=!1;return ie===null&&(ie=n),(j=ie)!==null&&j!==void 0&&j.cleanup&&(p(ie.cleanup,"cleanup"),G=ie.cleanup),new b((fe,$)=>{let _e=te(H,ie,X=>{G&&_e(),X?$(X):fe()})})}a.exports=te,a.exports.finished=le}),Ht=me((f,a)=>{he(),de(),pe();var o=Dt(),{aggregateTwoErrors:s,codes:{ERR_MULTIPLE_CALLBACK:l},AbortError:r}=nt(),{Symbol:t}=He(),{kIsDestroyed:n,isDestroyed:e,isFinished:i,isServerRequest:u}=vt(),d=t("kDestroy"),p=t("kConstruct");function b(x,q,V){x&&(x.stack,q&&!q.errored&&(q.errored=x),V&&!V.errored&&(V.errored=x))}function m(x,q){let V=this._readableState,L=this._writableState,ae=L||V;return L!=null&&L.destroyed||V!=null&&V.destroyed?(typeof q=="function"&&q(),this):(b(x,L,V),L&&(L.destroyed=!0),V&&(V.destroyed=!0),ae.constructed?S(this,x,q):this.once(d,function(te){S(this,s(te,x),q)}),this)}function S(x,q,V){let L=!1;function ae(te){if(L)return;L=!0;let Z=x._readableState,le=x._writableState;b(te,le,Z),le&&(le.closed=!0),Z&&(Z.closed=!0),typeof V=="function"&&V(te),te?o.nextTick(w,x,te):o.nextTick(A,x)}try{x._destroy(q||null,ae)}catch(te){ae(te)}}function w(x,q){g(x,q),A(x)}function A(x){let q=x._readableState,V=x._writableState;V&&(V.closeEmitted=!0),q&&(q.closeEmitted=!0),(V!=null&&V.emitClose||q!=null&&q.emitClose)&&x.emit("close")}function g(x,q){let V=x._readableState,L=x._writableState;L!=null&&L.errorEmitted||V!=null&&V.errorEmitted||(L&&(L.errorEmitted=!0),V&&(V.errorEmitted=!0),x.emit("error",q))}function _(){let x=this._readableState,q=this._writableState;x&&(x.constructed=!0,x.closed=!1,x.closeEmitted=!1,x.destroyed=!1,x.errored=null,x.errorEmitted=!1,x.reading=!1,x.ended=x.readable===!1,x.endEmitted=x.readable===!1),q&&(q.constructed=!0,q.destroyed=!1,q.closed=!1,q.closeEmitted=!1,q.errored=null,q.errorEmitted=!1,q.finalCalled=!1,q.prefinished=!1,q.ended=q.writable===!1,q.ending=q.writable===!1,q.finished=q.writable===!1)}function E(x,q,V){let L=x._readableState,ae=x._writableState;if(ae!=null&&ae.destroyed||L!=null&&L.destroyed)return this;L!=null&&L.autoDestroy||ae!=null&&ae.autoDestroy?x.destroy(q):q&&(q.stack,ae&&!ae.errored&&(ae.errored=q),L&&!L.errored&&(L.errored=q),V?o.nextTick(g,x,q):g(x,q))}function v(x,q){if(typeof x._construct!="function")return;let V=x._readableState,L=x._writableState;V&&(V.constructed=!1),L&&(L.constructed=!1),x.once(p,q),!(x.listenerCount(p)>1)&&o.nextTick(R,x)}function R(x){let q=!1;function V(L){if(q){E(x,L??new l);return}q=!0;let ae=x._readableState,te=x._writableState,Z=te||ae;ae&&(ae.constructed=!0),te&&(te.constructed=!0),Z.destroyed?x.emit(d,L):L?E(x,L,!0):o.nextTick(P,x)}try{x._construct(L=>{o.nextTick(V,L)})}catch(L){o.nextTick(V,L)}}function P(x){x.emit(p)}function I(x){return(x==null?void 0:x.setHeader)&&typeof x.abort=="function"}function O(x){x.emit("close")}function k(x,q){x.emit("error",q),o.nextTick(O,x)}function F(x,q){!x||e(x)||(!q&&!i(x)&&(q=new r),u(x)?(x.socket=null,x.destroy(q)):I(x)?x.abort():I(x.req)?x.req.abort():typeof x.destroy=="function"?x.destroy(q):typeof x.close=="function"?x.close():q?o.nextTick(k,x,q):o.nextTick(O,x),x.destroyed||(x[n]=!0))}a.exports={construct:v,destroyer:F,destroy:m,undestroy:_,errorOrDestroy:E}}),no=me((f,a)=>{he(),de(),pe();var{ArrayIsArray:o,ObjectSetPrototypeOf:s}=He(),{EventEmitter:l}=(Lt(),Fe(Pt));function r(n){l.call(this,n)}s(r.prototype,l.prototype),s(r,l),r.prototype.pipe=function(n,e){let i=this;function u(A){n.writable&&n.write(A)===!1&&i.pause&&i.pause()}i.on("data",u);function d(){i.readable&&i.resume&&i.resume()}n.on("drain",d),!n._isStdio&&(!e||e.end!==!1)&&(i.on("end",b),i.on("close",m));let p=!1;function b(){p||(p=!0,n.end())}function m(){p||(p=!0,typeof n.destroy=="function"&&n.destroy())}function S(A){w(),l.listenerCount(this,"error")===0&&this.emit("error",A)}t(i,"error",S),t(n,"error",S);function w(){i.removeListener("data",u),n.removeListener("drain",d),i.removeListener("end",b),i.removeListener("close",m),i.removeListener("error",S),n.removeListener("error",S),i.removeListener("end",w),i.removeListener("close",w),n.removeListener("close",w)}return i.on("end",w),i.on("close",w),n.on("close",w),n.emit("pipe",i),n};function t(n,e,i){if(typeof n.prependListener=="function")return n.prependListener(e,i);!n._events||!n._events[e]?n.on(e,i):o(n._events[e])?n._events[e].unshift(i):n._events[e]=[i,n._events[e]]}a.exports={Stream:r,prependListener:t}}),Fr=me((f,a)=>{he(),de(),pe();var{SymbolDispose:o}=He(),{AbortError:s,codes:l}=nt(),{isNodeStream:r,isWebStream:t,kControllerErrorFunction:n}=vt(),e=Rt(),{ERR_INVALID_ARG_TYPE:i}=l,u,d=(p,b)=>{if(typeof p!="object"||!("aborted"in p))throw new i(b,"AbortSignal",p)};a.exports.addAbortSignal=function(p,b){if(d(p,"signal"),!r(b)&&!t(b))throw new i("stream",["ReadableStream","WritableStream","Stream"],b);return a.exports.addAbortSignalNoValidate(p,b)},a.exports.addAbortSignalNoValidate=function(p,b){if(typeof p!="object"||!("aborted"in p))return b;let m=r(b)?()=>{b.destroy(new s(void 0,{cause:p.reason}))}:()=>{b[n](new s(void 0,{cause:p.reason}))};if(p.aborted)m();else{u=u||it().addAbortListener;let S=u(p,m);e(b,S[o])}return b}}),Cl=me((f,a)=>{he(),de(),pe();var{StringPrototypeSlice:o,SymbolIterator:s,TypedArrayPrototypeSet:l,Uint8Array:r}=He(),{Buffer:t}=(Xe(),Fe(Je)),{inspect:n}=it();a.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let i={data:e,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}unshift(e){let i={data:e,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let i=this.head,u=""+i.data;for(;(i=i.next)!==null;)u+=e+i.data;return u}concat(e){if(this.length===0)return t.alloc(0);let i=t.allocUnsafe(e>>>0),u=this.head,d=0;for(;u;)l(i,u.data,d),d+=u.data.length,u=u.next;return i}consume(e,i){let u=this.head.data;if(e<u.length){let d=u.slice(0,e);return this.head.data=u.slice(e),d}return e===u.length?this.shift():i?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[s](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let i="",u=this.head,d=0;do{let p=u.data;if(e>p.length)i+=p,e-=p.length;else{e===p.length?(i+=p,++d,u.next?this.head=u.next:this.head=this.tail=null):(i+=o(p,0,e),this.head=u,u.data=o(p,e));break}++d}while((u=u.next)!==null);return this.length-=d,i}_getBuffer(e){let i=t.allocUnsafe(e),u=e,d=this.head,p=0;do{let b=d.data;if(e>b.length)l(i,b,u-e),e-=b.length;else{e===b.length?(l(i,b,u-e),++p,d.next?this.head=d.next:this.head=this.tail=null):(l(i,new r(b.buffer,b.byteOffset,e),u-e),this.head=d,d.data=b.slice(e));break}++p}while((d=d.next)!==null);return this.length-=p,i}[Symbol.for("nodejs.util.inspect.custom")](e,i){return n(this,{...i,depth:0,customInspect:!1})}}}),Wr=me((f,a)=>{he(),de(),pe();var{MathFloor:o,NumberIsInteger:s}=He(),{validateInteger:l}=or(),{ERR_INVALID_ARG_VALUE:r}=nt().codes,t=16*1024,n=16;function e(p,b,m){return p.highWaterMark!=null?p.highWaterMark:b?p[m]:null}function i(p){return p?n:t}function u(p,b){l(b,"value",0),p?n=b:t=b}function d(p,b,m,S){let w=e(b,S,m);if(w!=null){if(!s(w)||w<0){let A=S?`options.${m}`:"options.highWaterMark";throw new r(A,w)}return o(w)}return i(p.objectMode)}a.exports={getHighWaterMark:d,getDefaultHighWaterMark:i,setDefaultHighWaterMark:u}}),jl=me((f,a)=>{he(),de(),pe();var o=(Xe(),Fe(Je)),s=o.Buffer;function l(t,n){for(var e in t)n[e]=t[e]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?a.exports=o:(l(o,f),f.Buffer=r);function r(t,n,e){return s(t,n,e)}r.prototype=Object.create(s.prototype),l(s,r),r.from=function(t,n,e){if(typeof t=="number")throw new TypeError("Argument must not be a number");return s(t,n,e)},r.alloc=function(t,n,e){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=s(t);return n!==void 0?typeof e=="string"?i.fill(n,e):i.fill(n):i.fill(0),i},r.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}}),Ml=me(f=>{he(),de(),pe();var a=jl().Buffer,o=a.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(g){if(!g)return"utf8";for(var _;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(_)return;g=(""+g).toLowerCase(),_=!0}}function l(g){var _=s(g);if(typeof _!="string"&&(a.isEncoding===o||!o(g)))throw new Error("Unknown encoding: "+g);return _||g}f.StringDecoder=r;function r(g){this.encoding=l(g);var _;switch(this.encoding){case"utf16le":this.text=p,this.end=b,_=4;break;case"utf8":this.fillLast=i,_=4;break;case"base64":this.text=m,this.end=S,_=3;break;default:this.write=w,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(_)}r.prototype.write=function(g){if(g.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(g),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<g.length?_?_+this.text(g,E):this.text(g,E):_||""},r.prototype.end=d,r.prototype.text=u,r.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function t(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function n(g,_,E){var v=_.length-1;if(v<E)return 0;var R=t(_[v]);return R>=0?(R>0&&(g.lastNeed=R-1),R):--v<E||R===-2?0:(R=t(_[v]),R>=0?(R>0&&(g.lastNeed=R-2),R):--v<E||R===-2?0:(R=t(_[v]),R>=0?(R>0&&(R===2?R=0:g.lastNeed=R-3),R):0))}function e(g,_,E){if((_[0]&192)!==128)return g.lastNeed=0,"";if(g.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return g.lastNeed=1,"";if(g.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return g.lastNeed=2,""}}function i(g){var _=this.lastTotal-this.lastNeed,E=e(this,g);if(E!==void 0)return E;if(this.lastNeed<=g.length)return g.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,_,0,g.length),this.lastNeed-=g.length}function u(g,_){var E=n(this,g,_);if(!this.lastNeed)return g.toString("utf8",_);this.lastTotal=E;var v=g.length-(E-this.lastNeed);return g.copy(this.lastChar,0,v),g.toString("utf8",_,v)}function d(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+"":_}function p(g,_){if((g.length-_)%2===0){var E=g.toString("utf16le",_);if(E){var v=E.charCodeAt(E.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",_,g.length-1)}function b(g){var _=g&&g.length?this.write(g):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function m(g,_){var E=(g.length-_)%3;return E===0?g.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",_,g.length-E))}function S(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function w(g){return g.toString(this.encoding)}function A(g){return g&&g.length?this.write(g):""}}),Qs=me((f,a)=>{he(),de(),pe();var o=Dt(),{PromisePrototypeThen:s,SymbolAsyncIterator:l,SymbolIterator:r}=He(),{Buffer:t}=(Xe(),Fe(Je)),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_NULL_VALUES:e}=nt().codes;function i(u,d,p){let b;if(typeof d=="string"||d instanceof t)return new u({objectMode:!0,...p,read(){this.push(d),this.push(null)}});let m;if(d&&d[l])m=!0,b=d[l]();else if(d&&d[r])m=!1,b=d[r]();else throw new n("iterable",["Iterable"],d);let S=new u({objectMode:!0,highWaterMark:1,...p}),w=!1;S._read=function(){w||(w=!0,g())},S._destroy=function(_,E){s(A(_),()=>o.nextTick(E,_),v=>o.nextTick(E,v||_))};async function A(_){let E=_!=null,v=typeof b.throw=="function";if(E&&v){let{value:R,done:P}=await b.throw(_);if(await R,P)return}if(typeof b.return=="function"){let{value:R}=await b.return();await R}}async function g(){for(;;){try{let{value:_,done:E}=m?await b.next():b.next();if(E)S.push(null);else{let v=_&&typeof _.then=="function"?await _:_;if(v===null)throw w=!1,new e;if(S.push(v))continue;w=!1}}catch(_){S.destroy(_)}break}}return S}a.exports=i}),qr=me((f,a)=>{he(),de(),pe();var o=Dt(),{ArrayPrototypeIndexOf:s,NumberIsInteger:l,NumberIsNaN:r,NumberParseInt:t,ObjectDefineProperties:n,ObjectKeys:e,ObjectSetPrototypeOf:i,Promise:u,SafeSet:d,SymbolAsyncDispose:p,SymbolAsyncIterator:b,Symbol:m}=He();a.exports=ce,ce.ReadableState=Ee;var{EventEmitter:S}=(Lt(),Fe(Pt)),{Stream:w,prependListener:A}=no(),{Buffer:g}=(Xe(),Fe(Je)),{addAbortSignal:_}=Fr(),E=Rt(),v=it().debuglog("stream",C=>{v=C}),R=Cl(),P=Ht(),{getHighWaterMark:I,getDefaultHighWaterMark:O}=Wr(),{aggregateTwoErrors:k,codes:{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_OUT_OF_RANGE:q,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:L},AbortError:ae}=nt(),{validateObject:te}=or(),Z=m("kPaused"),{StringDecoder:le}=Ml(),H=Qs();i(ce.prototype,w.prototype),i(ce,w);var ie=()=>{},{errorOrDestroy:j}=P,G=1,fe=2,$=4,_e=8,X=16,D=32,se=64,K=128,ee=256,re=512,be=1024,ue=2048,N=4096,Q=8192,oe=16384,ye=32768,ge=65536,we=1<<17,J=1<<18;function ve(C){return{enumerable:!1,get(){return(this.state&C)!==0},set(B){B?this.state|=C:this.state&=~C}}}n(Ee.prototype,{objectMode:ve(G),ended:ve(fe),endEmitted:ve($),reading:ve(_e),constructed:ve(X),sync:ve(D),needReadable:ve(se),emittedReadable:ve(K),readableListening:ve(ee),resumeScheduled:ve(re),errorEmitted:ve(be),emitClose:ve(ue),autoDestroy:ve(N),destroyed:ve(Q),closed:ve(oe),closeEmitted:ve(ye),multiAwaitDrain:ve(ge),readingMore:ve(we),dataEmitted:ve(J)});function Ee(C,B,Se){typeof Se!="boolean"&&(Se=B instanceof bt()),this.state=ue|N|X|D,C&&C.objectMode&&(this.state|=G),Se&&C&&C.readableObjectMode&&(this.state|=G),this.highWaterMark=C?I(this,C,"readableHighWaterMark",Se):O(!1),this.buffer=new R,this.length=0,this.pipes=[],this.flowing=null,this[Z]=null,C&&C.emitClose===!1&&(this.state&=~ue),C&&C.autoDestroy===!1&&(this.state&=~N),this.errored=null,this.defaultEncoding=C&&C.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,C&&C.encoding&&(this.decoder=new le(C.encoding),this.encoding=C.encoding)}function ce(C){if(!(this instanceof ce))return new ce(C);let B=this instanceof bt();this._readableState=new Ee(C,this,B),C&&(typeof C.read=="function"&&(this._read=C.read),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.construct=="function"&&(this._construct=C.construct),C.signal&&!B&&_(C.signal,this)),w.call(this,C),P.construct(this,()=>{this._readableState.needReadable&&W(this,this._readableState)})}ce.prototype.destroy=P.destroy,ce.prototype._undestroy=P.undestroy,ce.prototype._destroy=function(C,B){B(C)},ce.prototype[S.captureRejectionSymbol]=function(C){this.destroy(C)},ce.prototype[p]=function(){let C;return this.destroyed||(C=this.readableEnded?null:new ae,this.destroy(C)),new u((B,Se)=>E(this,xe=>xe&&xe!==C?Se(xe):B(null)))},ce.prototype.push=function(C,B){return je(this,C,B,!1)},ce.prototype.unshift=function(C,B){return je(this,C,B,!0)};function je(C,B,Se,xe){v("readableAddChunk",B);let Oe=C._readableState,Qe;if(!(Oe.state&G)&&(typeof B=="string"?(Se=Se||Oe.defaultEncoding,Oe.encoding!==Se&&(xe&&Oe.encoding?B=g.from(B,Se).toString(Oe.encoding):(B=g.from(B,Se),Se=""))):B instanceof g?Se="":w._isUint8Array(B)?(B=w._uint8ArrayToBuffer(B),Se=""):B!=null&&(Qe=new F("chunk",["string","Buffer","Uint8Array"],B))),Qe)j(C,Qe);else if(B===null)Oe.state&=~_e,M(C,Oe);else if(Oe.state&G||B&&B.length>0)if(xe)if(Oe.state&$)j(C,new L);else{if(Oe.destroyed||Oe.errored)return!1;c(C,Oe,B,!0)}else if(Oe.ended)j(C,new V);else{if(Oe.destroyed||Oe.errored)return!1;Oe.state&=~_e,Oe.decoder&&!Se?(B=Oe.decoder.write(B),Oe.objectMode||B.length!==0?c(C,Oe,B,!1):W(C,Oe)):c(C,Oe,B,!1)}else xe||(Oe.state&=~_e,W(C,Oe));return!Oe.ended&&(Oe.length<Oe.highWaterMark||Oe.length===0)}function c(C,B,Se,xe){B.flowing&&B.length===0&&!B.sync&&C.listenerCount("data")>0?(B.state&ge?B.awaitDrainWriters.clear():B.awaitDrainWriters=null,B.dataEmitted=!0,C.emit("data",Se)):(B.length+=B.objectMode?1:Se.length,xe?B.buffer.unshift(Se):B.buffer.push(Se),B.state&se&&z(C)),W(C,B)}ce.prototype.isPaused=function(){let C=this._readableState;return C[Z]===!0||C.flowing===!1},ce.prototype.setEncoding=function(C){let B=new le(C);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;let Se=this._readableState.buffer,xe="";for(let Oe of Se)xe+=B.write(Oe);return Se.clear(),xe!==""&&Se.push(xe),this._readableState.length=xe.length,this};var h=1073741824;function y(C){if(C>h)throw new q("size","<= 1GiB",C);return C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++,C}function T(C,B){return C<=0||B.length===0&&B.ended?0:B.state&G?1:r(C)?B.flowing&&B.length?B.buffer.first().length:B.length:C<=B.length?C:B.ended?B.length:0}ce.prototype.read=function(C){v("read",C),C===void 0?C=NaN:l(C)||(C=t(C,10));let B=this._readableState,Se=C;if(C>B.highWaterMark&&(B.highWaterMark=y(C)),C!==0&&(B.state&=~K),C===0&&B.needReadable&&((B.highWaterMark!==0?B.length>=B.highWaterMark:B.length>0)||B.ended))return v("read: emitReadable",B.length,B.ended),B.length===0&&B.ended?Be(this):z(this),null;if(C=T(C,B),C===0&&B.ended)return B.length===0&&Be(this),null;let xe=(B.state&se)!==0;if(v("need readable",xe),(B.length===0||B.length-C<B.highWaterMark)&&(xe=!0,v("length less than watermark",xe)),B.ended||B.reading||B.destroyed||B.errored||!B.constructed)xe=!1,v("reading, ended or constructing",xe);else if(xe){v("do read"),B.state|=_e|D,B.length===0&&(B.state|=se);try{this._read(B.highWaterMark)}catch(Qe){j(this,Qe)}B.state&=~D,B.reading||(C=T(Se,B))}let Oe;return C>0?Oe=Re(C,B):Oe=null,Oe===null?(B.needReadable=B.length<=B.highWaterMark,C=0):(B.length-=C,B.multiAwaitDrain?B.awaitDrainWriters.clear():B.awaitDrainWriters=null),B.length===0&&(B.ended||(B.needReadable=!0),Se!==C&&B.ended&&Be(this)),Oe!==null&&!B.errorEmitted&&!B.closeEmitted&&(B.dataEmitted=!0,this.emit("data",Oe)),Oe};function M(C,B){if(v("onEofChunk"),!B.ended){if(B.decoder){let Se=B.decoder.end();Se&&Se.length&&(B.buffer.push(Se),B.length+=B.objectMode?1:Se.length)}B.ended=!0,B.sync?z(C):(B.needReadable=!1,B.emittedReadable=!0,ne(C))}}function z(C){let B=C._readableState;v("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(v("emitReadable",B.flowing),B.emittedReadable=!0,o.nextTick(ne,C))}function ne(C){let B=C._readableState;v("emitReadable_",B.destroyed,B.length,B.ended),!B.destroyed&&!B.errored&&(B.length||B.ended)&&(C.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,Ge(C)}function W(C,B){!B.readingMore&&B.constructed&&(B.readingMore=!0,o.nextTick(Y,C,B))}function Y(C,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&B.length===0);){let Se=B.length;if(v("maybeReadMore read 0"),C.read(0),Se===B.length)break}B.readingMore=!1}ce.prototype._read=function(C){throw new x("_read()")},ce.prototype.pipe=function(C,B){let Se=this,xe=this._readableState;xe.pipes.length===1&&(xe.multiAwaitDrain||(xe.multiAwaitDrain=!0,xe.awaitDrainWriters=new d(xe.awaitDrainWriters?[xe.awaitDrainWriters]:[]))),xe.pipes.push(C),v("pipe count=%d opts=%j",xe.pipes.length,B);let Oe=(!B||B.end!==!1)&&C!==o.stdout&&C!==o.stderr?rt:jt;xe.endEmitted?o.nextTick(Oe):Se.once("end",Oe),C.on("unpipe",Qe);function Qe(ut,ht){v("onunpipe"),ut===Se&&ht&&ht.hasUnpiped===!1&&(ht.hasUnpiped=!0,Yt())}function rt(){v("onend"),C.end()}let at,Qt=!1;function Yt(){v("cleanup"),C.removeListener("close",lt),C.removeListener("finish",St),at&&C.removeListener("drain",at),C.removeListener("error",Ct),C.removeListener("unpipe",Qe),Se.removeListener("end",rt),Se.removeListener("end",jt),Se.removeListener("data",ar),Qt=!0,at&&xe.awaitDrainWriters&&(!C._writableState||C._writableState.needDrain)&&at()}function Jt(){Qt||(xe.pipes.length===1&&xe.pipes[0]===C?(v("false write response, pause",0),xe.awaitDrainWriters=C,xe.multiAwaitDrain=!1):xe.pipes.length>1&&xe.pipes.includes(C)&&(v("false write response, pause",xe.awaitDrainWriters.size),xe.awaitDrainWriters.add(C)),Se.pause()),at||(at=Ie(Se,C),C.on("drain",at))}Se.on("data",ar);function ar(ut){v("ondata");let ht=C.write(ut);v("dest.write",ht),ht===!1&&Jt()}function Ct(ut){if(v("onerror",ut),jt(),C.removeListener("error",Ct),C.listenerCount("error")===0){let ht=C._writableState||C._readableState;ht&&!ht.errorEmitted?j(C,ut):C.emit("error",ut)}}A(C,"error",Ct);function lt(){C.removeListener("finish",St),jt()}C.once("close",lt);function St(){v("onfinish"),C.removeListener("close",lt),jt()}C.once("finish",St);function jt(){v("unpipe"),Se.unpipe(C)}return C.emit("pipe",Se),C.writableNeedDrain===!0?Jt():xe.flowing||(v("pipe resume"),Se.resume()),C};function Ie(C,B){return function(){let Se=C._readableState;Se.awaitDrainWriters===B?(v("pipeOnDrain",1),Se.awaitDrainWriters=null):Se.multiAwaitDrain&&(v("pipeOnDrain",Se.awaitDrainWriters.size),Se.awaitDrainWriters.delete(B)),(!Se.awaitDrainWriters||Se.awaitDrainWriters.size===0)&&C.listenerCount("data")&&C.resume()}}ce.prototype.unpipe=function(C){let B=this._readableState,Se={hasUnpiped:!1};if(B.pipes.length===0)return this;if(!C){let Oe=B.pipes;B.pipes=[],this.pause();for(let Qe=0;Qe<Oe.length;Qe++)Oe[Qe].emit("unpipe",this,{hasUnpiped:!1});return this}let xe=s(B.pipes,C);return xe===-1?this:(B.pipes.splice(xe,1),B.pipes.length===0&&this.pause(),C.emit("unpipe",this,Se),this)},ce.prototype.on=function(C,B){let Se=w.prototype.on.call(this,C,B),xe=this._readableState;return C==="data"?(xe.readableListening=this.listenerCount("readable")>0,xe.flowing!==!1&&this.resume()):C==="readable"&&!xe.endEmitted&&!xe.readableListening&&(xe.readableListening=xe.needReadable=!0,xe.flowing=!1,xe.emittedReadable=!1,v("on readable",xe.length,xe.reading),xe.length?z(this):xe.reading||o.nextTick(Te,this)),Se},ce.prototype.addListener=ce.prototype.on,ce.prototype.removeListener=function(C,B){let Se=w.prototype.removeListener.call(this,C,B);return C==="readable"&&o.nextTick(ke,this),Se},ce.prototype.off=ce.prototype.removeListener,ce.prototype.removeAllListeners=function(C){let B=w.prototype.removeAllListeners.apply(this,arguments);return(C==="readable"||C===void 0)&&o.nextTick(ke,this),B};function ke(C){let B=C._readableState;B.readableListening=C.listenerCount("readable")>0,B.resumeScheduled&&B[Z]===!1?B.flowing=!0:C.listenerCount("data")>0?C.resume():B.readableListening||(B.flowing=null)}function Te(C){v("readable nexttick read 0"),C.read(0)}ce.prototype.resume=function(){let C=this._readableState;return C.flowing||(v("resume"),C.flowing=!C.readableListening,Me(this,C)),C[Z]=!1,this};function Me(C,B){B.resumeScheduled||(B.resumeScheduled=!0,o.nextTick(Ve,C,B))}function Ve(C,B){v("resume",B.reading),B.reading||C.read(0),B.resumeScheduled=!1,C.emit("resume"),Ge(C),B.flowing&&!B.reading&&C.read(0)}ce.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function Ge(C){let B=C._readableState;for(v("flow",B.flowing);B.flowing&&C.read()!==null;);}ce.prototype.wrap=function(C){let B=!1;C.on("data",xe=>{!this.push(xe)&&C.pause&&(B=!0,C.pause())}),C.on("end",()=>{this.push(null)}),C.on("error",xe=>{j(this,xe)}),C.on("close",()=>{this.destroy()}),C.on("destroy",()=>{this.destroy()}),this._read=()=>{B&&C.resume&&(B=!1,C.resume())};let Se=e(C);for(let xe=1;xe<Se.length;xe++){let Oe=Se[xe];this[Oe]===void 0&&typeof C[Oe]=="function"&&(this[Oe]=C[Oe].bind(C))}return this},ce.prototype[b]=function(){return Ne(this)},ce.prototype.iterator=function(C){return C!==void 0&&te(C,"options"),Ne(this,C)};function Ne(C,B){typeof C.read!="function"&&(C=ce.wrap(C,{objectMode:!0}));let Se=We(C,B);return Se.stream=C,Se}async function*We(C,B){let Se=ie;function xe(rt){this===C?(Se(),Se=ie):Se=rt}C.on("readable",xe);let Oe,Qe=E(C,{writable:!1},rt=>{Oe=rt?k(Oe,rt):null,Se(),Se=ie});try{for(;;){let rt=C.destroyed?null:C.read();if(rt!==null)yield rt;else{if(Oe)throw Oe;if(Oe===null)return;await new u(xe)}}}catch(rt){throw Oe=k(Oe,rt),Oe}finally{(Oe||(B==null?void 0:B.destroyOnReturn)!==!1)&&(Oe===void 0||C._readableState.autoDestroy)?P.destroyer(C,null):(C.off("readable",xe),Qe())}}n(ce.prototype,{readable:{__proto__:null,get(){let C=this._readableState;return!!C&&C.readable!==!1&&!C.destroyed&&!C.errorEmitted&&!C.endEmitted},set(C){this._readableState&&(this._readableState.readable=!!C)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(C){this._readableState&&(this._readableState.flowing=C)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(C){this._readableState&&(this._readableState.destroyed=C)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),n(Ee.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(C){this[Z]=!!C}}}),ce._fromList=Re;function Re(C,B){if(B.length===0)return null;let Se;return B.objectMode?Se=B.buffer.shift():!C||C>=B.length?(B.decoder?Se=B.buffer.join(""):B.buffer.length===1?Se=B.buffer.first():Se=B.buffer.concat(B.length),B.buffer.clear()):Se=B.buffer.consume(C,B.decoder),Se}function Be(C){let B=C._readableState;v("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,o.nextTick(De,B,C))}function De(C,B){if(v("endReadableNT",C.endEmitted,C.length),!C.errored&&!C.closeEmitted&&!C.endEmitted&&C.length===0){if(C.endEmitted=!0,B.emit("end"),B.writable&&B.allowHalfOpen===!1)o.nextTick(Ke,B);else if(C.autoDestroy){let Se=B._writableState;(!Se||Se.autoDestroy&&(Se.finished||Se.writable===!1))&&B.destroy()}}}function Ke(C){C.writable&&!C.writableEnded&&!C.destroyed&&C.end()}ce.from=function(C,B){return H(ce,C,B)};var Ye;function st(){return Ye===void 0&&(Ye={}),Ye}ce.fromWeb=function(C,B){return st().newStreamReadableFromReadableStream(C,B)},ce.toWeb=function(C,B){return st().newReadableStreamFromStreamReadable(C,B)},ce.wrap=function(C,B){var Se,xe;return new ce({objectMode:(Se=(xe=C.readableObjectMode)!==null&&xe!==void 0?xe:C.objectMode)!==null&&Se!==void 0?Se:!0,...B,destroy(Oe,Qe){P.destroyer(C,Oe),Qe(Oe)}}).wrap(C)}}),io=me((f,a)=>{he(),de(),pe();var o=Dt(),{ArrayPrototypeSlice:s,Error:l,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:t,ObjectDefineProperties:n,ObjectSetPrototypeOf:e,StringPrototypeToLowerCase:i,Symbol:u,SymbolHasInstance:d}=He();a.exports=te,te.WritableState=L;var{EventEmitter:p}=(Lt(),Fe(Pt)),b=no().Stream,{Buffer:m}=(Xe(),Fe(Je)),S=Ht(),{addAbortSignal:w}=Fr(),{getHighWaterMark:A,getDefaultHighWaterMark:g}=Wr(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:k,ERR_UNKNOWN_ENCODING:F}=nt().codes,{errorOrDestroy:x}=S;e(te.prototype,b.prototype),e(te,b);function q(){}var V=u("kOnFinished");function L(N,Q,oe){typeof oe!="boolean"&&(oe=Q instanceof bt()),this.objectMode=!!(N&&N.objectMode),oe&&(this.objectMode=this.objectMode||!!(N&&N.writableObjectMode)),this.highWaterMark=N?A(this,N,"writableHighWaterMark",oe):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ye=!!(N&&N.decodeStrings===!1);this.decodeStrings=!ye,this.defaultEncoding=N&&N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=j.bind(void 0,Q),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ae(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!N||N.emitClose!==!1,this.autoDestroy=!N||N.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[V]=[]}function ae(N){N.buffered=[],N.bufferedIndex=0,N.allBuffers=!0,N.allNoop=!0}L.prototype.getBuffer=function(){return s(this.buffered,this.bufferedIndex)},t(L.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function te(N){let Q=this instanceof bt();if(!Q&&!r(te,this))return new te(N);this._writableState=new L(N,this,Q),N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final),typeof N.construct=="function"&&(this._construct=N.construct),N.signal&&w(N.signal,this)),b.call(this,N),S.construct(this,()=>{let oe=this._writableState;oe.writing||_e(this,oe),K(this,oe)})}t(te,d,{__proto__:null,value:function(N){return r(this,N)?!0:this!==te?!1:N&&N._writableState instanceof L}}),te.prototype.pipe=function(){x(this,new R)};function Z(N,Q,oe,ye){let ge=N._writableState;if(typeof oe=="function")ye=oe,oe=ge.defaultEncoding;else{if(!oe)oe=ge.defaultEncoding;else if(oe!=="buffer"&&!m.isEncoding(oe))throw new F(oe);typeof ye!="function"&&(ye=q)}if(Q===null)throw new O;if(!ge.objectMode)if(typeof Q=="string")ge.decodeStrings!==!1&&(Q=m.from(Q,oe),oe="buffer");else if(Q instanceof m)oe="buffer";else if(b._isUint8Array(Q))Q=b._uint8ArrayToBuffer(Q),oe="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],Q);let we;return ge.ending?we=new k:ge.destroyed&&(we=new P("write")),we?(o.nextTick(ye,we),x(N,we,!0),we):(ge.pendingcb++,le(N,ge,Q,oe,ye))}te.prototype.write=function(N,Q,oe){return Z(this,N,Q,oe)===!0},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){let N=this._writableState;N.corked&&(N.corked--,N.writing||_e(this,N))},te.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=i(N)),!m.isEncoding(N))throw new F(N);return this._writableState.defaultEncoding=N,this};function le(N,Q,oe,ye,ge){let we=Q.objectMode?1:oe.length;Q.length+=we;let J=Q.length<Q.highWaterMark;return J||(Q.needDrain=!0),Q.writing||Q.corked||Q.errored||!Q.constructed?(Q.buffered.push({chunk:oe,encoding:ye,callback:ge}),Q.allBuffers&&ye!=="buffer"&&(Q.allBuffers=!1),Q.allNoop&&ge!==q&&(Q.allNoop=!1)):(Q.writelen=we,Q.writecb=ge,Q.writing=!0,Q.sync=!0,N._write(oe,ye,Q.onwrite),Q.sync=!1),J&&!Q.errored&&!Q.destroyed}function H(N,Q,oe,ye,ge,we,J){Q.writelen=ye,Q.writecb=J,Q.writing=!0,Q.sync=!0,Q.destroyed?Q.onwrite(new P("write")):oe?N._writev(ge,Q.onwrite):N._write(ge,we,Q.onwrite),Q.sync=!1}function ie(N,Q,oe,ye){--Q.pendingcb,ye(oe),$(Q),x(N,oe)}function j(N,Q){let oe=N._writableState,ye=oe.sync,ge=oe.writecb;if(typeof ge!="function"){x(N,new v);return}oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0,Q?(Q.stack,oe.errored||(oe.errored=Q),N._readableState&&!N._readableState.errored&&(N._readableState.errored=Q),ye?o.nextTick(ie,N,oe,Q,ge):ie(N,oe,Q,ge)):(oe.buffered.length>oe.bufferedIndex&&_e(N,oe),ye?oe.afterWriteTickInfo!==null&&oe.afterWriteTickInfo.cb===ge?oe.afterWriteTickInfo.count++:(oe.afterWriteTickInfo={count:1,cb:ge,stream:N,state:oe},o.nextTick(G,oe.afterWriteTickInfo)):fe(N,oe,1,ge))}function G({stream:N,state:Q,count:oe,cb:ye}){return Q.afterWriteTickInfo=null,fe(N,Q,oe,ye)}function fe(N,Q,oe,ye){for(!Q.ending&&!N.destroyed&&Q.length===0&&Q.needDrain&&(Q.needDrain=!1,N.emit("drain"));oe-- >0;)Q.pendingcb--,ye();Q.destroyed&&$(Q),K(N,Q)}function $(N){if(N.writing)return;for(let ge=N.bufferedIndex;ge<N.buffered.length;++ge){var Q;let{chunk:we,callback:J}=N.buffered[ge],ve=N.objectMode?1:we.length;N.length-=ve,J((Q=N.errored)!==null&&Q!==void 0?Q:new P("write"))}let oe=N[V].splice(0);for(let ge=0;ge<oe.length;ge++){var ye;oe[ge]((ye=N.errored)!==null&&ye!==void 0?ye:new P("end"))}ae(N)}function _e(N,Q){if(Q.corked||Q.bufferProcessing||Q.destroyed||!Q.constructed)return;let{buffered:oe,bufferedIndex:ye,objectMode:ge}=Q,we=oe.length-ye;if(!we)return;let J=ye;if(Q.bufferProcessing=!0,we>1&&N._writev){Q.pendingcb-=we-1;let ve=Q.allNoop?q:ce=>{for(let je=J;je<oe.length;++je)oe[je].callback(ce)},Ee=Q.allNoop&&J===0?oe:s(oe,J);Ee.allBuffers=Q.allBuffers,H(N,Q,!0,Q.length,Ee,"",ve),ae(Q)}else{do{let{chunk:ve,encoding:Ee,callback:ce}=oe[J];oe[J++]=null;let je=ge?1:ve.length;H(N,Q,!1,je,ve,Ee,ce)}while(J<oe.length&&!Q.writing);J===oe.length?ae(Q):J>256?(oe.splice(0,J),Q.bufferedIndex=0):Q.bufferedIndex=J}Q.bufferProcessing=!1}te.prototype._write=function(N,Q,oe){if(this._writev)this._writev([{chunk:N,encoding:Q}],oe);else throw new E("_write()")},te.prototype._writev=null,te.prototype.end=function(N,Q,oe){let ye=this._writableState;typeof N=="function"?(oe=N,N=null,Q=null):typeof Q=="function"&&(oe=Q,Q=null);let ge;if(N!=null){let we=Z(this,N,Q);we instanceof l&&(ge=we)}return ye.corked&&(ye.corked=1,this.uncork()),ge||(!ye.errored&&!ye.ending?(ye.ending=!0,K(this,ye,!0),ye.ended=!0):ye.finished?ge=new I("end"):ye.destroyed&&(ge=new P("end"))),typeof oe=="function"&&(ge||ye.finished?o.nextTick(oe,ge):ye[V].push(oe)),this};function X(N){return N.ending&&!N.destroyed&&N.constructed&&N.length===0&&!N.errored&&N.buffered.length===0&&!N.finished&&!N.writing&&!N.errorEmitted&&!N.closeEmitted}function D(N,Q){let oe=!1;function ye(ge){if(oe){x(N,ge??v());return}if(oe=!0,Q.pendingcb--,ge){let we=Q[V].splice(0);for(let J=0;J<we.length;J++)we[J](ge);x(N,ge,Q.sync)}else X(Q)&&(Q.prefinished=!0,N.emit("prefinish"),Q.pendingcb++,o.nextTick(ee,N,Q))}Q.sync=!0,Q.pendingcb++;try{N._final(ye)}catch(ge){ye(ge)}Q.sync=!1}function se(N,Q){!Q.prefinished&&!Q.finalCalled&&(typeof N._final=="function"&&!Q.destroyed?(Q.finalCalled=!0,D(N,Q)):(Q.prefinished=!0,N.emit("prefinish")))}function K(N,Q,oe){X(Q)&&(se(N,Q),Q.pendingcb===0&&(oe?(Q.pendingcb++,o.nextTick((ye,ge)=>{X(ge)?ee(ye,ge):ge.pendingcb--},N,Q)):X(Q)&&(Q.pendingcb++,ee(N,Q))))}function ee(N,Q){Q.pendingcb--,Q.finished=!0;let oe=Q[V].splice(0);for(let ye=0;ye<oe.length;ye++)oe[ye]();if(N.emit("finish"),Q.autoDestroy){let ye=N._readableState;(!ye||ye.autoDestroy&&(ye.endEmitted||ye.readable===!1))&&N.destroy()}}n(te.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(N){this._writableState&&(this._writableState.destroyed=N)}},writable:{__proto__:null,get(){let N=this._writableState;return!!N&&N.writable!==!1&&!N.destroyed&&!N.errored&&!N.ending&&!N.ended},set(N){this._writableState&&(this._writableState.writable=!!N)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let N=this._writableState;return N?!N.destroyed&&!N.ending&&N.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var re=S.destroy;te.prototype.destroy=function(N,Q){let oe=this._writableState;return!oe.destroyed&&(oe.bufferedIndex<oe.buffered.length||oe[V].length)&&o.nextTick($,oe),re.call(this,N,Q),this},te.prototype._undestroy=S.undestroy,te.prototype._destroy=function(N,Q){Q(N)},te.prototype[p.captureRejectionSymbol]=function(N){this.destroy(N)};var be;function ue(){return be===void 0&&(be={}),be}te.fromWeb=function(N,Q){return ue().newStreamWritableFromWritableStream(N,Q)},te.toWeb=function(N){return ue().newWritableStreamFromStreamWritable(N)}}),Nl=me((f,a)=>{he(),de(),pe();var o=Dt(),s=(Xe(),Fe(Je)),{isReadable:l,isWritable:r,isIterable:t,isNodeStream:n,isReadableNodeStream:e,isWritableNodeStream:i,isDuplexNodeStream:u,isReadableStream:d,isWritableStream:p}=vt(),b=Rt(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:S,ERR_INVALID_RETURN_VALUE:w}}=nt(),{destroyer:A}=Ht(),g=bt(),_=qr(),E=io(),{createDeferredPromise:v}=it(),R=Qs(),P=globalThis.Blob||s.Blob,I=typeof P<"u"?function(V){return V instanceof P}:function(V){return!1},O=globalThis.AbortController||ir().AbortController,{FunctionPrototypeCall:k}=He(),F=class extends g{constructor(V){super(V),(V==null?void 0:V.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(V==null?void 0:V.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};a.exports=function V(L,ae){if(u(L))return L;if(e(L))return q({readable:L});if(i(L))return q({writable:L});if(n(L))return q({writable:!1,readable:!1});if(d(L))return q({readable:_.fromWeb(L)});if(p(L))return q({writable:E.fromWeb(L)});if(typeof L=="function"){let{value:Z,write:le,final:H,destroy:ie}=x(L);if(t(Z))return R(F,Z,{objectMode:!0,write:le,final:H,destroy:ie});let j=Z==null?void 0:Z.then;if(typeof j=="function"){let G,fe=k(j,Z,$=>{if($!=null)throw new w("nully","body",$)},$=>{A(G,$)});return G=new F({objectMode:!0,readable:!1,write:le,final($){H(async()=>{try{await fe,o.nextTick($,null)}catch(_e){o.nextTick($,_e)}})},destroy:ie})}throw new w("Iterable, AsyncIterable or AsyncFunction",ae,Z)}if(I(L))return V(L.arrayBuffer());if(t(L))return R(F,L,{objectMode:!0,writable:!1});if(d(L==null?void 0:L.readable)&&p(L==null?void 0:L.writable))return F.fromWeb(L);if(typeof(L==null?void 0:L.writable)=="object"||typeof(L==null?void 0:L.readable)=="object"){let Z=L!=null&&L.readable?e(L==null?void 0:L.readable)?L==null?void 0:L.readable:V(L.readable):void 0,le=L!=null&&L.writable?i(L==null?void 0:L.writable)?L==null?void 0:L.writable:V(L.writable):void 0;return q({readable:Z,writable:le})}let te=L==null?void 0:L.then;if(typeof te=="function"){let Z;return k(te,L,le=>{le!=null&&Z.push(le),Z.push(null)},le=>{A(Z,le)}),Z=new F({objectMode:!0,writable:!1,read(){}})}throw new S(ae,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],L)};function x(V){let{promise:L,resolve:ae}=v(),te=new O,Z=te.signal;return{value:V(async function*(){for(;;){let le=L;L=null;let{chunk:H,done:ie,cb:j}=await le;if(o.nextTick(j),ie)return;if(Z.aborted)throw new m(void 0,{cause:Z.reason});({promise:L,resolve:ae}=v()),yield H}}(),{signal:Z}),write(le,H,ie){let j=ae;ae=null,j({chunk:le,done:!1,cb:ie})},final(le){let H=ae;ae=null,H({done:!0,cb:le})},destroy(le,H){te.abort(),H(le)}}}function q(V){let L=V.readable&&typeof V.readable.read!="function"?_.wrap(V.readable):V.readable,ae=V.writable,te=!!l(L),Z=!!r(ae),le,H,ie,j,G;function fe($){let _e=j;j=null,_e?_e($):$&&G.destroy($)}return G=new F({readableObjectMode:!!(L!=null&&L.readableObjectMode),writableObjectMode:!!(ae!=null&&ae.writableObjectMode),readable:te,writable:Z}),Z&&(b(ae,$=>{Z=!1,$&&A(L,$),fe($)}),G._write=function($,_e,X){ae.write($,_e)?X():le=X},G._final=function($){ae.end(),H=$},ae.on("drain",function(){if(le){let $=le;le=null,$()}}),ae.on("finish",function(){if(H){let $=H;H=null,$()}})),te&&(b(L,$=>{te=!1,$&&A(L,$),fe($)}),L.on("readable",function(){if(ie){let $=ie;ie=null,$()}}),L.on("end",function(){G.push(null)}),G._read=function(){for(;;){let $=L.read();if($===null){ie=G._read;return}if(!G.push($))return}}),G._destroy=function($,_e){!$&&j!==null&&($=new m),ie=null,le=null,H=null,j===null?_e($):(j=_e,A(ae,$),A(L,$))},G}}),bt=me((f,a)=>{he(),de(),pe();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:s,ObjectKeys:l,ObjectSetPrototypeOf:r}=He();a.exports=e;var t=qr(),n=io();r(e.prototype,t.prototype),r(e,t);{let p=l(n.prototype);for(let b=0;b<p.length;b++){let m=p[b];e.prototype[m]||(e.prototype[m]=n.prototype[m])}}function e(p){if(!(this instanceof e))return new e(p);t.call(this,p),n.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(e.prototype,{writable:{__proto__:null,...s(n.prototype,"writable")},writableHighWaterMark:{__proto__:null,...s(n.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...s(n.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...s(n.prototype,"writableBuffer")},writableLength:{__proto__:null,...s(n.prototype,"writableLength")},writableFinished:{__proto__:null,...s(n.prototype,"writableFinished")},writableCorked:{__proto__:null,...s(n.prototype,"writableCorked")},writableEnded:{__proto__:null,...s(n.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...s(n.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var i;function u(){return i===void 0&&(i={}),i}e.fromWeb=function(p,b){return u().newStreamDuplexFromReadableWritablePair(p,b)},e.toWeb=function(p){return u().newReadableWritablePairFromDuplex(p)};var d;e.from=function(p){return d||(d=Nl()),d(p,"body")}}),Ys=me((f,a)=>{he(),de(),pe();var{ObjectSetPrototypeOf:o,Symbol:s}=He();a.exports=e;var{ERR_METHOD_NOT_IMPLEMENTED:l}=nt().codes,r=bt(),{getHighWaterMark:t}=Wr();o(e.prototype,r.prototype),o(e,r);var n=s("kCallback");function e(d){if(!(this instanceof e))return new e(d);let p=d?t(this,d,"readableHighWaterMark",!0):null;p===0&&(d={...d,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:d.writableHighWaterMark||0}),r.call(this,d),this._readableState.sync=!1,this[n]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",u)}function i(d){typeof this._flush=="function"&&!this.destroyed?this._flush((p,b)=>{if(p){d?d(p):this.destroy(p);return}b!=null&&this.push(b),this.push(null),d&&d()}):(this.push(null),d&&d())}function u(){this._final!==i&&i.call(this)}e.prototype._final=i,e.prototype._transform=function(d,p,b){throw new l("_transform()")},e.prototype._write=function(d,p,b){let m=this._readableState,S=this._writableState,w=m.length;this._transform(d,p,(A,g)=>{if(A){b(A);return}g!=null&&this.push(g),S.ended||w===m.length||m.length<m.highWaterMark?b():this[n]=b})},e.prototype._read=function(){if(this[n]){let d=this[n];this[n]=null,d()}}}),Js=me((f,a)=>{he(),de(),pe();var{ObjectSetPrototypeOf:o}=He();a.exports=l;var s=Ys();o(l.prototype,s.prototype),o(l,s);function l(r){if(!(this instanceof l))return new l(r);s.call(this,r)}l.prototype._transform=function(r,t,n){n(null,r)}}),oo=me((f,a)=>{he(),de(),pe();var o=Dt(),{ArrayIsArray:s,Promise:l,SymbolAsyncIterator:r,SymbolDispose:t}=He(),n=Rt(),{once:e}=it(),i=Ht(),u=bt(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:A}=nt(),{validateFunction:g,validateAbortSignal:_}=or(),{isIterable:E,isReadable:v,isReadableNodeStream:R,isNodeStream:P,isTransformStream:I,isWebStream:O,isReadableStream:k,isReadableFinished:F}=vt(),x=globalThis.AbortController||ir().AbortController,q,V,L;function ae($,_e,X){let D=!1;$.on("close",()=>{D=!0});let se=n($,{readable:_e,writable:X},K=>{D=!K});return{destroy:K=>{D||(D=!0,i.destroyer($,K||new S("pipe")))},cleanup:se}}function te($){return g($[$.length-1],"streams[stream.length - 1]"),$.pop()}function Z($){if(E($))return $;if(R($))return le($);throw new p("val",["Readable","Iterable","AsyncIterable"],$)}async function*le($){V||(V=qr()),yield*V.prototype[r].call($)}async function H($,_e,X,{end:D}){let se,K=null,ee=ue=>{if(ue&&(se=ue),K){let N=K;K=null,N()}},re=()=>new l((ue,N)=>{se?N(se):K=()=>{se?N(se):ue()}});_e.on("drain",ee);let be=n(_e,{readable:!1},ee);try{_e.writableNeedDrain&&await re();for await(let ue of $)_e.write(ue)||await re();D&&(_e.end(),await re()),X()}catch(ue){X(se!==ue?d(se,ue):ue)}finally{be(),_e.off("drain",ee)}}async function ie($,_e,X,{end:D}){I(_e)&&(_e=_e.writable);let se=_e.getWriter();try{for await(let K of $)await se.ready,se.write(K).catch(()=>{});await se.ready,D&&await se.close(),X()}catch(K){try{await se.abort(K),X(K)}catch(ee){X(ee)}}}function j(...$){return G($,e(te($)))}function G($,_e,X){if($.length===1&&s($[0])&&($=$[0]),$.length<2)throw new m("streams");let D=new x,se=D.signal,K=X==null?void 0:X.signal,ee=[];_(K,"options.signal");function re(){ge(new A)}L=L||it().addAbortListener;let be;K&&(be=L(K,re));let ue,N,Q=[],oe=0;function ye(Ee){ge(Ee,--oe===0)}function ge(Ee,ce){var je;if(Ee&&(!ue||ue.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ue=Ee),!(!ue&&!ce)){for(;Q.length;)Q.shift()(ue);(je=be)===null||je===void 0||je[t](),D.abort(),ce&&(ue||ee.forEach(c=>c()),o.nextTick(_e,ue,N))}}let we;for(let Ee=0;Ee<$.length;Ee++){let ce=$[Ee],je=Ee<$.length-1,c=Ee>0,h=je||(X==null?void 0:X.end)!==!1,y=Ee===$.length-1;if(P(ce)){let T=function(M){M&&M.name!=="AbortError"&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ye(M)};if(h){let{destroy:M,cleanup:z}=ae(ce,je,c);Q.push(M),v(ce)&&y&&ee.push(z)}ce.on("error",T),v(ce)&&y&&ee.push(()=>{ce.removeListener("error",T)})}if(Ee===0)if(typeof ce=="function"){if(we=ce({signal:se}),!E(we))throw new b("Iterable, AsyncIterable or Stream","source",we)}else E(ce)||R(ce)||I(ce)?we=ce:we=u.from(ce);else if(typeof ce=="function"){if(I(we)){var J;we=Z((J=we)===null||J===void 0?void 0:J.readable)}else we=Z(we);if(we=ce(we,{signal:se}),je){if(!E(we,!0))throw new b("AsyncIterable",`transform[${Ee-1}]`,we)}else{var ve;q||(q=Js());let T=new q({objectMode:!0}),M=(ve=we)===null||ve===void 0?void 0:ve.then;if(typeof M=="function")oe++,M.call(we,W=>{N=W,W!=null&&T.write(W),h&&T.end(),o.nextTick(ye)},W=>{T.destroy(W),o.nextTick(ye,W)});else if(E(we,!0))oe++,H(we,T,ye,{end:h});else if(k(we)||I(we)){let W=we.readable||we;oe++,H(W,T,ye,{end:h})}else throw new b("AsyncIterable or Promise","destination",we);we=T;let{destroy:z,cleanup:ne}=ae(we,!1,!0);Q.push(z),y&&ee.push(ne)}}else if(P(ce)){if(R(we)){oe+=2;let T=fe(we,ce,ye,{end:h});v(ce)&&y&&ee.push(T)}else if(I(we)||k(we)){let T=we.readable||we;oe++,H(T,ce,ye,{end:h})}else if(E(we))oe++,H(we,ce,ye,{end:h});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=ce}else if(O(ce)){if(R(we))oe++,ie(Z(we),ce,ye,{end:h});else if(k(we)||E(we))oe++,ie(we,ce,ye,{end:h});else if(I(we))oe++,ie(we.readable,ce,ye,{end:h});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=ce}else we=u.from(ce)}return(se!=null&&se.aborted||K!=null&&K.aborted)&&o.nextTick(re),we}function fe($,_e,X,{end:D}){let se=!1;if(_e.on("close",()=>{se||X(new w)}),$.pipe(_e,{end:!1}),D){let K=function(){se=!0,_e.end()};F($)?o.nextTick(K):$.once("end",K)}else X();return n($,{readable:!0,writable:!1},K=>{let ee=$._readableState;K&&K.code==="ERR_STREAM_PREMATURE_CLOSE"&&ee&&ee.ended&&!ee.errored&&!ee.errorEmitted?$.once("end",X).once("error",X):X(K)}),n(_e,{readable:!1,writable:!0},X)}a.exports={pipelineImpl:G,pipeline:j}}),Xs=me((f,a)=>{he(),de(),pe();var{pipeline:o}=oo(),s=bt(),{destroyer:l}=Ht(),{isNodeStream:r,isReadable:t,isWritable:n,isWebStream:e,isTransformStream:i,isWritableStream:u,isReadableStream:d}=vt(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:m}}=nt(),S=Rt();a.exports=function(...w){if(w.length===0)throw new m("streams");if(w.length===1)return s.from(w[0]);let A=[...w];if(typeof w[0]=="function"&&(w[0]=s.from(w[0])),typeof w[w.length-1]=="function"){let x=w.length-1;w[x]=s.from(w[x])}for(let x=0;x<w.length;++x)if(!(!r(w[x])&&!e(w[x]))){if(x<w.length-1&&!(t(w[x])||d(w[x])||i(w[x])))throw new b(`streams[${x}]`,A[x],"must be readable");if(x>0&&!(n(w[x])||u(w[x])||i(w[x])))throw new b(`streams[${x}]`,A[x],"must be writable")}let g,_,E,v,R;function P(x){let q=v;v=null,q?q(x):x?R.destroy(x):!F&&!k&&R.destroy()}let I=w[0],O=o(w,P),k=!!(n(I)||u(I)||i(I)),F=!!(t(O)||d(O)||i(O));if(R=new s({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(O!=null&&O.readableObjectMode),writable:k,readable:F}),k){if(r(I))R._write=function(q,V,L){I.write(q,V)?L():g=L},R._final=function(q){I.end(),_=q},I.on("drain",function(){if(g){let q=g;g=null,q()}});else if(e(I)){let q=(i(I)?I.writable:I).getWriter();R._write=async function(V,L,ae){try{await q.ready,q.write(V).catch(()=>{}),ae()}catch(te){ae(te)}},R._final=async function(V){try{await q.ready,q.close().catch(()=>{}),_=V}catch(L){V(L)}}}let x=i(O)?O.readable:O;S(x,()=>{if(_){let q=_;_=null,q()}})}if(F){if(r(O))O.on("readable",function(){if(E){let x=E;E=null,x()}}),O.on("end",function(){R.push(null)}),R._read=function(){for(;;){let x=O.read();if(x===null){E=R._read;return}if(!R.push(x))return}};else if(e(O)){let x=(i(O)?O.readable:O).getReader();R._read=async function(){for(;;)try{let{value:q,done:V}=await x.read();if(!R.push(q))return;if(V){R.push(null);return}}catch{return}}}}return R._destroy=function(x,q){!x&&v!==null&&(x=new p),E=null,g=null,_=null,v===null?q(x):(v=q,r(O)&&l(O,x))},R}}),Bl=me((f,a)=>{he(),de(),pe();var o=globalThis.AbortController||ir().AbortController,{codes:{ERR_INVALID_ARG_VALUE:s,ERR_INVALID_ARG_TYPE:l,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:t},AbortError:n}=nt(),{validateAbortSignal:e,validateInteger:i,validateObject:u}=or(),d=He().Symbol("kWeak"),p=He().Symbol("kResistStopPropagation"),{finished:b}=Rt(),m=Xs(),{addAbortSignalNoValidate:S}=Fr(),{isWritable:w,isNodeStream:A}=vt(),{deprecate:g}=it(),{ArrayPrototypePush:_,Boolean:E,MathFloor:v,Number:R,NumberIsNaN:P,Promise:I,PromiseReject:O,PromiseResolve:k,PromisePrototypeThen:F,Symbol:x}=He(),q=x("kEmpty"),V=x("kEof");function L(K,ee){if(ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),A(K)&&!w(K))throw new s("stream",K,"must be writable");let re=m(this,K);return ee!=null&&ee.signal&&S(ee.signal,re),re}function ae(K,ee){if(typeof K!="function")throw new l("fn",["Function","AsyncFunction"],K);ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal");let re=1;(ee==null?void 0:ee.concurrency)!=null&&(re=v(ee.concurrency));let be=re-1;return(ee==null?void 0:ee.highWaterMark)!=null&&(be=v(ee.highWaterMark)),i(re,"options.concurrency",1),i(be,"options.highWaterMark",0),be+=re,(async function*(){let ue=it().AbortSignalAny([ee==null?void 0:ee.signal].filter(E)),N=this,Q=[],oe={signal:ue},ye,ge,we=!1,J=0;function ve(){we=!0,Ee()}function Ee(){J-=1,ce()}function ce(){ge&&!we&&J<re&&Q.length<be&&(ge(),ge=null)}async function je(){try{for await(let c of N){if(we)return;if(ue.aborted)throw new n;try{if(c=K(c,oe),c===q)continue;c=k(c)}catch(h){c=O(h)}J+=1,F(c,Ee,ve),Q.push(c),ye&&(ye(),ye=null),!we&&(Q.length>=be||J>=re)&&await new I(h=>{ge=h})}Q.push(V)}catch(c){let h=O(c);F(h,Ee,ve),Q.push(h)}finally{we=!0,ye&&(ye(),ye=null)}}je();try{for(;;){for(;Q.length>0;){let c=await Q[0];if(c===V)return;if(ue.aborted)throw new n;c!==q&&(yield c),Q.shift(),ce()}await new I(c=>{ye=c})}}finally{we=!0,ge&&(ge(),ge=null)}}).call(this)}function te(K=void 0){return K!=null&&u(K,"options"),(K==null?void 0:K.signal)!=null&&e(K.signal,"options.signal"),(async function*(){let ee=0;for await(let be of this){var re;if(K!=null&&(re=K.signal)!==null&&re!==void 0&&re.aborted)throw new n({cause:K.signal.reason});yield[ee++,be]}}).call(this)}async function Z(K,ee=void 0){for await(let re of j.call(this,K,ee))return!0;return!1}async function le(K,ee=void 0){if(typeof K!="function")throw new l("fn",["Function","AsyncFunction"],K);return!await Z.call(this,async(...re)=>!await K(...re),ee)}async function H(K,ee){for await(let re of j.call(this,K,ee))return re}async function ie(K,ee){if(typeof K!="function")throw new l("fn",["Function","AsyncFunction"],K);async function re(be,ue){return await K(be,ue),q}for await(let be of ae.call(this,re,ee));}function j(K,ee){if(typeof K!="function")throw new l("fn",["Function","AsyncFunction"],K);async function re(be,ue){return await K(be,ue)?be:q}return ae.call(this,re,ee)}var G=class extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function fe(K,ee,re){var be;if(typeof K!="function")throw new l("reducer",["Function","AsyncFunction"],K);re!=null&&u(re,"options"),(re==null?void 0:re.signal)!=null&&e(re.signal,"options.signal");let ue=arguments.length>1;if(re!=null&&(be=re.signal)!==null&&be!==void 0&&be.aborted){let ge=new n(void 0,{cause:re.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(ge)),ge}let N=new o,Q=N.signal;if(re!=null&&re.signal){let ge={once:!0,[d]:this,[p]:!0};re.signal.addEventListener("abort",()=>N.abort(),ge)}let oe=!1;try{for await(let ge of this){var ye;if(oe=!0,re!=null&&(ye=re.signal)!==null&&ye!==void 0&&ye.aborted)throw new n;ue?ee=await K(ee,ge,{signal:Q}):(ee=ge,ue=!0)}if(!oe&&!ue)throw new G}finally{N.abort()}return ee}async function $(K){K!=null&&u(K,"options"),(K==null?void 0:K.signal)!=null&&e(K.signal,"options.signal");let ee=[];for await(let be of this){var re;if(K!=null&&(re=K.signal)!==null&&re!==void 0&&re.aborted)throw new n(void 0,{cause:K.signal.reason});_(ee,be)}return ee}function _e(K,ee){let re=ae.call(this,K,ee);return(async function*(){for await(let be of re)yield*be}).call(this)}function X(K){if(K=R(K),P(K))return 0;if(K<0)throw new t("number",">= 0",K);return K}function D(K,ee=void 0){return ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),K=X(K),(async function*(){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new n;for await(let ue of this){var be;if(ee!=null&&(be=ee.signal)!==null&&be!==void 0&&be.aborted)throw new n;K--<=0&&(yield ue)}}).call(this)}function se(K,ee=void 0){return ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),K=X(K),(async function*(){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new n;for await(let ue of this){var be;if(ee!=null&&(be=ee.signal)!==null&&be!==void 0&&be.aborted)throw new n;if(K-- >0&&(yield ue),K<=0)return}}).call(this)}a.exports.streamReturningOperators={asIndexedPairs:g(te,"readable.asIndexedPairs will be removed in a future version."),drop:D,filter:j,flatMap:_e,map:ae,take:se,compose:L},a.exports.promiseReturningOperators={every:le,forEach:ie,reduce:fe,toArray:$,some:Z,find:H}}),Zs=me((f,a)=>{he(),de(),pe();var{ArrayPrototypePop:o,Promise:s}=He(),{isIterable:l,isNodeStream:r,isWebStream:t}=vt(),{pipelineImpl:n}=oo(),{finished:e}=Rt();ea();function i(...u){return new s((d,p)=>{let b,m,S=u[u.length-1];if(S&&typeof S=="object"&&!r(S)&&!l(S)&&!t(S)){let w=o(u);b=w.signal,m=w.end}n(u,(w,A)=>{w?p(w):d(A)},{signal:b,end:m})})}a.exports={finished:e,pipeline:i}}),ea=me((f,a)=>{he(),de(),pe();var{Buffer:o}=(Xe(),Fe(Je)),{ObjectDefineProperty:s,ObjectKeys:l,ReflectApply:r}=He(),{promisify:{custom:t}}=it(),{streamReturningOperators:n,promiseReturningOperators:e}=Bl(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:i}}=nt(),u=Xs(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=Wr(),{pipeline:b}=oo(),{destroyer:m}=Ht(),S=Rt(),w=Zs(),A=vt(),g=a.exports=no().Stream;g.isDestroyed=A.isDestroyed,g.isDisturbed=A.isDisturbed,g.isErrored=A.isErrored,g.isReadable=A.isReadable,g.isWritable=A.isWritable,g.Readable=qr();for(let E of l(n)){let v=function(...P){if(new.target)throw i();return g.Readable.from(r(R,this,P))},R=n[E];s(v,"name",{__proto__:null,value:R.name}),s(v,"length",{__proto__:null,value:R.length}),s(g.Readable.prototype,E,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(let E of l(e)){let v=function(...P){if(new.target)throw i();return r(R,this,P)},R=e[E];s(v,"name",{__proto__:null,value:R.name}),s(v,"length",{__proto__:null,value:R.length}),s(g.Readable.prototype,E,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}g.Writable=io(),g.Duplex=bt(),g.Transform=Ys(),g.PassThrough=Js(),g.pipeline=b;var{addAbortSignal:_}=Fr();g.addAbortSignal=_,g.finished=S,g.destroy=m,g.compose=u,g.setDefaultHighWaterMark=d,g.getDefaultHighWaterMark=p,s(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),s(b,t,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),s(S,t,{__proto__:null,enumerable:!0,get(){return w.finished}}),g.Stream=g,g._isUint8Array=function(E){return E instanceof Uint8Array},g._uint8ArrayToBuffer=function(E){return o.from(E.buffer,E.byteOffset,E.byteLength)}}),Ft=me((f,a)=>{he(),de(),pe();var o=ea(),s=Zs(),l=o.Readable.destroy;a.exports=o.Readable,a.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,a.exports._isUint8Array=o._isUint8Array,a.exports.isDisturbed=o.isDisturbed,a.exports.isErrored=o.isErrored,a.exports.isReadable=o.isReadable,a.exports.Readable=o.Readable,a.exports.Writable=o.Writable,a.exports.Duplex=o.Duplex,a.exports.Transform=o.Transform,a.exports.PassThrough=o.PassThrough,a.exports.addAbortSignal=o.addAbortSignal,a.exports.finished=o.finished,a.exports.destroy=o.destroy,a.exports.destroy=l,a.exports.pipeline=o.pipeline,a.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return s}}),a.exports.Stream=o.Stream,a.exports.default=a.exports}),Ul=me((f,a)=>{he(),de(),pe(),typeof Object.create=="function"?a.exports=function(o,s){s&&(o.super_=s,o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:a.exports=function(o,s){if(s){o.super_=s;var l=function(){};l.prototype=s.prototype,o.prototype=new l,o.prototype.constructor=o}}}),Ll=me((f,a)=>{he(),de(),pe();var{Buffer:o}=(Xe(),Fe(Je)),s=Symbol.for("BufferList");function l(r){if(!(this instanceof l))return new l(r);l._init.call(this,r)}l._init=function(r){Object.defineProperty(this,s,{value:!0}),this._bufs=[],this.length=0,r&&this.append(r)},l.prototype._new=function(r){return new l(r)},l.prototype._offset=function(r){if(r===0)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){let e=t+this._bufs[n].length;if(r<e||n===this._bufs.length-1)return[n,r-t];t=e}},l.prototype._reverseOffset=function(r){let t=r[0],n=r[1];for(let e=0;e<t;e++)n+=this._bufs[e].length;return n},l.prototype.getBuffers=function(){return this._bufs},l.prototype.get=function(r){if(r>this.length||r<0)return;let t=this._offset(r);return this._bufs[t[0]][t[1]]},l.prototype.slice=function(r,t){return typeof r=="number"&&r<0&&(r+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,r,t)},l.prototype.copy=function(r,t,n,e){if((typeof n!="number"||n<0)&&(n=0),(typeof e!="number"||e>this.length)&&(e=this.length),n>=this.length||e<=0)return r||o.alloc(0);let i=!!r,u=this._offset(n),d=e-n,p=d,b=i&&t||0,m=u[1];if(n===0&&e===this.length){if(!i)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let S=0;S<this._bufs.length;S++)this._bufs[S].copy(r,b),b+=this._bufs[S].length;return r}if(p<=this._bufs[u[0]].length-m)return i?this._bufs[u[0]].copy(r,t,m,m+p):this._bufs[u[0]].slice(m,m+p);i||(r=o.allocUnsafe(d));for(let S=u[0];S<this._bufs.length;S++){let w=this._bufs[S].length-m;if(p>w)this._bufs[S].copy(r,b,m),b+=w;else{this._bufs[S].copy(r,b,m,m+p),b+=w;break}p-=w,m&&(m=0)}return r.length>b?r.slice(0,b):r},l.prototype.shallowSlice=function(r,t){if(r=r||0,t=typeof t!="number"?this.length:t,r<0&&(r+=this.length),t<0&&(t+=this.length),r===t)return this._new();let n=this._offset(r),e=this._offset(t),i=this._bufs.slice(n[0],e[0]+1);return e[1]===0?i.pop():i[i.length-1]=i[i.length-1].slice(0,e[1]),n[1]!==0&&(i[0]=i[0].slice(n[1])),this._new(i)},l.prototype.toString=function(r,t,n){return this.slice(t,n).toString(r)},l.prototype.consume=function(r){if(r=Math.trunc(r),Number.isNaN(r)||r<=0)return this;for(;this._bufs.length;)if(r>=this._bufs[0].length)r-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(r),this.length-=r;break}return this},l.prototype.duplicate=function(){let r=this._new();for(let t=0;t<this._bufs.length;t++)r.append(this._bufs[t]);return r},l.prototype.append=function(r){return this._attach(r,l.prototype._appendBuffer)},l.prototype.prepend=function(r){return this._attach(r,l.prototype._prependBuffer,!0)},l.prototype._attach=function(r,t,n){if(r==null)return this;if(r.buffer)t.call(this,o.from(r.buffer,r.byteOffset,r.byteLength));else if(Array.isArray(r)){let[e,i]=n?[r.length-1,-1]:[0,1];for(let u=e;u>=0&&u<r.length;u+=i)this._attach(r[u],t,n)}else if(this._isBufferList(r)){let[e,i]=n?[r._bufs.length-1,-1]:[0,1];for(let u=e;u>=0&&u<r._bufs.length;u+=i)this._attach(r._bufs[u],t,n)}else typeof r=="number"&&(r=r.toString()),t.call(this,o.from(r));return this},l.prototype._appendBuffer=function(r){this._bufs.push(r),this.length+=r.length},l.prototype._prependBuffer=function(r){this._bufs.unshift(r),this.length+=r.length},l.prototype.indexOf=function(r,t,n){if(n===void 0&&typeof t=="string"&&(n=t,t=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=o.from([r]):typeof r=="string"?r=o.from(r,n):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=o.from(r.buffer,r.byteOffset,r.byteLength):o.isBuffer(r)||(r=o.from(r)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;let e=this._offset(t),i=e[0],u=e[1];for(;i<this._bufs.length;i++){let d=this._bufs[i];for(;u<d.length;)if(d.length-u>=r.length){let p=d.indexOf(r,u);if(p!==-1)return this._reverseOffset([i,p]);u=d.length-r.length+1}else{let p=this._reverseOffset([i,u]);if(this._match(p,r))return p;u++}u=0}return-1},l.prototype._match=function(r,t){if(this.length-r<t.length)return!1;for(let n=0;n<t.length;n++)if(this.get(r+n)!==t[n])return!1;return!0},function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in r)(function(n){r[n]===null?l.prototype[n]=function(e,i){return this.slice(e,e+i)[n](0,i)}:l.prototype[n]=function(e=0){return this.slice(e,e+r[n])[n](0)}})(t)}(),l.prototype._isBufferList=function(r){return r instanceof l||l.isBufferList(r)},l.isBufferList=function(r){return r!=null&&r[s]},a.exports=l}),Dl=me((f,a)=>{he(),de(),pe();var o=Ft().Duplex,s=Ul(),l=Ll();function r(t){if(!(this instanceof r))return new r(t);if(typeof t=="function"){this._callback=t;let n=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",n)}),this.on("unpipe",function(e){e.removeListener("error",n)}),t=null}l._init.call(this,t),o.call(this)}s(r,o),Object.assign(r.prototype,l.prototype),r.prototype._new=function(t){return new r(t)},r.prototype._write=function(t,n,e){this._appendBuffer(t),typeof e=="function"&&e()},r.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},r.prototype.end=function(t){o.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype._destroy=function(t,n){this._bufs.length=0,this.length=0,n(t)},r.prototype._isBufferList=function(t){return t instanceof r||t instanceof l||r.isBufferList(t)},r.isBufferList=l.isBufferList,a.exports=r,a.exports.BufferListStream=r,a.exports.BufferList=l}),Fl=me((f,a)=>{he(),de(),pe();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};a.exports=o}),ta=me((f,a)=>{he(),de(),pe();var o=a.exports,{Buffer:s}=(Xe(),Fe(Je));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let r in o.requiredHeaderFlags){let t=o.requiredHeaderFlags[r];o.requiredHeaderFlagsErrors[r]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+o.types[r]+" packet"}o.codes={};for(let r in o.types){let t=o.types[r];o.codes[t]=r}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=s.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=s.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=s.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let r in o.properties){let t=o.properties[r];o.propertiesCodes[t]=r}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function l(r){return[0,1,2].map(t=>[0,1].map(n=>[0,1].map(e=>{let i=s.alloc(1);return i.writeUInt8(o.codes[r]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|t<<o.QOS_SHIFT|e,0,!0),i})))}o.PUBLISH_HEADER=l("publish"),o.SUBSCRIBE_HEADER=l("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=l("unsubscribe"),o.ACKS={unsuback:l("unsuback"),puback:l("puback"),pubcomp:l("pubcomp"),pubrel:l("pubrel"),pubrec:l("pubrec")},o.SUBACK_HEADER=s.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=s.from([3]),o.VERSION4=s.from([4]),o.VERSION5=s.from([5]),o.VERSION131=s.from([131]),o.VERSION132=s.from([132]),o.QOS=[0,1,2].map(r=>s.from([r])),o.EMPTY={pingreq:s.from([o.codes.pingreq<<4,0]),pingresp:s.from([o.codes.pingresp<<4,0]),disconnect:s.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Wl=me((f,a)=>{he(),de(),pe();var o=1e3,s=o*60,l=s*60,r=l*24,t=r*7,n=r*365.25;a.exports=function(p,b){b=b||{};var m=typeof p;if(m==="string"&&p.length>0)return e(p);if(m==="number"&&isFinite(p))return b.long?u(p):i(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function e(p){if(p=String(p),!(p.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(b){var m=parseFloat(b[1]),S=(b[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return m*n;case"weeks":case"week":case"w":return m*t;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*l;case"minutes":case"minute":case"mins":case"min":case"m":return m*s;case"seconds":case"second":case"secs":case"sec":case"s":return m*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function i(p){var b=Math.abs(p);return b>=r?Math.round(p/r)+"d":b>=l?Math.round(p/l)+"h":b>=s?Math.round(p/s)+"m":b>=o?Math.round(p/o)+"s":p+"ms"}function u(p){var b=Math.abs(p);return b>=r?d(p,b,r,"day"):b>=l?d(p,b,l,"hour"):b>=s?d(p,b,s,"minute"):b>=o?d(p,b,o,"second"):p+" ms"}function d(p,b,m,S){var w=b>=m*1.5;return Math.round(p/m)+" "+S+(w?"s":"")}}),ql=me((f,a)=>{he(),de(),pe();function o(s){r.debug=r,r.default=r,r.coerce=d,r.disable=i,r.enable=n,r.enabled=u,r.humanize=Wl(),r.destroy=p,Object.keys(s).forEach(b=>{r[b]=s[b]}),r.names=[],r.skips=[],r.formatters={};function l(b){let m=0;for(let S=0;S<b.length;S++)m=(m<<5)-m+b.charCodeAt(S),m|=0;return r.colors[Math.abs(m)%r.colors.length]}r.selectColor=l;function r(b){let m,S=null,w,A;function g(..._){if(!g.enabled)return;let E=g,v=Number(new Date),R=v-(m||v);E.diff=R,E.prev=m,E.curr=v,m=v,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let P=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(I,O)=>{if(I==="%%")return"%";P++;let k=r.formatters[O];if(typeof k=="function"){let F=_[P];I=k.call(E,F),_.splice(P,1),P--}return I}),r.formatArgs.call(E,_),(E.log||r.log).apply(E,_)}return g.namespace=b,g.useColors=r.useColors(),g.color=r.selectColor(b),g.extend=t,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(w!==r.namespaces&&(w=r.namespaces,A=r.enabled(b)),A),set:_=>{S=_}}),typeof r.init=="function"&&r.init(g),g}function t(b,m){let S=r(this.namespace+(typeof m>"u"?":":m)+b);return S.log=this.log,S}function n(b){r.save(b),r.namespaces=b,r.names=[],r.skips=[];let m=(typeof b=="string"?b:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let S of m)S[0]==="-"?r.skips.push(S.slice(1)):r.names.push(S)}function e(b,m){let S=0,w=0,A=-1,g=0;for(;S<b.length;)if(w<m.length&&(m[w]===b[S]||m[w]==="*"))m[w]==="*"?(A=w,g=S,w++):(S++,w++);else if(A!==-1)w=A+1,g++,S=g;else return!1;for(;w<m.length&&m[w]==="*";)w++;return w===m.length}function i(){let b=[...r.names,...r.skips.map(m=>"-"+m)].join(",");return r.enable(""),b}function u(b){for(let m of r.skips)if(e(b,m))return!1;for(let m of r.names)if(e(b,m))return!0;return!1}function d(b){return b instanceof Error?b.stack||b.message:b}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}a.exports=o}),mt=me((f,a)=>{he(),de(),pe(),f.formatArgs=s,f.save=l,f.load=r,f.useColors=o,f.storage=t(),f.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),f.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;e.splice(1,0,i,"color: inherit");let u=0,d=0;e[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(u++,p==="%c"&&(d=u))}),e.splice(d,0,i)}f.log=console.debug||console.log||(()=>{});function l(e){try{e?f.storage.setItem("debug",e):f.storage.removeItem("debug")}catch{}}function r(){let e;try{e=f.storage.getItem("debug")||f.storage.getItem("DEBUG")}catch{}return!e&&typeof Le<"u"&&"env"in Le&&(e=Le.env.DEBUG),e}function t(){try{return localStorage}catch{}}a.exports=ql()(f);var{formatters:n}=a.exports;n.j=function(e){try{return JSON.stringify(e)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}),$l=me((f,a)=>{he(),de(),pe();var o=Dl(),{EventEmitter:s}=(Lt(),Fe(Pt)),l=Fl(),r=ta(),t=mt()("mqtt-packet:parser"),n=class si extends s{constructor(){super(),this.parser=this.constructor.parser}static parser(i){return this instanceof si?(this.settings=i||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new si().parser(i)}_resetState(){t("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new l,this.error=null,this._list=o(),this._stateCounter=0}parse(i){for(this.error&&this._resetState(),this._list.append(i),t("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,t("parse: state complete. _stateCounter is now: %d",this._stateCounter),t("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return t("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let i=this._list.readUInt8(0),u=i>>r.CMD_SHIFT;this.packet.cmd=r.types[u];let d=i&15,p=r.requiredHeaderFlags[u];return p!=null&&d!==p?this._emitError(new Error(r.requiredHeaderFlagsErrors[u])):(this.packet.retain=(i&r.RETAIN_MASK)!==0,this.packet.qos=i>>r.QOS_SHIFT&r.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(i&r.DUP_MASK)!==0,t("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let i=this._parseVarByteNum(!0);return i&&(this.packet.length=i.value,this._list.consume(i.bytes)),t("_parseLength %d",i.value),!!i}_parsePayload(){t("_parsePayload: payload %O",this._list);let i=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}i=!0}return t("_parsePayload complete result: %s",i),i}_parseConnect(){t("_parseConnect");let i,u,d,p,b={},m=this.packet,S=this._parseString();if(S===null)return this._emitError(new Error("Cannot parse protocolId"));if(S!=="MQTT"&&S!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(m.protocolId=S,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(m.protocolVersion=this._list.readUInt8(this._pos),m.protocolVersion>=128&&(m.bridgeMode=!0,m.protocolVersion=m.protocolVersion-128),m.protocolVersion!==3&&m.protocolVersion!==4&&m.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));b.username=this._list.readUInt8(this._pos)&r.USERNAME_MASK,b.password=this._list.readUInt8(this._pos)&r.PASSWORD_MASK,b.will=this._list.readUInt8(this._pos)&r.WILL_FLAG_MASK;let w=!!(this._list.readUInt8(this._pos)&r.WILL_RETAIN_MASK),A=(this._list.readUInt8(this._pos)&r.WILL_QOS_MASK)>>r.WILL_QOS_SHIFT;if(b.will)m.will={},m.will.retain=w,m.will.qos=A;else{if(w)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(A)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(m.clean=(this._list.readUInt8(this._pos)&r.CLEAN_SESSION_MASK)!==0,this._pos++,m.keepalive=this._parseNum(),m.keepalive===-1)return this._emitError(new Error("Packet too short"));if(m.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(m.properties=_)}let g=this._parseString();if(g===null)return this._emitError(new Error("Packet too short"));if(m.clientId=g,t("_parseConnect: packet.clientId: %s",m.clientId),b.will){if(m.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(m.will.properties=_)}if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse will topic"));if(m.will.topic=i,t("_parseConnect: packet.will.topic: %s",m.will.topic),u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse will payload"));m.will.payload=u,t("_parseConnect: packet.will.paylaod: %s",m.will.payload)}if(b.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));m.username=p,t("_parseConnect: packet.username: %s",m.username)}if(b.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));m.password=d}return this.settings=m,t("_parseConnect: complete"),m}_parseConnack(){t("_parseConnack");let i=this.packet;if(this._list.length<1)return null;let u=this._list.readUInt8(this._pos++);if(u>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(i.sessionPresent=!!(u&r.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?i.reasonCode=this._list.readUInt8(this._pos++):i.reasonCode=0;else{if(this._list.length<2)return null;i.returnCode=this._list.readUInt8(this._pos++)}if(i.returnCode===-1||i.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(i.properties=d)}t("_parseConnack: complete")}_parsePublish(){t("_parsePublish");let i=this.packet;if(i.topic=this._parseString(),i.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(i.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(i.properties=u)}i.payload=this._list.slice(this._pos,i.length),t("_parsePublish: payload from buffer list: %o",i.payload)}}_parseSubscribe(){t("_parseSubscribe");let i=this.packet,u,d,p,b,m,S,w;if(i.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(i.properties=A)}if(i.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<i.length;){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=i.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=d&r.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(S=(d>>r.SUBSCRIBE_OPTIONS_NL_SHIFT&r.SUBSCRIBE_OPTIONS_NL_MASK)!==0,m=(d>>r.SUBSCRIBE_OPTIONS_RAP_SHIFT&r.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,b=d>>r.SUBSCRIBE_OPTIONS_RH_SHIFT&r.SUBSCRIBE_OPTIONS_RH_MASK,b>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:u,qos:p},this.settings.protocolVersion===5?(w.nl=S,w.rap=m,w.rh=b):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),t("_parseSubscribe: push subscription `%s` to subscription",w),i.subscriptions.push(w)}}}_parseSuback(){t("_parseSuback");let i=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(i.properties=u)}if(i.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!r.MQTT5_SUBACK_CODES[u])return this._emitError(new Error("Invalid suback code"))}else if(u>2&&u!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(u)}}}_parseUnsubscribe(){t("_parseUnsubscribe");let i=this.packet;if(i.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(i.properties=u)}if(i.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<i.length;){let u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse topic"));t("_parseUnsubscribe: push topic `%s` to unsubscriptions",u),i.unsubscriptions.push(u)}}}_parseUnsuback(){t("_parseUnsuback");let i=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&i.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(i.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let u=this._parseProperties();for(Object.getOwnPropertyNames(u).length&&(i.properties=u),i.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!r.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){t("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let i=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(i.length>2){switch(i.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!r.MQTT5_PUBACK_PUBREC_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!r.MQTT5_PUBREL_PUBCOMP_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}t("_parseConfirmation: packet.reasonCode `%d`",i.reasonCode)}else i.reasonCode=0;if(i.length>3){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(i.properties=u)}}return!0}_parseDisconnect(){let i=this.packet;if(t("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(i.reasonCode=this._parseByte(),r.MQTT5_DISCONNECT_CODES[i.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):i.reasonCode=0;let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(i.properties=u)}return t("_parseDisconnect result: true"),!0}_parseAuth(){t("_parseAuth");let i=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(i.reasonCode=this._parseByte(),!r.MQTT5_AUTH_CODES[i.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let u=this._parseProperties();return Object.getOwnPropertyNames(u).length&&(i.properties=u),t("_parseAuth: result: true"),!0}_parseMessageId(){let i=this.packet;return i.messageId=this._parseNum(),i.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(t("_parseMessageId: packet.messageId %d",i.messageId),!0)}_parseString(i){let u=this._parseNum(),d=u+this._pos;if(u===-1||d>this._list.length||d>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,d);return this._pos+=u,t("_parseString: result: %s",p),p}_parseStringPair(){return t("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let i=this._parseNum(),u=i+this._pos;if(i===-1||u>this._list.length||u>this.packet.length)return null;let d=this._list.slice(this._pos,u);return this._pos+=i,t("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let i=this._list.readUInt16BE(this._pos);return this._pos+=2,t("_parseNum: result: %s",i),i}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let i=this._list.readUInt32BE(this._pos);return this._pos+=4,t("_parse4ByteNum: result: %s",i),i}_parseVarByteNum(i){t("_parseVarByteNum");let u=4,d=0,p=1,b=0,m=!1,S,w=this._pos?this._pos:0;for(;d<u&&w+d<this._list.length;){if(S=this._list.readUInt8(w+d++),b+=p*(S&r.VARBYTEINT_MASK),p*=128,(S&r.VARBYTEINT_FIN_MASK)===0){m=!0;break}if(this._list.length<=d)break}return!m&&d===u&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=d),m?i?m={bytes:d,value:b}:m=b:m=!1,t("_parseVarByteNum: result: %o",m),m}_parseByte(){let i;return this._pos<this._list.length&&(i=this._list.readUInt8(this._pos),this._pos++),t("_parseByte: result: %o",i),i}_parseByType(i){switch(t("_parseByType: type: %s",i),i){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){t("_parseProperties");let i=this._parseVarByteNum(),u=this._pos+i,d={};for(;this._pos<u;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let b=r.propertiesCodes[p];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){d[b]||(d[b]=Object.create(null));let m=this._parseByType(r.propertiesTypes[b]);if(d[b][m.name])if(Array.isArray(d[b][m.name]))d[b][m.name].push(m.value);else{let S=d[b][m.name];d[b][m.name]=[S],d[b][m.name].push(m.value)}else d[b][m.name]=m.value;continue}d[b]?Array.isArray(d[b])?d[b].push(this._parseByType(r.propertiesTypes[b])):(d[b]=[d[b]],d[b].push(this._parseByType(r.propertiesTypes[b]))):d[b]=this._parseByType(r.propertiesTypes[b])}return d}_newPacket(){return t("_newPacket"),this.packet&&(this._list.consume(this.packet.length),t("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),t("_newPacket: new packet"),this.packet=new l,this._pos=0,!0}_emitError(i){t("_emitError",i),this.error=i,this.emit("error",i)}};a.exports=n}),zl=me((f,a)=>{he(),de(),pe();var{Buffer:o}=(Xe(),Fe(Je)),s=65536,l={},r=o.isBuffer(o.from([1,2]).subarray(0,1));function t(u){let d=o.allocUnsafe(2);return d.writeUInt8(u>>8,0),d.writeUInt8(u&255,1),d}function n(){for(let u=0;u<s;u++)l[u]=t(u)}function e(u){let d=0,p=0,b=o.allocUnsafe(4);do d=u%128|0,u=u/128|0,u>0&&(d=d|128),b.writeUInt8(d,p++);while(u>0&&p<4);return u>0&&(p=0),r?b.subarray(0,p):b.slice(0,p)}function i(u){let d=o.allocUnsafe(4);return d.writeUInt32BE(u,0),d}a.exports={cache:l,generateCache:n,generateNumber:t,genBufVariableByteInt:e,generate4ByteBuffer:i}}),Vl=me((f,a)=>{he(),de(),pe(),typeof Le>"u"||!Le.version||Le.version.indexOf("v0.")===0||Le.version.indexOf("v1.")===0&&Le.version.indexOf("v1.8.")!==0?a.exports={nextTick:o}:a.exports=Le;function o(s,l,r,t){if(typeof s!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,e,i;switch(n){case 0:case 1:return Le.nextTick(s);case 2:return Le.nextTick(function(){s.call(null,l)});case 3:return Le.nextTick(function(){s.call(null,l,r)});case 4:return Le.nextTick(function(){s.call(null,l,r,t)});default:for(e=new Array(n-1),i=0;i<e.length;)e[i++]=arguments[i];return Le.nextTick(function(){s.apply(null,e)})}}}),ra=me((f,a)=>{he(),de(),pe();var o=ta(),{Buffer:s}=(Xe(),Fe(Je)),l=s.allocUnsafe(0),r=s.from([0]),t=zl(),n=Vl().nextTick,e=mt()("mqtt-packet:writeToStream"),i=t.cache,u=t.generateNumber,d=t.generateCache,p=t.genBufVariableByteInt,b=t.generate4ByteBuffer,m=te,S=!0;function w(X,D,se){switch(e("generate called"),D.cork&&(D.cork(),n(A,D)),S&&(S=!1,d()),e("generate: packet.cmd: %s",X.cmd),X.cmd){case"connect":return g(X,D);case"connack":return _(X,D,se);case"publish":return E(X,D,se);case"puback":case"pubrec":case"pubrel":case"pubcomp":return v(X,D,se);case"subscribe":return R(X,D,se);case"suback":return P(X,D,se);case"unsubscribe":return I(X,D,se);case"unsuback":return O(X,D,se);case"pingreq":case"pingresp":return k(X,D);case"disconnect":return F(X,D,se);case"auth":return x(X,D,se);default:return D.destroy(new Error("Unknown command")),!1}}Object.defineProperty(w,"cacheNumbers",{get(){return m===te},set(X){X?((!i||Object.keys(i).length===0)&&(S=!0),m=te):(S=!1,m=Z)}});function A(X){X.uncork()}function g(X,D,se){let K=X||{},ee=K.protocolId||"MQTT",re=K.protocolVersion||4,be=K.will,ue=K.clean,N=K.keepalive||0,Q=K.clientId||"",oe=K.username,ye=K.password,ge=K.properties;ue===void 0&&(ue=!0);let we=0;if(typeof ee!="string"&&!s.isBuffer(ee))return D.destroy(new Error("Invalid protocolId")),!1;if(we+=ee.length+2,re!==3&&re!==4&&re!==5)return D.destroy(new Error("Invalid protocol version")),!1;if(we+=1,(typeof Q=="string"||s.isBuffer(Q))&&(Q||re>=4)&&(Q||ue))we+=s.byteLength(Q)+2;else{if(re<4)return D.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ue*1===0)return D.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof N!="number"||N<0||N>65535||N%1!==0)return D.destroy(new Error("Invalid keepalive")),!1;we+=2,we+=1;let J,ve;if(re===5){if(J=ie(D,ge),!J)return!1;we+=J.length}if(be){if(typeof be!="object")return D.destroy(new Error("Invalid will")),!1;if(!be.topic||typeof be.topic!="string")return D.destroy(new Error("Invalid will topic")),!1;if(we+=s.byteLength(be.topic)+2,we+=2,be.payload)if(be.payload.length>=0)typeof be.payload=="string"?we+=s.byteLength(be.payload):we+=be.payload.length;else return D.destroy(new Error("Invalid will payload")),!1;if(ve={},re===5){if(ve=ie(D,be.properties),!ve)return!1;we+=ve.length}}let Ee=!1;if(oe!=null)if(_e(oe))Ee=!0,we+=s.byteLength(oe)+2;else return D.destroy(new Error("Invalid username")),!1;if(ye!=null){if(!Ee)return D.destroy(new Error("Username is required to use password")),!1;if(_e(ye))we+=$(ye)+2;else return D.destroy(new Error("Invalid password")),!1}D.write(o.CONNECT_HEADER),V(D,we),H(D,ee),K.bridgeMode&&(re+=128),D.write(re===131?o.VERSION131:re===132?o.VERSION132:re===4?o.VERSION4:re===5?o.VERSION5:o.VERSION3);let ce=0;return ce|=oe!=null?o.USERNAME_MASK:0,ce|=ye!=null?o.PASSWORD_MASK:0,ce|=be&&be.retain?o.WILL_RETAIN_MASK:0,ce|=be&&be.qos?be.qos<<o.WILL_QOS_SHIFT:0,ce|=be?o.WILL_FLAG_MASK:0,ce|=ue?o.CLEAN_SESSION_MASK:0,D.write(s.from([ce])),m(D,N),re===5&&J.write(),H(D,Q),be&&(re===5&&ve.write(),L(D,be.topic),H(D,be.payload)),oe!=null&&H(D,oe),ye!=null&&H(D,ye),!0}function _(X,D,se){let K=se?se.protocolVersion:4,ee=X||{},re=K===5?ee.reasonCode:ee.returnCode,be=ee.properties,ue=2;if(typeof re!="number")return D.destroy(new Error("Invalid return code")),!1;let N=null;if(K===5){if(N=ie(D,be),!N)return!1;ue+=N.length}return D.write(o.CONNACK_HEADER),V(D,ue),D.write(ee.sessionPresent?o.SESSIONPRESENT_HEADER:r),D.write(s.from([re])),N==null||N.write(),!0}function E(X,D,se){e("publish: packet: %o",X);let K=se?se.protocolVersion:4,ee=X||{},re=ee.qos||0,be=ee.retain?o.RETAIN_MASK:0,ue=ee.topic,N=ee.payload||l,Q=ee.messageId,oe=ee.properties,ye=0;if(typeof ue=="string")ye+=s.byteLength(ue)+2;else if(s.isBuffer(ue))ye+=ue.length+2;else return D.destroy(new Error("Invalid topic")),!1;if(s.isBuffer(N)?ye+=N.length:ye+=s.byteLength(N),re&&typeof Q!="number")return D.destroy(new Error("Invalid messageId")),!1;re&&(ye+=2);let ge=null;if(K===5){if(ge=ie(D,oe),!ge)return!1;ye+=ge.length}return D.write(o.PUBLISH_HEADER[re][ee.dup?1:0][be?1:0]),V(D,ye),m(D,$(ue)),D.write(ue),re>0&&m(D,Q),ge==null||ge.write(),e("publish: payload: %o",N),D.write(N)}function v(X,D,se){let K=se?se.protocolVersion:4,ee=X||{},re=ee.cmd||"puback",be=ee.messageId,ue=ee.dup&&re==="pubrel"?o.DUP_MASK:0,N=0,Q=ee.reasonCode,oe=ee.properties,ye=K===5?3:2;if(re==="pubrel"&&(N=1),typeof be!="number")return D.destroy(new Error("Invalid messageId")),!1;let ge=null;if(K===5&&typeof oe=="object"){if(ge=j(D,oe,se,ye),!ge)return!1;ye+=ge.length}return D.write(o.ACKS[re][N][ue][0]),ye===3&&(ye+=Q!==0?1:-1),V(D,ye),m(D,be),K===5&&ye!==2&&D.write(s.from([Q])),ge!==null?ge.write():ye===4&&D.write(s.from([0])),!0}function R(X,D,se){e("subscribe: packet: ");let K=se?se.protocolVersion:4,ee=X||{},re=ee.dup?o.DUP_MASK:0,be=ee.messageId,ue=ee.subscriptions,N=ee.properties,Q=0;if(typeof be!="number")return D.destroy(new Error("Invalid messageId")),!1;Q+=2;let oe=null;if(K===5){if(oe=ie(D,N),!oe)return!1;Q+=oe.length}if(typeof ue=="object"&&ue.length)for(let ge=0;ge<ue.length;ge+=1){let we=ue[ge].topic,J=ue[ge].qos;if(typeof we!="string")return D.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof J!="number")return D.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(K===5){if(typeof(ue[ge].nl||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ue[ge].rap||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ve=ue[ge].rh||0;if(typeof ve!="number"||ve>2)return D.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}Q+=s.byteLength(we)+2+1}else return D.destroy(new Error("Invalid subscriptions")),!1;e("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),D.write(o.SUBSCRIBE_HEADER[1][re?1:0][0]),V(D,Q),m(D,be),oe!==null&&oe.write();let ye=!0;for(let ge of ue){let we=ge.topic,J=ge.qos,ve=+ge.nl,Ee=+ge.rap,ce=ge.rh,je;L(D,we),je=o.SUBSCRIBE_OPTIONS_QOS[J],K===5&&(je|=ve?o.SUBSCRIBE_OPTIONS_NL:0,je|=Ee?o.SUBSCRIBE_OPTIONS_RAP:0,je|=ce?o.SUBSCRIBE_OPTIONS_RH[ce]:0),ye=D.write(s.from([je]))}return ye}function P(X,D,se){let K=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,be=ee.granted,ue=ee.properties,N=0;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(N+=2,typeof be=="object"&&be.length)for(let oe=0;oe<be.length;oe+=1){if(typeof be[oe]!="number")return D.destroy(new Error("Invalid qos vector")),!1;N+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let Q=null;if(K===5){if(Q=j(D,ue,se,N),!Q)return!1;N+=Q.length}return D.write(o.SUBACK_HEADER),V(D,N),m(D,re),Q!==null&&Q.write(),D.write(s.from(be))}function I(X,D,se){let K=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,be=ee.dup?o.DUP_MASK:0,ue=ee.unsubscriptions,N=ee.properties,Q=0;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(Q+=2,typeof ue=="object"&&ue.length)for(let ge=0;ge<ue.length;ge+=1){if(typeof ue[ge]!="string")return D.destroy(new Error("Invalid unsubscriptions")),!1;Q+=s.byteLength(ue[ge])+2}else return D.destroy(new Error("Invalid unsubscriptions")),!1;let oe=null;if(K===5){if(oe=ie(D,N),!oe)return!1;Q+=oe.length}D.write(o.UNSUBSCRIBE_HEADER[1][be?1:0][0]),V(D,Q),m(D,re),oe!==null&&oe.write();let ye=!0;for(let ge=0;ge<ue.length;ge++)ye=L(D,ue[ge]);return ye}function O(X,D,se){let K=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,be=ee.dup?o.DUP_MASK:0,ue=ee.granted,N=ee.properties,Q=ee.cmd,oe=0,ye=2;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(K===5)if(typeof ue=="object"&&ue.length)for(let we=0;we<ue.length;we+=1){if(typeof ue[we]!="number")return D.destroy(new Error("Invalid qos vector")),!1;ye+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let ge=null;if(K===5){if(ge=j(D,N,se,ye),!ge)return!1;ye+=ge.length}return D.write(o.ACKS[Q][oe][be][0]),V(D,ye),m(D,re),ge!==null&&ge.write(),K===5&&D.write(s.from(ue)),!0}function k(X,D,se){return D.write(o.EMPTY[X.cmd])}function F(X,D,se){let K=se?se.protocolVersion:4,ee=X||{},re=ee.reasonCode,be=ee.properties,ue=K===5?1:0,N=null;if(K===5){if(N=j(D,be,se,ue),!N)return!1;ue+=N.length}return D.write(s.from([o.codes.disconnect<<4])),V(D,ue),K===5&&D.write(s.from([re])),N!==null&&N.write(),!0}function x(X,D,se){let K=se?se.protocolVersion:4,ee=X||{},re=ee.reasonCode,be=ee.properties,ue=K===5?1:0;K!==5&&D.destroy(new Error("Invalid mqtt version for auth packet"));let N=j(D,be,se,ue);return N?(ue+=N.length,D.write(s.from([o.codes.auth<<4])),V(D,ue),D.write(s.from([re])),N!==null&&N.write(),!0):!1}var q={};function V(X,D){if(D>o.VARBYTEINT_MAX)return X.destroy(new Error(`Invalid variable byte integer: ${D}`)),!1;let se=q[D];return se||(se=p(D),D<16384&&(q[D]=se)),e("writeVarByteInt: writing to stream: %o",se),X.write(se)}function L(X,D){let se=s.byteLength(D);return m(X,se),e("writeString: %s",D),X.write(D,"utf8")}function ae(X,D,se){L(X,D),L(X,se)}function te(X,D){return e("writeNumberCached: number: %d",D),e("writeNumberCached: %o",i[D]),X.write(i[D])}function Z(X,D){let se=u(D);return e("writeNumberGenerated: %o",se),X.write(se)}function le(X,D){let se=b(D);return e("write4ByteNumber: %o",se),X.write(se)}function H(X,D){typeof D=="string"?L(X,D):D?(m(X,D.length),X.write(D)):m(X,0)}function ie(X,D){if(typeof D!="object"||D.length!=null)return{length:1,write(){fe(X,{},0)}};let se=0;function K(ee,re){let be=o.propertiesTypes[ee],ue=0;switch(be){case"byte":{if(typeof re!="boolean")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=2;break}case"int8":{if(typeof re!="number"||re<0||re>255)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=2;break}case"binary":{if(re&&re===null)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=1+s.byteLength(re)+2;break}case"int16":{if(typeof re!="number"||re<0||re>65535)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=3;break}case"int32":{if(typeof re!="number"||re<0||re>4294967295)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=5;break}case"var":{if(typeof re!="number"||re<0||re>268435455)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=1+s.byteLength(p(re));break}case"string":{if(typeof re!="string")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=3+s.byteLength(re.toString());break}case"pair":{if(typeof re!="object")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=Object.getOwnPropertyNames(re).reduce((N,Q)=>{let oe=re[Q];return Array.isArray(oe)?N+=oe.reduce((ye,ge)=>(ye+=3+s.byteLength(Q.toString())+2+s.byteLength(ge.toString()),ye),0):N+=3+s.byteLength(Q.toString())+2+s.byteLength(re[Q].toString()),N},0);break}default:return X.destroy(new Error(`Invalid property ${ee}: ${re}`)),!1}return ue}if(D)for(let ee in D){let re=0,be=0,ue=D[ee];if(ue!==void 0){if(Array.isArray(ue))for(let N=0;N<ue.length;N++){if(be=K(ee,ue[N]),!be)return!1;re+=be}else{if(be=K(ee,ue),!be)return!1;re=be}if(!re)return!1;se+=re}}return{length:s.byteLength(p(se))+se,write(){fe(X,D,se)}}}function j(X,D,se,K){let ee=["reasonString","userProperties"],re=se&&se.properties&&se.properties.maximumPacketSize?se.properties.maximumPacketSize:0,be=ie(X,D);if(re)for(;K+be.length>re;){let ue=ee.shift();if(ue&&D[ue])delete D[ue],be=ie(X,D);else return!1}return be}function G(X,D,se){switch(o.propertiesTypes[D]){case"byte":{X.write(s.from([o.properties[D]])),X.write(s.from([+se]));break}case"int8":{X.write(s.from([o.properties[D]])),X.write(s.from([se]));break}case"binary":{X.write(s.from([o.properties[D]])),H(X,se);break}case"int16":{X.write(s.from([o.properties[D]])),m(X,se);break}case"int32":{X.write(s.from([o.properties[D]])),le(X,se);break}case"var":{X.write(s.from([o.properties[D]])),V(X,se);break}case"string":{X.write(s.from([o.properties[D]])),L(X,se);break}case"pair":{Object.getOwnPropertyNames(se).forEach(K=>{let ee=se[K];Array.isArray(ee)?ee.forEach(re=>{X.write(s.from([o.properties[D]])),ae(X,K.toString(),re.toString())}):(X.write(s.from([o.properties[D]])),ae(X,K.toString(),ee.toString()))});break}default:return X.destroy(new Error(`Invalid property ${D} value: ${se}`)),!1}}function fe(X,D,se){V(X,se);for(let K in D)if(Object.prototype.hasOwnProperty.call(D,K)&&D[K]!=null){let ee=D[K];if(Array.isArray(ee))for(let re=0;re<ee.length;re++)G(X,K,ee[re]);else G(X,K,ee)}}function $(X){return X?X instanceof s?X.length:s.byteLength(X):0}function _e(X){return typeof X=="string"||X instanceof s}a.exports=w}),Hl=me((f,a)=>{he(),de(),pe();var o=ra(),{EventEmitter:s}=(Lt(),Fe(Pt)),{Buffer:l}=(Xe(),Fe(Je));function r(n,e){let i=new t;return o(n,i,e),i.concat()}var t=class extends s{constructor(){super(),this._array=new Array(20),this._i=0}write(n){return this._array[this._i++]=n,!0}concat(){let n=0,e=new Array(this._array.length),i=this._array,u=0,d;for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?e[d]=i[d].length:e[d]=l.byteLength(i[d]),n+=e[d];let p=l.allocUnsafe(n);for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?(i[d].copy(p,u),u+=e[d]):(p.write(i[d],u),u+=e[d]);return p}destroy(n){n&&this.emit("error",n)}};a.exports=r}),Kl=me(f=>{he(),de(),pe(),f.parser=$l().parser,f.generate=Hl(),f.writeToStream=ra()}),Gl=me((f,a)=>{he(),de(),pe(),a.exports=s;function o(r){return r instanceof Lr?Lr.from(r):new r.constructor(r.buffer.slice(),r.byteOffset,r.length)}function s(r){if(r=r||{},r.circles)return l(r);let t=new Map;if(t.set(Date,d=>new Date(d)),t.set(Map,(d,p)=>new Map(e(Array.from(d),p))),t.set(Set,(d,p)=>new Set(e(Array.from(d),p))),r.constructorHandlers)for(let d of r.constructorHandlers)t.set(d[0],d[1]);let n=null;return r.proto?u:i;function e(d,p){let b=Object.keys(d),m=new Array(b.length);for(let S=0;S<b.length;S++){let w=b[S],A=d[w];typeof A!="object"||A===null?m[w]=A:A.constructor!==Object&&(n=t.get(A.constructor))?m[w]=n(A,p):ArrayBuffer.isView(A)?m[w]=o(A):m[w]=p(A)}return m}function i(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,i);if(d.constructor!==Object&&(n=t.get(d.constructor)))return n(d,i);let p={};for(let b in d){if(Object.hasOwnProperty.call(d,b)===!1)continue;let m=d[b];typeof m!="object"||m===null?p[b]=m:m.constructor!==Object&&(n=t.get(m.constructor))?p[b]=n(m,i):ArrayBuffer.isView(m)?p[b]=o(m):p[b]=i(m)}return p}function u(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,u);if(d.constructor!==Object&&(n=t.get(d.constructor)))return n(d,u);let p={};for(let b in d){let m=d[b];typeof m!="object"||m===null?p[b]=m:m.constructor!==Object&&(n=t.get(m.constructor))?p[b]=n(m,u):ArrayBuffer.isView(m)?p[b]=o(m):p[b]=u(m)}return p}}function l(r){let t=[],n=[],e=new Map;if(e.set(Date,b=>new Date(b)),e.set(Map,(b,m)=>new Map(u(Array.from(b),m))),e.set(Set,(b,m)=>new Set(u(Array.from(b),m))),r.constructorHandlers)for(let b of r.constructorHandlers)e.set(b[0],b[1]);let i=null;return r.proto?p:d;function u(b,m){let S=Object.keys(b),w=new Array(S.length);for(let A=0;A<S.length;A++){let g=S[A],_=b[g];if(typeof _!="object"||_===null)w[g]=_;else if(_.constructor!==Object&&(i=e.get(_.constructor)))w[g]=i(_,m);else if(ArrayBuffer.isView(_))w[g]=o(_);else{let E=t.indexOf(_);E!==-1?w[g]=n[E]:w[g]=m(_)}}return w}function d(b){if(typeof b!="object"||b===null)return b;if(Array.isArray(b))return u(b,d);if(b.constructor!==Object&&(i=e.get(b.constructor)))return i(b,d);let m={};t.push(b),n.push(m);for(let S in b){if(Object.hasOwnProperty.call(b,S)===!1)continue;let w=b[S];if(typeof w!="object"||w===null)m[S]=w;else if(w.constructor!==Object&&(i=e.get(w.constructor)))m[S]=i(w,d);else if(ArrayBuffer.isView(w))m[S]=o(w);else{let A=t.indexOf(w);A!==-1?m[S]=n[A]:m[S]=d(w)}}return t.pop(),n.pop(),m}function p(b){if(typeof b!="object"||b===null)return b;if(Array.isArray(b))return u(b,p);if(b.constructor!==Object&&(i=e.get(b.constructor)))return i(b,p);let m={};t.push(b),n.push(m);for(let S in b){let w=b[S];if(typeof w!="object"||w===null)m[S]=w;else if(w.constructor!==Object&&(i=e.get(w.constructor)))m[S]=i(w,p);else if(ArrayBuffer.isView(w))m[S]=o(w);else{let A=t.indexOf(w);A!==-1?m[S]=n[A]:m[S]=p(w)}}return t.pop(),n.pop(),m}}}),Ql=me((f,a)=>{he(),de(),pe(),a.exports=Gl()()}),Yl=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0}),f.validateTopic=a,f.validateTopics=o;function a(s){let l=s.split("/");for(let r=0;r<l.length;r++)if(l[r]!=="+"){if(l[r]==="#")return r===l.length-1;if(l[r].indexOf("+")!==-1||l[r].indexOf("#")!==-1)return!1}return!0}function o(s){if(s.length===0)return"empty_topic_list";for(let l=0;l<s.length;l++)if(!a(s[l]))return s[l];return null}}),na=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=Ft(),o={objectMode:!0},s={clean:!0},l=class{constructor(r){Ae(this,"options");Ae(this,"_inflights");this.options=r||{},this.options={...s,...r},this._inflights=new Map}put(r,t){return this._inflights.set(r.messageId,r),t&&t(),this}createStream(){let r=new a.Readable(o),t=[],n=!1,e=0;return this._inflights.forEach((i,u)=>{t.push(i)}),r._read=()=>{!n&&e<t.length?r.push(t[e++]):r.push(null)},r.destroy=i=>{if(!n)return n=!0,setTimeout(()=>{r.emit("close")},0),r},r}del(r,t){let n=this._inflights.get(r.messageId);return n?(this._inflights.delete(r.messageId),t(null,n)):t&&t(new Error("missing packet")),this}get(r,t){let n=this._inflights.get(r.messageId);return n?t(null,n):t&&t(new Error("missing packet")),this}close(r){this.options.clean&&(this._inflights=null),r&&r()}};f.default=l}),Jl=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=[0,16,128,131,135,144,145,151,153],o=(s,l,r)=>{s.log("handlePublish: packet %o",l),r=typeof r<"u"?r:s.noop;let t=l.topic.toString(),n=l.payload,{qos:e}=l,{messageId:i}=l,{options:u}=s;if(s.options.protocolVersion===5){let d;if(l.properties&&(d=l.properties.topicAlias),typeof d<"u")if(t.length===0)if(d>0&&d<=65535){let p=s.topicAliasRecv.getTopicByAlias(d);if(p)t=p,s.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",t,d);else{s.log("handlePublish :: unregistered topic alias. alias: %d",d),s.emit("error",new Error("Received unregistered Topic Alias"));return}}else{s.log("handlePublish :: topic alias out of range. alias: %d",d),s.emit("error",new Error("Received Topic Alias is out of range"));return}else if(s.topicAliasRecv.put(t,d))s.log("handlePublish :: registered topic: %s - alias: %d",t,d);else{s.log("handlePublish :: topic alias out of range. alias: %d",d),s.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(s.log("handlePublish: qos %d",e),e){case 2:{u.customHandleAcks(t,n,l,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return s.emit("error",d);if(a.indexOf(p)===-1)return s.emit("error",new Error("Wrong reason code for pubrec"));p?s._sendPacket({cmd:"pubrec",messageId:i,reasonCode:p},r):s.incomingStore.put(l,()=>{s._sendPacket({cmd:"pubrec",messageId:i},r)})});break}case 1:{u.customHandleAcks(t,n,l,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return s.emit("error",d);if(a.indexOf(p)===-1)return s.emit("error",new Error("Wrong reason code for puback"));p||s.emit("message",t,n,l),s.handleMessage(l,b=>{if(b)return r&&r(b);s._sendPacket({cmd:"puback",messageId:i,reasonCode:p},r)})});break}case 0:s.emit("message",t,n,l),s.handleMessage(l,r);break;default:s.log("handlePublish: unknown QoS. Doing nothing.");break}};f.default=o}),Xl=me((f,a)=>{a.exports={version:"5.14.1"}}),Kt=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0}),f.MQTTJS_VERSION=f.nextTick=f.ErrorWithSubackPacket=f.ErrorWithReasonCode=void 0,f.applyMixin=s;var a=class ia extends Error{constructor(t,n){super(t);Ae(this,"code");this.code=n,Object.setPrototypeOf(this,ia.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};f.ErrorWithReasonCode=a;var o=class oa extends Error{constructor(t,n){super(t);Ae(this,"packet");this.packet=n,Object.setPrototypeOf(this,oa.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};f.ErrorWithSubackPacket=o;function s(l,r,t=!1){let n=[r];for(;;){let e=n[0],i=Object.getPrototypeOf(e);if(i!=null&&i.prototype)n.unshift(i);else break}for(let e of n)for(let i of Object.getOwnPropertyNames(e.prototype))(t||i!=="constructor")&&Object.defineProperty(l.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)??Object.create(null))}f.nextTick=typeof(Le==null?void 0:Le.nextTick)=="function"?Le.nextTick:l=>{setTimeout(l,0)},f.MQTTJS_VERSION=Xl().version}),$r=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0}),f.ReasonCodes=void 0;var a=Kt();f.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(s,l)=>{let{messageId:r}=l,t=l.cmd,n=null,e=s.outgoing[r]?s.outgoing[r].cb:null,i=null;if(!e){s.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(s.log("_handleAck :: packet type",t),t){case"pubcomp":case"puback":{let u=l.reasonCode;u&&u>0&&u!==16?(i=new a.ErrorWithReasonCode(`Publish error: ${f.ReasonCodes[u]}`,u),s._removeOutgoingAndStoreMessage(r,()=>{e(i,l)})):s._removeOutgoingAndStoreMessage(r,e);break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:r};let u=l.reasonCode;u&&u>0&&u!==16?(i=new a.ErrorWithReasonCode(`Publish error: ${f.ReasonCodes[u]}`,u),s._removeOutgoingAndStoreMessage(r,()=>{e(i,l)})):s._sendPacket(n);break}case"suback":{delete s.outgoing[r],s.messageIdProvider.deallocate(r);let u=l.granted;for(let d=0;d<u.length;d++){let p=u[d];if(p&128){i=new Error(`Subscribe error: ${f.ReasonCodes[p]}`),i.code=p;let b=s.messageIdToTopic[r];b&&b.forEach(m=>{delete s._resubscribeTopics[m]})}}delete s.messageIdToTopic[r],s._invokeStoreProcessingQueue(),e(i,l);break}case"unsuback":{delete s.outgoing[r],s.messageIdProvider.deallocate(r),s._invokeStoreProcessingQueue(),e(null,l);break}default:s.emit("error",new Error("unrecognized packet type"))}s.disconnecting&&Object.keys(s.outgoing).length===0&&s.emit("outgoingEmpty")};f.default=o}),Zl=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=Kt(),o=$r(),s=(l,r)=>{let{options:t}=l,n=t.protocolVersion,e=n===5?r.reasonCode:r.returnCode;if(n!==5){let i=new a.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,e);l.emit("error",i);return}l.handleAuth(r,(i,u)=>{if(i){l.emit("error",i);return}if(e===24)l.reconnecting=!1,l._sendPacket(u);else{let d=new a.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[e]}`,e);l.emit("error",d)}})};f.default=s}),eu=me(f=>{var b,m,S,w,A,g,_,E,v,R,P,I,O,k,F,x,q,V,L,ae,te,Z,le,H,ie,j,G,fe,$,ai,X,D,se,K,sa,re,be,ue,It,xt,li,pr,dr,$e,ui,tr,kt,ci,je;he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0}),f.LRUCache=void 0;var a=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,s=typeof Le=="object"&&Le?Le:{},l=(c,h,y,T)=>{typeof s.emitWarning=="function"?s.emitWarning(c,h,y,T):console.error(`[${y}] ${h}: ${c}`)},r=globalThis.AbortController,t=globalThis.AbortSignal;if(typeof r>"u"){t=class{constructor(){Ae(this,"onabort");Ae(this,"_onabort",[]);Ae(this,"reason");Ae(this,"aborted",!1)}addEventListener(y,T){this._onabort.push(T)}},r=class{constructor(){Ae(this,"signal",new t);h()}abort(y){var T,M;if(!this.signal.aborted){this.signal.reason=y,this.signal.aborted=!0;for(let z of this.signal._onabort)z(y);(M=(T=this.signal).onabort)==null||M.call(T,y)}}};let c=((b=s.env)==null?void 0:b.LRU_CACHE_IGNORE_AC_WARNING)!=="1",h=()=>{c&&(c=!1,l("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",h))}}var n=c=>!o.has(c),e=c=>c&&c===Math.floor(c)&&c>0&&isFinite(c),i=c=>e(c)?c<=Math.pow(2,8)?Uint8Array:c<=Math.pow(2,16)?Uint16Array:c<=Math.pow(2,32)?Uint32Array:c<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(c){super(c),this.fill(0)}},d=(m=class{constructor(h,y){Ae(this,"heap");Ae(this,"length");if(!U(m,S))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new y(h),this.length=0}static create(h){let y=i(h);if(!y)return[];Ce(m,S,!0);let T=new m(h,y);return Ce(m,S,!1),T}push(h){this.heap[this.length++]=h}pop(){return this.heap[--this.length]}},S=new WeakMap,Ue(m,S,!1),m),p=(je=class{constructor(h){Ue(this,$);Ue(this,g);Ue(this,_);Ue(this,E);Ue(this,v);Ue(this,R);Ue(this,P);Ae(this,"ttl");Ae(this,"ttlResolution");Ae(this,"ttlAutopurge");Ae(this,"updateAgeOnGet");Ae(this,"updateAgeOnHas");Ae(this,"allowStale");Ae(this,"noDisposeOnSet");Ae(this,"noUpdateTTL");Ae(this,"maxEntrySize");Ae(this,"sizeCalculation");Ae(this,"noDeleteOnFetchRejection");Ae(this,"noDeleteOnStaleGet");Ae(this,"allowStaleOnFetchAbort");Ae(this,"allowStaleOnFetchRejection");Ae(this,"ignoreFetchAbort");Ue(this,I);Ue(this,O);Ue(this,k);Ue(this,F);Ue(this,x);Ue(this,q);Ue(this,V);Ue(this,L);Ue(this,ae);Ue(this,te);Ue(this,Z);Ue(this,le);Ue(this,H);Ue(this,ie);Ue(this,j);Ue(this,G);Ue(this,fe);Ue(this,X,()=>{});Ue(this,D,()=>{});Ue(this,se,()=>{});Ue(this,K,()=>!1);Ue(this,re,h=>{});Ue(this,be,(h,y,T)=>{});Ue(this,ue,(h,y,T,M)=>{if(T||M)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Ae(this,w,"LRUCache");let{max:y=0,ttl:T,ttlResolution:M=1,ttlAutopurge:z,updateAgeOnGet:ne,updateAgeOnHas:W,allowStale:Y,dispose:Ie,disposeAfter:ke,noDisposeOnSet:Te,noUpdateTTL:Me,maxSize:Ve=0,maxEntrySize:Ge=0,sizeCalculation:Ne,fetchMethod:We,memoMethod:Re,noDeleteOnFetchRejection:Be,noDeleteOnStaleGet:De,allowStaleOnFetchRejection:Ke,allowStaleOnFetchAbort:Ye,ignoreFetchAbort:st}=h;if(y!==0&&!e(y))throw new TypeError("max option must be a nonnegative integer");let C=y?i(y):Array;if(!C)throw new Error("invalid max value: "+y);if(Ce(this,g,y),Ce(this,_,Ve),this.maxEntrySize=Ge||U(this,_),this.sizeCalculation=Ne,this.sizeCalculation){if(!U(this,_)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Re!==void 0&&typeof Re!="function")throw new TypeError("memoMethod must be a function if defined");if(Ce(this,P,Re),We!==void 0&&typeof We!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ce(this,R,We),Ce(this,G,!!We),Ce(this,k,new Map),Ce(this,F,new Array(y).fill(void 0)),Ce(this,x,new Array(y).fill(void 0)),Ce(this,q,new C(y)),Ce(this,V,new C(y)),Ce(this,L,0),Ce(this,ae,0),Ce(this,te,d.create(y)),Ce(this,I,0),Ce(this,O,0),typeof Ie=="function"&&Ce(this,E,Ie),typeof ke=="function"?(Ce(this,v,ke),Ce(this,Z,[])):(Ce(this,v,void 0),Ce(this,Z,void 0)),Ce(this,j,!!U(this,E)),Ce(this,fe,!!U(this,v)),this.noDisposeOnSet=!!Te,this.noUpdateTTL=!!Me,this.noDeleteOnFetchRejection=!!Be,this.allowStaleOnFetchRejection=!!Ke,this.allowStaleOnFetchAbort=!!Ye,this.ignoreFetchAbort=!!st,this.maxEntrySize!==0){if(U(this,_)!==0&&!e(U(this,_)))throw new TypeError("maxSize must be a positive integer if specified");if(!e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Pe(this,$,sa).call(this)}if(this.allowStale=!!Y,this.noDeleteOnStaleGet=!!De,this.updateAgeOnGet=!!ne,this.updateAgeOnHas=!!W,this.ttlResolution=e(M)||M===0?M:1,this.ttlAutopurge=!!z,this.ttl=T||0,this.ttl){if(!e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Pe(this,$,ai).call(this)}if(U(this,g)===0&&this.ttl===0&&U(this,_)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!U(this,g)&&!U(this,_)){let B="LRU_CACHE_UNBOUNDED";n(B)&&(o.add(B),l("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",B,je))}}static unsafeExposeInternals(h){return{starts:U(h,H),ttls:U(h,ie),sizes:U(h,le),keyMap:U(h,k),keyList:U(h,F),valList:U(h,x),next:U(h,q),prev:U(h,V),get head(){return U(h,L)},get tail(){return U(h,ae)},free:U(h,te),isBackgroundFetch:y=>{var T;return Pe(T=h,$,$e).call(T,y)},backgroundFetch:(y,T,M,z)=>{var ne;return Pe(ne=h,$,dr).call(ne,y,T,M,z)},moveToTail:y=>{var T;return Pe(T=h,$,tr).call(T,y)},indexes:y=>{var T;return Pe(T=h,$,It).call(T,y)},rindexes:y=>{var T;return Pe(T=h,$,xt).call(T,y)},isStale:y=>{var T;return U(T=h,K).call(T,y)}}}get max(){return U(this,g)}get maxSize(){return U(this,_)}get calculatedSize(){return U(this,O)}get size(){return U(this,I)}get fetchMethod(){return U(this,R)}get memoMethod(){return U(this,P)}get dispose(){return U(this,E)}get disposeAfter(){return U(this,v)}getRemainingTTL(h){return U(this,k).has(h)?1/0:0}*entries(){for(let h of Pe(this,$,It).call(this))U(this,x)[h]!==void 0&&U(this,F)[h]!==void 0&&!Pe(this,$,$e).call(this,U(this,x)[h])&&(yield[U(this,F)[h],U(this,x)[h]])}*rentries(){for(let h of Pe(this,$,xt).call(this))U(this,x)[h]!==void 0&&U(this,F)[h]!==void 0&&!Pe(this,$,$e).call(this,U(this,x)[h])&&(yield[U(this,F)[h],U(this,x)[h]])}*keys(){for(let h of Pe(this,$,It).call(this)){let y=U(this,F)[h];y!==void 0&&!Pe(this,$,$e).call(this,U(this,x)[h])&&(yield y)}}*rkeys(){for(let h of Pe(this,$,xt).call(this)){let y=U(this,F)[h];y!==void 0&&!Pe(this,$,$e).call(this,U(this,x)[h])&&(yield y)}}*values(){for(let h of Pe(this,$,It).call(this))U(this,x)[h]!==void 0&&!Pe(this,$,$e).call(this,U(this,x)[h])&&(yield U(this,x)[h])}*rvalues(){for(let h of Pe(this,$,xt).call(this))U(this,x)[h]!==void 0&&!Pe(this,$,$e).call(this,U(this,x)[h])&&(yield U(this,x)[h])}[(A=Symbol.iterator,w=Symbol.toStringTag,A)](){return this.entries()}find(h,y={}){for(let T of Pe(this,$,It).call(this)){let M=U(this,x)[T],z=Pe(this,$,$e).call(this,M)?M.__staleWhileFetching:M;if(z!==void 0&&h(z,U(this,F)[T],this))return this.get(U(this,F)[T],y)}}forEach(h,y=this){for(let T of Pe(this,$,It).call(this)){let M=U(this,x)[T],z=Pe(this,$,$e).call(this,M)?M.__staleWhileFetching:M;z!==void 0&&h.call(y,z,U(this,F)[T],this)}}rforEach(h,y=this){for(let T of Pe(this,$,xt).call(this)){let M=U(this,x)[T],z=Pe(this,$,$e).call(this,M)?M.__staleWhileFetching:M;z!==void 0&&h.call(y,z,U(this,F)[T],this)}}purgeStale(){let h=!1;for(let y of Pe(this,$,xt).call(this,{allowStale:!0}))U(this,K).call(this,y)&&(Pe(this,$,kt).call(this,U(this,F)[y],"expire"),h=!0);return h}info(h){let y=U(this,k).get(h);if(y===void 0)return;let T=U(this,x)[y],M=Pe(this,$,$e).call(this,T)?T.__staleWhileFetching:T;if(M===void 0)return;let z={value:M};if(U(this,ie)&&U(this,H)){let ne=U(this,ie)[y],W=U(this,H)[y];if(ne&&W){let Y=ne-(a.now()-W);z.ttl=Y,z.start=Date.now()}}return U(this,le)&&(z.size=U(this,le)[y]),z}dump(){let h=[];for(let y of Pe(this,$,It).call(this,{allowStale:!0})){let T=U(this,F)[y],M=U(this,x)[y],z=Pe(this,$,$e).call(this,M)?M.__staleWhileFetching:M;if(z===void 0||T===void 0)continue;let ne={value:z};if(U(this,ie)&&U(this,H)){ne.ttl=U(this,ie)[y];let W=a.now()-U(this,H)[y];ne.start=Math.floor(Date.now()-W)}U(this,le)&&(ne.size=U(this,le)[y]),h.unshift([T,ne])}return h}load(h){this.clear();for(let[y,T]of h){if(T.start){let M=Date.now()-T.start;T.start=a.now()-M}this.set(y,T.value,T)}}set(h,y,T={}){var Me,Ve,Ge,Ne,We;if(y===void 0)return this.delete(h),this;let{ttl:M=this.ttl,start:z,noDisposeOnSet:ne=this.noDisposeOnSet,sizeCalculation:W=this.sizeCalculation,status:Y}=T,{noUpdateTTL:Ie=this.noUpdateTTL}=T,ke=U(this,ue).call(this,h,y,T.size||0,W);if(this.maxEntrySize&&ke>this.maxEntrySize)return Y&&(Y.set="miss",Y.maxEntrySizeExceeded=!0),Pe(this,$,kt).call(this,h,"set"),this;let Te=U(this,I)===0?void 0:U(this,k).get(h);if(Te===void 0)Te=U(this,I)===0?U(this,ae):U(this,te).length!==0?U(this,te).pop():U(this,I)===U(this,g)?Pe(this,$,pr).call(this,!1):U(this,I),U(this,F)[Te]=h,U(this,x)[Te]=y,U(this,k).set(h,Te),U(this,q)[U(this,ae)]=Te,U(this,V)[Te]=U(this,ae),Ce(this,ae,Te),lr(this,I)._++,U(this,be).call(this,Te,ke,Y),Y&&(Y.set="add"),Ie=!1;else{Pe(this,$,tr).call(this,Te);let Re=U(this,x)[Te];if(y!==Re){if(U(this,G)&&Pe(this,$,$e).call(this,Re)){Re.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Be}=Re;Be!==void 0&&!ne&&(U(this,j)&&((Me=U(this,E))==null||Me.call(this,Be,h,"set")),U(this,fe)&&((Ve=U(this,Z))==null||Ve.push([Be,h,"set"])))}else ne||(U(this,j)&&((Ge=U(this,E))==null||Ge.call(this,Re,h,"set")),U(this,fe)&&((Ne=U(this,Z))==null||Ne.push([Re,h,"set"])));if(U(this,re).call(this,Te),U(this,be).call(this,Te,ke,Y),U(this,x)[Te]=y,Y){Y.set="replace";let Be=Re&&Pe(this,$,$e).call(this,Re)?Re.__staleWhileFetching:Re;Be!==void 0&&(Y.oldValue=Be)}}else Y&&(Y.set="update")}if(M!==0&&!U(this,ie)&&Pe(this,$,ai).call(this),U(this,ie)&&(Ie||U(this,se).call(this,Te,M,z),Y&&U(this,D).call(this,Y,Te)),!ne&&U(this,fe)&&U(this,Z)){let Re=U(this,Z),Be;for(;Be=Re==null?void 0:Re.shift();)(We=U(this,v))==null||We.call(this,...Be)}return this}pop(){var h;try{for(;U(this,I);){let y=U(this,x)[U(this,L)];if(Pe(this,$,pr).call(this,!0),Pe(this,$,$e).call(this,y)){if(y.__staleWhileFetching)return y.__staleWhileFetching}else if(y!==void 0)return y}}finally{if(U(this,fe)&&U(this,Z)){let y=U(this,Z),T;for(;T=y==null?void 0:y.shift();)(h=U(this,v))==null||h.call(this,...T)}}}has(h,y={}){let{updateAgeOnHas:T=this.updateAgeOnHas,status:M}=y,z=U(this,k).get(h);if(z!==void 0){let ne=U(this,x)[z];if(Pe(this,$,$e).call(this,ne)&&ne.__staleWhileFetching===void 0)return!1;if(U(this,K).call(this,z))M&&(M.has="stale",U(this,D).call(this,M,z));else return T&&U(this,X).call(this,z),M&&(M.has="hit",U(this,D).call(this,M,z)),!0}else M&&(M.has="miss");return!1}peek(h,y={}){let{allowStale:T=this.allowStale}=y,M=U(this,k).get(h);if(M===void 0||!T&&U(this,K).call(this,M))return;let z=U(this,x)[M];return Pe(this,$,$e).call(this,z)?z.__staleWhileFetching:z}async fetch(h,y={}){let{allowStale:T=this.allowStale,updateAgeOnGet:M=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,ttl:ne=this.ttl,noDisposeOnSet:W=this.noDisposeOnSet,size:Y=0,sizeCalculation:Ie=this.sizeCalculation,noUpdateTTL:ke=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Me=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ve=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ge=this.allowStaleOnFetchAbort,context:Ne,forceRefresh:We=!1,status:Re,signal:Be}=y;if(!U(this,G))return Re&&(Re.fetch="get"),this.get(h,{allowStale:T,updateAgeOnGet:M,noDeleteOnStaleGet:z,status:Re});let De={allowStale:T,updateAgeOnGet:M,noDeleteOnStaleGet:z,ttl:ne,noDisposeOnSet:W,size:Y,sizeCalculation:Ie,noUpdateTTL:ke,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:Me,allowStaleOnFetchAbort:Ge,ignoreFetchAbort:Ve,status:Re,signal:Be},Ke=U(this,k).get(h);if(Ke===void 0){Re&&(Re.fetch="miss");let Ye=Pe(this,$,dr).call(this,h,Ke,De,Ne);return Ye.__returned=Ye}else{let Ye=U(this,x)[Ke];if(Pe(this,$,$e).call(this,Ye)){let Se=T&&Ye.__staleWhileFetching!==void 0;return Re&&(Re.fetch="inflight",Se&&(Re.returnedStale=!0)),Se?Ye.__staleWhileFetching:Ye.__returned=Ye}let st=U(this,K).call(this,Ke);if(!We&&!st)return Re&&(Re.fetch="hit"),Pe(this,$,tr).call(this,Ke),M&&U(this,X).call(this,Ke),Re&&U(this,D).call(this,Re,Ke),Ye;let C=Pe(this,$,dr).call(this,h,Ke,De,Ne),B=C.__staleWhileFetching!==void 0&&T;return Re&&(Re.fetch=st?"stale":"refresh",B&&st&&(Re.returnedStale=!0)),B?C.__staleWhileFetching:C.__returned=C}}async forceFetch(h,y={}){let T=await this.fetch(h,y);if(T===void 0)throw new Error("fetch() returned undefined");return T}memo(h,y={}){let T=U(this,P);if(!T)throw new Error("no memoMethod provided to constructor");let{context:M,forceRefresh:z,...ne}=y,W=this.get(h,ne);if(!z&&W!==void 0)return W;let Y=T(h,W,{options:ne,context:M});return this.set(h,Y,ne),Y}get(h,y={}){let{allowStale:T=this.allowStale,updateAgeOnGet:M=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,status:ne}=y,W=U(this,k).get(h);if(W!==void 0){let Y=U(this,x)[W],Ie=Pe(this,$,$e).call(this,Y);return ne&&U(this,D).call(this,ne,W),U(this,K).call(this,W)?(ne&&(ne.get="stale"),Ie?(ne&&T&&Y.__staleWhileFetching!==void 0&&(ne.returnedStale=!0),T?Y.__staleWhileFetching:void 0):(z||Pe(this,$,kt).call(this,h,"expire"),ne&&T&&(ne.returnedStale=!0),T?Y:void 0)):(ne&&(ne.get="hit"),Ie?Y.__staleWhileFetching:(Pe(this,$,tr).call(this,W),M&&U(this,X).call(this,W),Y))}else ne&&(ne.get="miss")}delete(h){return Pe(this,$,kt).call(this,h,"delete")}clear(){return Pe(this,$,ci).call(this,"delete")}},g=new WeakMap,_=new WeakMap,E=new WeakMap,v=new WeakMap,R=new WeakMap,P=new WeakMap,I=new WeakMap,O=new WeakMap,k=new WeakMap,F=new WeakMap,x=new WeakMap,q=new WeakMap,V=new WeakMap,L=new WeakMap,ae=new WeakMap,te=new WeakMap,Z=new WeakMap,le=new WeakMap,H=new WeakMap,ie=new WeakMap,j=new WeakMap,G=new WeakMap,fe=new WeakMap,$=new WeakSet,ai=function(){let h=new u(U(this,g)),y=new u(U(this,g));Ce(this,ie,h),Ce(this,H,y),Ce(this,se,(z,ne,W=a.now())=>{if(y[z]=ne!==0?W:0,h[z]=ne,ne!==0&&this.ttlAutopurge){let Y=setTimeout(()=>{U(this,K).call(this,z)&&Pe(this,$,kt).call(this,U(this,F)[z],"expire")},ne+1);Y.unref&&Y.unref()}}),Ce(this,X,z=>{y[z]=h[z]!==0?a.now():0}),Ce(this,D,(z,ne)=>{if(h[ne]){let W=h[ne],Y=y[ne];if(!W||!Y)return;z.ttl=W,z.start=Y,z.now=T||M();let Ie=z.now-Y;z.remainingTTL=W-Ie}});let T=0,M=()=>{let z=a.now();if(this.ttlResolution>0){T=z;let ne=setTimeout(()=>T=0,this.ttlResolution);ne.unref&&ne.unref()}return z};this.getRemainingTTL=z=>{let ne=U(this,k).get(z);if(ne===void 0)return 0;let W=h[ne],Y=y[ne];if(!W||!Y)return 1/0;let Ie=(T||M())-Y;return W-Ie},Ce(this,K,z=>{let ne=y[z],W=h[z];return!!W&&!!ne&&(T||M())-ne>W})},X=new WeakMap,D=new WeakMap,se=new WeakMap,K=new WeakMap,sa=function(){let h=new u(U(this,g));Ce(this,O,0),Ce(this,le,h),Ce(this,re,y=>{Ce(this,O,U(this,O)-h[y]),h[y]=0}),Ce(this,ue,(y,T,M,z)=>{if(Pe(this,$,$e).call(this,T))return 0;if(!e(M))if(z){if(typeof z!="function")throw new TypeError("sizeCalculation must be a function");if(M=z(T,y),!e(M))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return M}),Ce(this,be,(y,T,M)=>{if(h[y]=T,U(this,_)){let z=U(this,_)-h[y];for(;U(this,O)>z;)Pe(this,$,pr).call(this,!0)}Ce(this,O,U(this,O)+h[y]),M&&(M.entrySize=T,M.totalCalculatedSize=U(this,O))})},re=new WeakMap,be=new WeakMap,ue=new WeakMap,It=function*({allowStale:h=this.allowStale}={}){if(U(this,I))for(let y=U(this,ae);!(!Pe(this,$,li).call(this,y)||((h||!U(this,K).call(this,y))&&(yield y),y===U(this,L)));)y=U(this,V)[y]},xt=function*({allowStale:h=this.allowStale}={}){if(U(this,I))for(let y=U(this,L);!(!Pe(this,$,li).call(this,y)||((h||!U(this,K).call(this,y))&&(yield y),y===U(this,ae)));)y=U(this,q)[y]},li=function(h){return h!==void 0&&U(this,k).get(U(this,F)[h])===h},pr=function(h){var z,ne;let y=U(this,L),T=U(this,F)[y],M=U(this,x)[y];return U(this,G)&&Pe(this,$,$e).call(this,M)?M.__abortController.abort(new Error("evicted")):(U(this,j)||U(this,fe))&&(U(this,j)&&((z=U(this,E))==null||z.call(this,M,T,"evict")),U(this,fe)&&((ne=U(this,Z))==null||ne.push([M,T,"evict"]))),U(this,re).call(this,y),h&&(U(this,F)[y]=void 0,U(this,x)[y]=void 0,U(this,te).push(y)),U(this,I)===1?(Ce(this,L,Ce(this,ae,0)),U(this,te).length=0):Ce(this,L,U(this,q)[y]),U(this,k).delete(T),lr(this,I)._--,y},dr=function(h,y,T,M){let z=y===void 0?void 0:U(this,x)[y];if(Pe(this,$,$e).call(this,z))return z;let ne=new r,{signal:W}=T;W==null||W.addEventListener("abort",()=>ne.abort(W.reason),{signal:ne.signal});let Y={signal:ne.signal,options:T,context:M},Ie=(Ne,We=!1)=>{let{aborted:Re}=ne.signal,Be=T.ignoreFetchAbort&&Ne!==void 0;if(T.status&&(Re&&!We?(T.status.fetchAborted=!0,T.status.fetchError=ne.signal.reason,Be&&(T.status.fetchAbortIgnored=!0)):T.status.fetchResolved=!0),Re&&!Be&&!We)return Te(ne.signal.reason);let De=Ve;return U(this,x)[y]===Ve&&(Ne===void 0?De.__staleWhileFetching?U(this,x)[y]=De.__staleWhileFetching:Pe(this,$,kt).call(this,h,"fetch"):(T.status&&(T.status.fetchUpdated=!0),this.set(h,Ne,Y.options))),Ne},ke=Ne=>(T.status&&(T.status.fetchRejected=!0,T.status.fetchError=Ne),Te(Ne)),Te=Ne=>{let{aborted:We}=ne.signal,Re=We&&T.allowStaleOnFetchAbort,Be=Re||T.allowStaleOnFetchRejection,De=Be||T.noDeleteOnFetchRejection,Ke=Ve;if(U(this,x)[y]===Ve&&(!De||Ke.__staleWhileFetching===void 0?Pe(this,$,kt).call(this,h,"fetch"):Re||(U(this,x)[y]=Ke.__staleWhileFetching)),Be)return T.status&&Ke.__staleWhileFetching!==void 0&&(T.status.returnedStale=!0),Ke.__staleWhileFetching;if(Ke.__returned===Ke)throw Ne},Me=(Ne,We)=>{var Be;let Re=(Be=U(this,R))==null?void 0:Be.call(this,h,z,Y);Re&&Re instanceof Promise&&Re.then(De=>Ne(De===void 0?void 0:De),We),ne.signal.addEventListener("abort",()=>{(!T.ignoreFetchAbort||T.allowStaleOnFetchAbort)&&(Ne(void 0),T.allowStaleOnFetchAbort&&(Ne=De=>Ie(De,!0)))})};T.status&&(T.status.fetchDispatched=!0);let Ve=new Promise(Me).then(Ie,ke),Ge=Object.assign(Ve,{__abortController:ne,__staleWhileFetching:z,__returned:void 0});return y===void 0?(this.set(h,Ge,{...Y.options,status:void 0}),y=U(this,k).get(h)):U(this,x)[y]=Ge,Ge},$e=function(h){if(!U(this,G))return!1;let y=h;return!!y&&y instanceof Promise&&y.hasOwnProperty("__staleWhileFetching")&&y.__abortController instanceof r},ui=function(h,y){U(this,V)[y]=h,U(this,q)[h]=y},tr=function(h){h!==U(this,ae)&&(h===U(this,L)?Ce(this,L,U(this,q)[h]):Pe(this,$,ui).call(this,U(this,V)[h],U(this,q)[h]),Pe(this,$,ui).call(this,U(this,ae),h),Ce(this,ae,h))},kt=function(h,y){var M,z,ne,W;let T=!1;if(U(this,I)!==0){let Y=U(this,k).get(h);if(Y!==void 0)if(T=!0,U(this,I)===1)Pe(this,$,ci).call(this,y);else{U(this,re).call(this,Y);let Ie=U(this,x)[Y];if(Pe(this,$,$e).call(this,Ie)?Ie.__abortController.abort(new Error("deleted")):(U(this,j)||U(this,fe))&&(U(this,j)&&((M=U(this,E))==null||M.call(this,Ie,h,y)),U(this,fe)&&((z=U(this,Z))==null||z.push([Ie,h,y]))),U(this,k).delete(h),U(this,F)[Y]=void 0,U(this,x)[Y]=void 0,Y===U(this,ae))Ce(this,ae,U(this,V)[Y]);else if(Y===U(this,L))Ce(this,L,U(this,q)[Y]);else{let ke=U(this,V)[Y];U(this,q)[ke]=U(this,q)[Y];let Te=U(this,q)[Y];U(this,V)[Te]=U(this,V)[Y]}lr(this,I)._--,U(this,te).push(Y)}}if(U(this,fe)&&((ne=U(this,Z))!=null&&ne.length)){let Y=U(this,Z),Ie;for(;Ie=Y==null?void 0:Y.shift();)(W=U(this,v))==null||W.call(this,...Ie)}return T},ci=function(h){var y,T,M;for(let z of Pe(this,$,xt).call(this,{allowStale:!0})){let ne=U(this,x)[z];if(Pe(this,$,$e).call(this,ne))ne.__abortController.abort(new Error("deleted"));else{let W=U(this,F)[z];U(this,j)&&((y=U(this,E))==null||y.call(this,ne,W,h)),U(this,fe)&&((T=U(this,Z))==null||T.push([ne,W,h]))}}if(U(this,k).clear(),U(this,x).fill(void 0),U(this,F).fill(void 0),U(this,ie)&&U(this,H)&&(U(this,ie).fill(0),U(this,H).fill(0)),U(this,le)&&U(this,le).fill(0),Ce(this,L,0),Ce(this,ae,0),U(this,te).length=0,Ce(this,O,0),Ce(this,I,0),U(this,fe)&&U(this,Z)){let z=U(this,Z),ne;for(;ne=z==null?void 0:z.shift();)(M=U(this,v))==null||M.call(this,...ne)}},je);f.LRUCache=p}),wt=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.ContainerIterator=f.Container=f.Base=void 0;var a=class{constructor(l=0){this.iteratorType=l}equals(l){return this.o===l.o}};f.ContainerIterator=a;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};f.Base=o;var s=class extends o{};f.Container=s}),tu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=wt(),o=class extends a.Base{constructor(l=[]){super(),this.S=[];let r=this;l.forEach(function(t){r.push(t)})}clear(){this.i=0,this.S=[]}push(l){return this.S.push(l),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},s=o;f.default=s}),ru=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=wt(),o=class extends a.Base{constructor(l=[]){super(),this.j=0,this.q=[];let r=this;l.forEach(function(t){r.push(t)})}clear(){this.q=[],this.i=this.j=0}push(l){let r=this.q.length;if(this.j/r>.5&&this.j+this.i>=r&&r>4096){let t=this.i;for(let n=0;n<t;++n)this.q[n]=this.q[this.j+n];this.j=0,this.q[this.i]=l}else this.q[this.j+this.i]=l;return++this.i}pop(){if(this.i===0)return;let l=this.q[this.j++];return this.i-=1,l}front(){if(this.i!==0)return this.q[this.j]}},s=o;f.default=s}),nu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=wt(),o=class extends a.Base{constructor(l=[],r=function(n,e){return n>e?-1:n<e?1:0},t=!0){if(super(),this.v=r,Array.isArray(l))this.C=t?[...l]:l;else{this.C=[];let e=this;l.forEach(function(i){e.C.push(i)})}this.i=this.C.length;let n=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,n)}m(l){let r=this.C[l];for(;l>0;){let t=l-1>>1,n=this.C[t];if(this.v(n,r)<=0)break;this.C[l]=n,l=t}this.C[l]=r}k(l,r){let t=this.C[l];for(;l<r;){let n=l<<1|1,e=n+1,i=this.C[n];if(e<this.i&&this.v(i,this.C[e])>0&&(n=e,i=this.C[e]),this.v(i,t)>=0)break;this.C[l]=i,l=n}this.C[l]=t}clear(){this.i=0,this.C.length=0}push(l){this.C.push(l),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let l=this.C[0],r=this.C.pop();return this.i-=1,this.i&&(this.C[0]=r,this.k(0,this.i>>1)),l}top(){return this.C[0]}find(l){return this.C.indexOf(l)>=0}remove(l){let r=this.C.indexOf(l);return r<0?!1:(r===0?this.pop():r===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(r,1,this.C.pop()),this.i-=1,this.m(r),this.k(r,this.i>>1)),!0)}updateItem(l){let r=this.C.indexOf(l);return r<0?!1:(this.m(r),this.k(r,this.i>>1),!0)}toArray(){return[...this.C]}},s=o;f.default=s}),so=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=wt(),o=class extends a.Container{},s=o;f.default=s}),_t=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.throwIteratorAccessError=a;function a(){throw new RangeError("Iterator access denied!")}}),aa=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.RandomIterator=void 0;var a=wt(),o=_t(),s=class extends a.ContainerIterator{constructor(l,r){super(r),this.o=l,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(l){this.container.setElementByPos(this.o,l)}};f.RandomIterator=s}),iu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=s(so()),o=aa();function s(n){return n&&n.t?n:{default:n}}var l=class la extends o.RandomIterator{constructor(e,i,u){super(e,u),this.container=i}copy(){return new la(this.o,this.container,this.iteratorType)}},r=class extends a.default{constructor(n=[],e=!0){if(super(),Array.isArray(n))this.J=e?[...n]:n,this.i=n.length;else{this.J=[];let i=this;n.forEach(function(u){i.pushBack(u)})}}clear(){this.i=0,this.J.length=0}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J[n]}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;return this.J.splice(n,1),this.i-=1,this.i}eraseElementByValue(n){let e=0;for(let i=0;i<this.i;++i)this.J[i]!==n&&(this.J[e++]=this.J[i]);return this.i=this.J.length=e,this.i}eraseElementByIterator(n){let e=n.o;return n=n.next(),this.eraseElementByPos(e),n}pushBack(n){return this.J.push(n),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(n,e){if(n<0||n>this.i-1)throw new RangeError;this.J[n]=e}insert(n,e,i=1){if(n<0||n>this.i)throw new RangeError;return this.J.splice(n,0,...new Array(i).fill(e)),this.i+=i,this.i}find(n){for(let e=0;e<this.i;++e)if(this.J[e]===n)return new l(e,this);return this.end()}reverse(){this.J.reverse()}unique(){let n=1;for(let e=1;e<this.i;++e)this.J[e]!==this.J[e-1]&&(this.J[n++]=this.J[e]);return this.i=this.J.length=n,this.i}sort(n){this.J.sort(n)}forEach(n){for(let e=0;e<this.i;++e)n(this.J[e],e,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},t=r;f.default=t}),ou=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=l(so()),o=wt(),s=_t();function l(e){return e&&e.t?e:{default:e}}var r=class ua extends o.ContainerIterator{constructor(i,u,d,p){super(p),this.o=i,this.h=u,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.l}set pointer(i){this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.l=i}copy(){return new ua(this.o,this.h,this.container,this.iteratorType)}},t=class extends a.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let i=this;e.forEach(function(u){i.pushBack(u)})}V(e){let{L:i,B:u}=e;i.B=u,u.L=i,e===this.p&&(this.p=u),e===this._&&(this._=i),this.i-=1}G(e,i){let u=i.B,d={l:e,L:i,B:u};i.B=d,u.L=d,i===this.h&&(this.p=d),u===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return i.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return this.V(i),this.i}eraseElementByValue(e){let i=this.p;for(;i!==this.h;)i.l===e&&this.V(i),i=i.B;return this.i}eraseElementByIterator(e){let i=e.o;return i===this.h&&(0,s.throwIteratorAccessError)(),e=e.next(),this.V(i),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(this.i===0)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(this.i===0)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,i){if(e<0||e>this.i-1)throw new RangeError;let u=this.p;for(;e--;)u=u.B;u.l=i}insert(e,i,u=1){if(e<0||e>this.i)throw new RangeError;if(u<=0)return this.i;if(e===0)for(;u--;)this.pushFront(i);else if(e===this.i)for(;u--;)this.pushBack(i);else{let d=this.p;for(let b=1;b<e;++b)d=d.B;let p=d.B;for(this.i+=u;u--;)d.B={l:i,L:d},d.B.L=d,d=d.B;d.B=p,p.L=d}return this.i}find(e){let i=this.p;for(;i!==this.h;){if(i.l===e)return new r(i,this.h,this);i=i.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,i=this._,u=0;for(;u<<1<this.i;){let d=e.l;e.l=i.l,i.l=d,e=e.B,i=i.L,u+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let i=e;for(;i.B!==this.h&&i.l===i.B.l;)i=i.B,this.i-=1;e.B=i.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let i=[];this.forEach(function(d){i.push(d)}),i.sort(e);let u=this.p;i.forEach(function(d){u.l=d,u=u.B})}merge(e){let i=this;if(this.i===0)e.forEach(function(u){i.pushBack(u)});else{let u=this.p;e.forEach(function(d){for(;u!==i.h&&u.l<=d;)u=u.B;i.G(d,u.L)})}return this.i}forEach(e){let i=this.p,u=0;for(;i!==this.h;)e(i.l,u++,this),i=i.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}).bind(this)()}},n=t;f.default=n}),su=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=s(so()),o=aa();function s(n){return n&&n.t?n:{default:n}}var l=class ca extends o.RandomIterator{constructor(e,i,u){super(e,u),this.container=i}copy(){return new ca(this.o,this.container,this.iteratorType)}},r=class extends a.default{constructor(n=[],e=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let i=(()=>{if(typeof n.length=="number")return n.length;if(typeof n.size=="number")return n.size;if(typeof n.size=="function")return n.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=e,this.P=Math.max(Math.ceil(i/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let u=Math.ceil(i/this.F);this.j=this.R=(this.P>>1)-(u>>1),this.D=this.N=this.F-i%this.F>>1;let d=this;n.forEach(function(p){d.pushBack(p)})}T(){let n=[],e=Math.max(this.P>>1,1);for(let i=0;i<e;++i)n[i]=new Array(this.F);for(let i=this.j;i<this.P;++i)n[n.length]=this.A[i];for(let i=0;i<this.R;++i)n[n.length]=this.A[i];n[n.length]=[...this.A[this.R]],this.j=e,this.R=n.length-1;for(let i=0;i<e;++i)n[n.length]=new Array(this.F);this.A=n,this.P=n.length}O(n){let e=this.D+n+1,i=e%this.F,u=i-1,d=this.j+(e-i)/this.F;return i===0&&(d-=1),d%=this.P,u<0&&(u+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:u}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new l(0,this)}end(){return new l(this.i,this)}rBegin(){return new l(this.i-1,this,1)}rEnd(){return new l(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(n){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=n,this.i}popBack(){if(this.i===0)return;let n=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,n}pushFront(n){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=n,this.i}popFront(){if(this.i===0)return;let n=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,n}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(n);return this.A[e][i]}setElementByPos(n,e){if(n<0||n>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:u}=this.O(n);this.A[i][u]=e}insert(n,e,i=1){if(n<0||n>this.i)throw new RangeError;if(n===0)for(;i--;)this.pushFront(e);else if(n===this.i)for(;i--;)this.pushBack(e);else{let u=[];for(let d=n;d<this.i;++d)u.push(this.getElementByPos(d));this.cut(n-1);for(let d=0;d<i;++d)this.pushBack(e);for(let d=0;d<u.length;++d)this.pushBack(u[d])}return this.i}cut(n){if(n<0)return this.clear(),0;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(n);return this.R=e,this.N=i,this.i=n+1,this.i}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;if(n===0)this.popFront();else if(n===this.i-1)this.popBack();else{let e=[];for(let u=n+1;u<this.i;++u)e.push(this.getElementByPos(u));this.cut(n),this.popBack();let i=this;e.forEach(function(u){i.pushBack(u)})}return this.i}eraseElementByValue(n){if(this.i===0)return 0;let e=[];for(let u=0;u<this.i;++u){let d=this.getElementByPos(u);d!==n&&e.push(d)}let i=e.length;for(let u=0;u<i;++u)this.setElementByPos(u,e[u]);return this.cut(i-1)}eraseElementByIterator(n){let e=n.o;return this.eraseElementByPos(e),n=n.next(),n}find(n){for(let e=0;e<this.i;++e)if(this.getElementByPos(e)===n)return new l(e,this);return this.end()}reverse(){let n=0,e=this.i-1;for(;n<e;){let i=this.getElementByPos(n);this.setElementByPos(n,this.getElementByPos(e)),this.setElementByPos(e,i),n+=1,e-=1}}unique(){if(this.i<=1)return this.i;let n=1,e=this.getElementByPos(0);for(let i=1;i<this.i;++i){let u=this.getElementByPos(i);u!==e&&(e=u,this.setElementByPos(n++,u))}for(;this.i>n;)this.popBack();return this.i}sort(n){let e=[];for(let i=0;i<this.i;++i)e.push(this.getElementByPos(i));e.sort(n);for(let i=0;i<this.i;++i)this.setElementByPos(i,e[i])}shrinkToFit(){if(this.i===0)return;let n=[];this.forEach(function(e){n.push(e)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let e=0;e<n.length;++e)this.pushBack(n[e])}forEach(n){for(let e=0;e<this.i;++e)n(this.getElementByPos(e),e,this)}[Symbol.iterator](){return(function*(){for(let n=0;n<this.i;++n)yield this.getElementByPos(n)}).bind(this)()}},t=r;f.default=t}),au=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.TreeNodeEnableIndex=f.TreeNode=void 0;var a=class{constructor(s,l){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=s,this.l=l}L(){let s=this;if(s.ee===1&&s.tt.tt===s)s=s.W;else if(s.U)for(s=s.U;s.W;)s=s.W;else{let l=s.tt;for(;l.U===s;)s=l,l=s.tt;s=l}return s}B(){let s=this;if(s.W){for(s=s.W;s.U;)s=s.U;return s}else{let l=s.tt;for(;l.W===s;)s=l,l=s.tt;return s.W!==l?l:s}}te(){let s=this.tt,l=this.W,r=l.U;return s.tt===this?s.tt=l:s.U===this?s.U=l:s.W=l,l.tt=s,l.U=this,this.tt=l,this.W=r,r&&(r.tt=this),l}se(){let s=this.tt,l=this.U,r=l.W;return s.tt===this?s.tt=l:s.U===this?s.U=l:s.W=l,l.tt=s,l.W=this,this.tt=l,this.U=r,r&&(r.tt=this),l}};f.TreeNode=a;var o=class extends a{constructor(){super(...arguments),this.rt=1}te(){let s=super.te();return this.ie(),s.ie(),s}se(){let s=super.se();return this.ie(),s.ie(),s}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};f.TreeNodeEnableIndex=o}),fa=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=au(),o=wt(),s=_t(),l=class extends o.Container{constructor(t=function(e,i){return e<i?-1:e>i?1:0},n=!1){super(),this.Y=void 0,this.v=t,n?(this.re=a.TreeNodeEnableIndex,this.M=function(e,i,u){let d=this.ne(e,i,u);if(d){let p=d.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let b=this.he(d);if(b){let{parentNode:m,grandParent:S,curNode:w}=b;m.ie(),S.ie(),w.ie()}}return this.i},this.V=function(e){let i=this.fe(e);for(;i!==this.h;)i.rt-=1,i=i.tt}):(this.re=a.TreeNode,this.M=function(e,i,u){let d=this.ne(e,i,u);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(t,n){let e=this.h;for(;t;){let i=this.v(t.u,n);if(i<0)t=t.W;else if(i>0)e=t,t=t.U;else return t}return e}Z(t,n){let e=this.h;for(;t;)this.v(t.u,n)<=0?t=t.W:(e=t,t=t.U);return e}$(t,n){let e=this.h;for(;t;){let i=this.v(t.u,n);if(i<0)e=t,t=t.W;else if(i>0)t=t.U;else return t}return e}rr(t,n){let e=this.h;for(;t;)this.v(t.u,n)<0?(e=t,t=t.W):t=t.U;return e}ue(t){for(;;){let n=t.tt;if(n===this.h)return;if(t.ee===1){t.ee=0;return}if(t===n.U){let e=n.W;if(e.ee===1)e.ee=0,n.ee=1,n===this.Y?this.Y=n.te():n.te();else if(e.W&&e.W.ee===1){e.ee=n.ee,n.ee=0,e.W.ee=0,n===this.Y?this.Y=n.te():n.te();return}else e.U&&e.U.ee===1?(e.ee=1,e.U.ee=0,e.se()):(e.ee=1,t=n)}else{let e=n.U;if(e.ee===1)e.ee=0,n.ee=1,n===this.Y?this.Y=n.se():n.se();else if(e.U&&e.U.ee===1){e.ee=n.ee,n.ee=0,e.U.ee=0,n===this.Y?this.Y=n.se():n.se();return}else e.W&&e.W.ee===1?(e.ee=1,e.W.ee=0,e.te()):(e.ee=1,t=n)}}}fe(t){if(this.i===1)return this.clear(),this.h;let n=t;for(;n.U||n.W;){if(n.W)for(n=n.W;n.U;)n=n.U;else n=n.U;[t.u,n.u]=[n.u,t.u],[t.l,n.l]=[n.l,t.l],t=n}this.h.U===n?this.h.U=n.tt:this.h.W===n&&(this.h.W=n.tt),this.ue(n);let e=n.tt;return n===e.U?e.U=void 0:e.W=void 0,this.i-=1,this.Y.ee=0,e}oe(t,n){return t===void 0?!1:this.oe(t.U,n)||n(t)?!0:this.oe(t.W,n)}he(t){for(;;){let n=t.tt;if(n.ee===0)return;let e=n.tt;if(n===e.U){let i=e.W;if(i&&i.ee===1){if(i.ee=n.ee=0,e===this.Y)return;e.ee=1,t=e;continue}else if(t===n.W){if(t.ee=0,t.U&&(t.U.tt=n),t.W&&(t.W.tt=e),n.W=t.U,e.U=t.W,t.U=n,t.W=e,e===this.Y)this.Y=t,this.h.tt=t;else{let u=e.tt;u.U===e?u.U=t:u.W=t}return t.tt=e.tt,n.tt=t,e.tt=t,e.ee=1,{parentNode:n,grandParent:e,curNode:t}}else n.ee=0,e===this.Y?this.Y=e.se():e.se(),e.ee=1}else{let i=e.U;if(i&&i.ee===1){if(i.ee=n.ee=0,e===this.Y)return;e.ee=1,t=e;continue}else if(t===n.U){if(t.ee=0,t.U&&(t.U.tt=e),t.W&&(t.W.tt=n),e.W=t.U,n.U=t.W,t.U=e,t.W=n,e===this.Y)this.Y=t,this.h.tt=t;else{let u=e.tt;u.U===e?u.U=t:u.W=t}return t.tt=e.tt,n.tt=t,e.tt=t,e.ee=1,{parentNode:n,grandParent:e,curNode:t}}else n.ee=0,e===this.Y?this.Y=e.te():e.te(),e.ee=1}return}}ne(t,n,e){if(this.Y===void 0){this.i+=1,this.Y=new this.re(t,n),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let i,u=this.h.U,d=this.v(u.u,t);if(d===0){u.l=n;return}else if(d>0)u.U=new this.re(t,n),u.U.tt=u,i=u.U,this.h.U=i;else{let p=this.h.W,b=this.v(p.u,t);if(b===0){p.l=n;return}else if(b<0)p.W=new this.re(t,n),p.W.tt=p,i=p.W,this.h.W=i;else{if(e!==void 0){let m=e.o;if(m!==this.h){let S=this.v(m.u,t);if(S===0){m.l=n;return}else if(S>0){let w=m.L(),A=this.v(w.u,t);if(A===0){w.l=n;return}else A<0&&(i=new this.re(t,n),w.W===void 0?(w.W=i,i.tt=w):(m.U=i,i.tt=m))}}}if(i===void 0)for(i=this.Y;;){let m=this.v(i.u,t);if(m>0){if(i.U===void 0){i.U=new this.re(t,n),i.U.tt=i,i=i.U;break}i=i.U}else if(m<0){if(i.W===void 0){i.W=new this.re(t,n),i.W.tt=i,i=i.W;break}i=i.W}else{i.l=n;return}}}}return this.i+=1,i}I(t,n){for(;t;){let e=this.v(t.u,n);if(e<0)t=t.W;else if(e>0)t=t.U;else return t}return t||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(t,n){let e=t.o;if(e===this.h&&(0,s.throwIteratorAccessError)(),this.i===1)return e.u=n,!0;if(e===this.h.U)return this.v(e.B().u,n)>0?(e.u=n,!0):!1;if(e===this.h.W)return this.v(e.L().u,n)<0?(e.u=n,!0):!1;let i=e.L().u;if(this.v(i,n)>=0)return!1;let u=e.B().u;return this.v(u,n)<=0?!1:(e.u=n,!0)}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=0,e=this;return this.oe(this.Y,function(i){return t===n?(e.V(i),!0):(n+=1,!1)}),this.i}eraseElementByKey(t){if(this.i===0)return!1;let n=this.I(this.Y,t);return n===this.h?!1:(this.V(n),!0)}eraseElementByIterator(t){let n=t.o;n===this.h&&(0,s.throwIteratorAccessError)();let e=n.W===void 0;return t.iteratorType===0?e&&t.next():(!e||n.U===void 0)&&t.next(),this.V(n),t}forEach(t){let n=0;for(let e of this)t(e,n++,this)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n,e=0;for(let i of this){if(e===t){n=i;break}e+=1}return n}getHeight(){if(this.i===0)return 0;let t=function(n){return n?Math.max(t(n.U),t(n.W))+1:0};return t(this.Y)}},r=l;f.default=r}),ha=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=wt(),o=_t(),s=class extends a.ContainerIterator{constructor(r,t,n){super(n),this.o=r,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let r=this.o,t=this.h.tt;if(r===this.h)return t?t.rt-1:0;let n=0;for(r.U&&(n+=r.U.rt);r!==t;){let e=r.tt;r===e.W&&(n+=1,e.U&&(n+=e.U.rt)),r=e}return n}},l=s;f.default=l}),lu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=l(fa()),o=l(ha()),s=_t();function l(e){return e&&e.t?e:{default:e}}var r=class pa extends o.default{constructor(i,u,d,p){super(i,u,p),this.container=d}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.u}copy(){return new pa(this.o,this.h,this.container,this.iteratorType)}},t=class extends a.default{constructor(e=[],i,u){super(i,u);let d=this;e.forEach(function(p){d.insert(p)})}*K(e){e!==void 0&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,i){return this.M(e,void 0,i)}find(e){let i=this.I(this.Y,e);return new r(i,this.h,this)}lowerBound(e){let i=this.X(this.Y,e);return new r(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new r(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new r(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new r(i,this.h,this)}union(e){let i=this;return e.forEach(function(u){i.insert(u)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=t;f.default=n}),uu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=l(fa()),o=l(ha()),s=_t();function l(e){return e&&e.t?e:{default:e}}var r=class da extends o.default{constructor(i,u,d,p){super(i,u,p),this.container=d}get pointer(){this.o===this.h&&(0,s.throwIteratorAccessError)();let i=this;return new Proxy([],{get(u,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(u,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new da(this.o,this.h,this.container,this.iteratorType)}},t=class extends a.default{constructor(e=[],i,u){super(i,u);let d=this;e.forEach(function(p){d.setElement(p[0],p[1])})}*K(e){e!==void 0&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i===0)return;let e=this.h.U;return[e.u,e.l]}back(){if(this.i===0)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let i=this.X(this.Y,e);return new r(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new r(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new r(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new r(i,this.h,this)}setElement(e,i,u){return this.M(e,i,u)}find(e){let i=this.I(this.Y,e);return new r(i,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let i=this;return e.forEach(function(u){i.setElement(u[0],u[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},n=t;f.default=n}),ga=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=a;function a(o){let s=typeof o;return s==="object"&&o!==null||s==="function"}}),ya=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.HashContainerIterator=f.HashContainer=void 0;var a=wt(),o=l(ga()),s=_t();function l(n){return n&&n.t?n:{default:n}}var r=class extends a.ContainerIterator{constructor(n,e,i){super(i),this.o=n,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this})}};f.HashContainerIterator=r;var t=class extends a.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(n){let{L:e,B:i}=n;e.B=i,i.L=e,n===this.p&&(this.p=i),n===this._&&(this._=e),this.i-=1}M(n,e,i){i===void 0&&(i=(0,o.default)(n));let u;if(i){let d=n[this.HASH_TAG];if(d!==void 0)return this.H[d].l=e,this.i;Object.defineProperty(n,this.HASH_TAG,{value:this.H.length,configurable:!0}),u={u:n,l:e,L:this._,B:this.h},this.H.push(u)}else{let d=this.g[n];if(d)return d.l=e,this.i;u={u:n,l:e,L:this._,B:this.h},this.g[n]=u}return this.i===0?(this.p=u,this.h.B=u):this._.B=u,this._=u,this.h.L=u,++this.i}I(n,e){if(e===void 0&&(e=(0,o.default)(n)),e){let i=n[this.HASH_TAG];return i===void 0?this.h:this.H[i]}else return this.g[n]||this.h}clear(){let n=this.HASH_TAG;this.H.forEach(function(e){delete e.u[n]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(n,e){let i;if(e===void 0&&(e=(0,o.default)(n)),e){let u=n[this.HASH_TAG];if(u===void 0)return!1;delete n[this.HASH_TAG],i=this.H[u],delete this.H[u]}else{if(i=this.g[n],i===void 0)return!1;delete this.g[n]}return this.V(i),!0}eraseElementByIterator(n){let e=n.o;return e===this.h&&(0,s.throwIteratorAccessError)(),this.V(e),n.next()}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let e=this.p;for(;n--;)e=e.B;return this.V(e),this.i}};f.HashContainer=t}),cu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=ya(),o=_t(),s=class ba extends a.HashContainerIterator{constructor(n,e,i,u){super(n,e,u),this.container=i}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new ba(this.o,this.h,this.container,this.iteratorType)}},l=class extends a.HashContainer{constructor(t=[]){super();let n=this;t.forEach(function(e){n.insert(e)})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(t,n){return this.M(t,void 0,n)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return n.u}find(t,n){let e=this.I(t,n);return new s(e,this.h,this)}forEach(t){let n=0,e=this.p;for(;e!==this.h;)t(e.u,n++,this),e=e.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield t.u,t=t.B}).bind(this)()}},r=l;f.default=r}),fu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var a=ya(),o=l(ga()),s=_t();function l(e){return e&&e.t?e:{default:e}}var r=class ma extends a.HashContainerIterator{constructor(i,u,d,p){super(i,u,p),this.container=d}get pointer(){this.o===this.h&&(0,s.throwIteratorAccessError)();let i=this;return new Proxy([],{get(u,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(u,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new ma(this.o,this.h,this.container,this.iteratorType)}},t=class extends a.HashContainer{constructor(e=[]){super();let i=this;e.forEach(function(u){i.setElement(u[0],u[1])})}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(e,i,u){return this.M(e,i,u)}getElementByKey(e,i){if(i===void 0&&(i=(0,o.default)(e)),i){let d=e[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let u=this.g[e];return u?u.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return[i.u,i.l]}find(e,i){let u=this.I(e,i);return new r(u,this.h,this)}forEach(e){let i=0,u=this.p;for(;u!==this.h;)e([u.u,u.l],i++,this),u=u.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}).bind(this)()}},n=t;f.default=n}),hu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"t",{value:!0}),Object.defineProperty(f,"Deque",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(f,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(f,"HashSet",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(f,"LinkList",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(f,"OrderedMap",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(f,"OrderedSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(f,"PriorityQueue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(f,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(f,"Stack",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(f,"Vector",{enumerable:!0,get:function(){return l.default}});var a=d(tu()),o=d(ru()),s=d(nu()),l=d(iu()),r=d(ou()),t=d(su()),n=d(lu()),e=d(uu()),i=d(cu()),u=d(fu());function d(p){return p&&p.t?p:{default:p}}}),pu=me((f,a)=>{he(),de(),pe();var o=hu().OrderedSet,s=mt()("number-allocator:trace"),l=mt()("number-allocator:error");function r(n,e){this.low=n,this.high=e}r.prototype.equals=function(n){return this.low===n.low&&this.high===n.high},r.prototype.compare=function(n){return this.low<n.low&&this.high<n.low?-1:n.low<this.low&&n.high<this.low?1:0};function t(n,e){if(!(this instanceof t))return new t(n,e);this.min=n,this.max=e,this.ss=new o([],(i,u)=>i.compare(u)),s("Create"),this.clear()}t.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},t.prototype.alloc=function(){if(this.ss.size()===0)return s("alloc():empty"),null;let n=this.ss.begin(),e=n.pointer.low,i=n.pointer.high,u=e;return u+1<=i?this.ss.updateKeyByIterator(n,new r(e+1,i)):this.ss.eraseElementByPos(0),s("alloc():"+u),u},t.prototype.use=function(n){let e=new r(n,n),i=this.ss.lowerBound(e);if(!i.equals(this.ss.end())){let u=i.pointer.low,d=i.pointer.high;return i.pointer.equals(e)?(this.ss.eraseElementByIterator(i),s("use():"+n),!0):u>n?!1:u===n?(this.ss.updateKeyByIterator(i,new r(u+1,d)),s("use():"+n),!0):d===n?(this.ss.updateKeyByIterator(i,new r(u,d-1)),s("use():"+n),!0):(this.ss.updateKeyByIterator(i,new r(n+1,d)),this.ss.insert(new r(u,n-1)),s("use():"+n),!0)}return s("use():failed"),!1},t.prototype.free=function(n){if(n<this.min||n>this.max){l("free():"+n+" is out of range");return}let e=new r(n,n),i=this.ss.upperBound(e);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin())){this.ss.insert(e);return}i.pre();let u=i.pointer.high;i.pointer.high+1===n?this.ss.updateKeyByIterator(i,new r(u,n)):this.ss.insert(e)}else if(i.equals(this.ss.begin()))if(n+1===i.pointer.low){let u=i.pointer.high;this.ss.updateKeyByIterator(i,new r(n,u))}else this.ss.insert(e);else{let u=i.pointer.low,d=i.pointer.high;i.pre();let p=i.pointer.low;i.pointer.high+1===n?n+1===u?(this.ss.eraseElementByIterator(i),this.ss.updateKeyByIterator(i,new r(p,d))):this.ss.updateKeyByIterator(i,new r(p,n)):n+1===u?(this.ss.eraseElementByIterator(i.next()),this.ss.insert(new r(n,d))):this.ss.insert(e)}s("free():"+n)},t.prototype.clear=function(){s("clear()"),this.ss.clear(),this.ss.insert(new r(this.min,this.max))},t.prototype.intervalCount=function(){return this.ss.size()},t.prototype.dump=function(){console.log("length:"+this.ss.size());for(let n of this.ss)console.log(n)},a.exports=t}),va=me((f,a)=>{he(),de(),pe();var o=pu();a.exports.NumberAllocator=o}),du=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=eu(),o=va(),s=class{constructor(l){Ae(this,"aliasToTopic");Ae(this,"topicToAlias");Ae(this,"max");Ae(this,"numberAllocator");Ae(this,"length");l>0&&(this.aliasToTopic=new a.LRUCache({max:l}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,l),this.max=l,this.length=0)}put(l,r){if(r===0||r>this.max)return!1;let t=this.aliasToTopic.get(r);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(r,l),this.topicToAlias[l]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(l){return this.aliasToTopic.get(l)}getAliasByTopic(l){let r=this.topicToAlias[l];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};f.default=s}),gu=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(f,"__esModule",{value:!0});var o=$r(),s=a(du()),l=Kt(),r=(t,n)=>{t.log("_handleConnack");let{options:e}=t,i=e.protocolVersion===5?n.reasonCode:n.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,n.properties){if(n.properties.topicAliasMaximum){if(n.properties.topicAliasMaximum>65535){t.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}n.properties.topicAliasMaximum>0&&(t.topicAliasSend=new s.default(n.properties.topicAliasMaximum))}n.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=n.properties.serverKeepAlive),n.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=n.properties.maximumPacketSize)}if(i===0)t.reconnecting=!1,t._onConnect(n);else if(i>0){let u=new l.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[i]}`,i);t.emit("error",u),t.options.reconnectOnConnackError&&t._cleanUp(!0)}};f.default=r}),yu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=(o,s,l)=>{o.log("handling pubrel packet");let r=typeof l<"u"?l:o.noop,{messageId:t}=s,n={cmd:"pubcomp",messageId:t};o.incomingStore.get(s,(e,i)=>{e?o._sendPacket(n,r):(o.emit("message",i.topic,i.payload,i),o.handleMessage(i,u=>{if(u)return r(u);o.incomingStore.del(i,o.noop),o._sendPacket(n,r)}))})};f.default=a}),bu=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f,"__esModule",{value:!0});var o=a(Jl()),s=a(Zl()),l=a(gu()),r=a($r()),t=a(yu()),n=(e,i,u)=>{let{options:d}=e;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<i.length)return e.emit("error",new Error(`exceeding packets size ${i.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",i),i.cmd){case"publish":(0,o.default)(e,i,u);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,r.default)(e,i),u();break;case"pubrel":e.reschedulePing(),(0,t.default)(e,i,u);break;case"connack":(0,l.default)(e,i),u();break;case"auth":e.reschedulePing(),(0,s.default)(e,i),u();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),u();break;case"disconnect":e.emit("disconnect",i),u();break;default:e.log("_handlePacket :: unknown command"),u();break}};f.default=n}),wa=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=class{constructor(){Ae(this,"nextId");this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};f.default=a}),mu=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=class{constructor(o){Ae(this,"aliasToTopic");Ae(this,"max");Ae(this,"length");this.aliasToTopic={},this.max=o}put(o,s){return s===0||s>this.max?!1:(this.aliasToTopic[s]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};f.default=a}),vu=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(f,"__esModule",{value:!0}),f.TypedEventEmitter=void 0;var o=a((Lt(),Fe(Pt))),s=Kt(),l=class{};f.TypedEventEmitter=l,(0,s.applyMixin)(l,o.default)}),zr=me((f,a)=>{he(),de(),pe();function o(s){"@babel/helpers - typeof";return a.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},a.exports.__esModule=!0,a.exports.default=a.exports,o(s)}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),wu=me((f,a)=>{he(),de(),pe();var o=zr().default;function s(l,r){if(o(l)!="object"||!l)return l;var t=l[Symbol.toPrimitive];if(t!==void 0){var n=t.call(l,r||"default");if(o(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(l)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports}),_u=me((f,a)=>{he(),de(),pe();var o=zr().default,s=wu();function l(r){var t=s(r,"string");return o(t)=="symbol"?t:t+""}a.exports=l,a.exports.__esModule=!0,a.exports.default=a.exports}),Su=me((f,a)=>{he(),de(),pe();var o=_u();function s(l,r,t){return(r=o(r))in l?Object.defineProperty(l,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[r]=t,l}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports}),Eu=me((f,a)=>{he(),de(),pe();function o(s){if(Array.isArray(s))return s}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),Au=me((f,a)=>{he(),de(),pe();function o(s,l){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var t,n,e,i,u=[],d=!0,p=!1;try{if(e=(r=r.call(s)).next,l===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(t=e.call(r)).done)&&(u.push(t.value),u.length!==l);d=!0);}catch(b){p=!0,n=b}finally{try{if(!d&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(p)throw n}}return u}}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),Iu=me((f,a)=>{he(),de(),pe();function o(s,l){(l==null||l>s.length)&&(l=s.length);for(var r=0,t=Array(l);r<l;r++)t[r]=s[r];return t}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),xu=me((f,a)=>{he(),de(),pe();var o=Iu();function s(l,r){if(l){if(typeof l=="string")return o(l,r);var t={}.toString.call(l).slice(8,-1);return t==="Object"&&l.constructor&&(t=l.constructor.name),t==="Map"||t==="Set"?Array.from(l):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(l,r):void 0}}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports}),ku=me((f,a)=>{he(),de(),pe();function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),Tu=me((f,a)=>{he(),de(),pe();var o=Eu(),s=Au(),l=xu(),r=ku();function t(n,e){return o(n)||s(n,e)||l(n,e)||r()}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports}),_a=me((f,a)=>{he(),de(),pe(),function(o,s){typeof f=="object"&&typeof a<"u"?s(f):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.fastUniqueNumbers={}))}(f,function(o){var s=function(b){return function(m){var S=b(m);return m.add(S),S}},l=function(b){return function(m,S){return b.set(m,S),S}},r=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,t=536870912,n=t*2,e=function(b,m){return function(S){var w=m.get(S),A=w===void 0?S.size:w<n?w+1:0;if(!S.has(A))return b(S,A);if(S.size<t){for(;S.has(A);)A=Math.floor(Math.random()*n);return b(S,A)}if(S.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;S.has(A);)A=Math.floor(Math.random()*r);return b(S,A)}},i=new WeakMap,u=l(i),d=e(u,i),p=s(d);o.addUniqueNumber=p,o.generateUniqueNumber=d})}),Ou=me((f,a)=>{he(),de(),pe();function o(l,r,t,n,e,i,u){try{var d=l[i](u),p=d.value}catch(b){return void t(b)}d.done?r(p):Promise.resolve(p).then(n,e)}function s(l){return function(){var r=this,t=arguments;return new Promise(function(n,e){var i=l.apply(r,t);function u(p){o(i,n,e,u,d,"next",p)}function d(p){o(i,n,e,u,d,"throw",p)}u(void 0)})}}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports}),Sa=me((f,a)=>{he(),de(),pe();function o(s,l){this.v=s,this.k=l}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),Ea=me((f,a)=>{he(),de(),pe();function o(s,l,r,t){var n=Object.defineProperty;try{n({},"",{})}catch{n=0}a.exports=o=function(e,i,u,d){function p(b,m){o(e,b,function(S){return this._invoke(b,m,S)})}i?n?n(e,i,{value:u,enumerable:!d,configurable:!d,writable:!d}):e[i]=u:(p("next",0),p("throw",1),p("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,o(s,l,r,t)}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),Aa=me((f,a)=>{he(),de(),pe();var o=Ea();function s(){var l,r,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function i(A,g,_,E){var v=g&&g.prototype instanceof d?g:d,R=Object.create(v.prototype);return o(R,"_invoke",function(P,I,O){var k,F,x,q=0,V=O||[],L=!1,ae={p:0,n:0,v:l,a:te,f:te.bind(l,4),d:function(Z,le){return k=Z,F=0,x=l,ae.n=le,u}};function te(Z,le){for(F=Z,x=le,r=0;!L&&q&&!H&&r<V.length;r++){var H,ie=V[r],j=ae.p,G=ie[2];Z>3?(H=G===le)&&(x=ie[(F=ie[4])?5:(F=3,3)],ie[4]=ie[5]=l):ie[0]<=j&&((H=Z<2&&j<ie[1])?(F=0,ae.v=le,ae.n=ie[1]):j<G&&(H=Z<3||ie[0]>le||le>G)&&(ie[4]=Z,ie[5]=le,ae.n=G,F=0))}if(H||Z>1)return u;throw L=!0,le}return function(Z,le,H){if(q>1)throw TypeError("Generator is already running");for(L&&le===1&&te(le,H),F=le,x=H;(r=F<2?l:x)||!L;){k||(F?F<3?(F>1&&(ae.n=-1),te(F,x)):ae.n=x:ae.v=x);try{if(q=2,k){if(F||(Z="next"),r=k[Z]){if(!(r=r.call(k,x)))throw TypeError("iterator result is not an object");if(!r.done)return r;x=r.value,F<2&&(F=0)}else F===1&&(r=k.return)&&r.call(k),F<2&&(x=TypeError("The iterator does not provide a '"+Z+"' method"),F=1);k=l}else if((r=(L=ae.n<0)?x:P.call(I,ae))!==u)break}catch(ie){k=l,F=1,x=ie}finally{q=1}}return{value:r,done:L}}}(A,_,E),!0),R}var u={};function d(){}function p(){}function b(){}r=Object.getPrototypeOf;var m=[][n]?r(r([][n]())):(o(r={},n,function(){return this}),r),S=b.prototype=d.prototype=Object.create(m);function w(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,b):(A.__proto__=b,o(A,e,"GeneratorFunction")),A.prototype=Object.create(S),A}return p.prototype=b,o(S,"constructor",b),o(b,"constructor",p),p.displayName="GeneratorFunction",o(b,e,"GeneratorFunction"),o(S),o(S,e,"Generator"),o(S,n,function(){return this}),o(S,"toString",function(){return"[object Generator]"}),(a.exports=s=function(){return{w:i,m:w}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports}),Ia=me((f,a)=>{he(),de(),pe();var o=Sa(),s=Ea();function l(r,t){function n(i,u,d,p){try{var b=r[i](u),m=b.value;return m instanceof o?t.resolve(m.v).then(function(S){n("next",S,d,p)},function(S){n("throw",S,d,p)}):t.resolve(m).then(function(S){b.value=S,d(b)},function(S){return n("throw",S,d,p)})}catch(S){p(S)}}var e;this.next||(s(l.prototype),s(l.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),s(this,"_invoke",function(i,u,d){function p(){return new t(function(b,m){n(i,d,b,m)})}return e=e?e.then(p,p):p()},!0)}a.exports=l,a.exports.__esModule=!0,a.exports.default=a.exports}),xa=me((f,a)=>{he(),de(),pe();var o=Aa(),s=Ia();function l(r,t,n,e,i){return new s(o().w(r,t,n,e),i||Promise)}a.exports=l,a.exports.__esModule=!0,a.exports.default=a.exports}),Pu=me((f,a)=>{he(),de(),pe();var o=xa();function s(l,r,t,n,e){var i=o(l,r,t,n,e);return i.next().then(function(u){return u.done?u.value:i.next()})}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports}),Ru=me((f,a)=>{he(),de(),pe();function o(s){var l=Object(s),r=[];for(var t in l)r.unshift(t);return function n(){for(;r.length;)if((t=r.pop())in l)return n.value=t,n.done=!1,n;return n.done=!0,n}}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports}),Cu=me((f,a)=>{he(),de(),pe();var o=zr().default;function s(l){if(l!=null){var r=l[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],t=0;if(r)return r.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length))return{next:function(){return l&&t>=l.length&&(l=void 0),{value:l&&l[t++],done:!l}}}}throw new TypeError(o(l)+" is not iterable")}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports}),ju=me((f,a)=>{he(),de(),pe();var o=Sa(),s=Aa(),l=Pu(),r=xa(),t=Ia(),n=Ru(),e=Cu();function i(){var u=s(),d=u.m(i),p=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function b(w){var A=typeof w=="function"&&w.constructor;return!!A&&(A===p||(A.displayName||A.name)==="GeneratorFunction")}var m={throw:1,return:2,break:3,continue:3};function S(w){var A,g;return function(_){A||(A={stop:function(){return g(_.a,2)},catch:function(){return _.v},abrupt:function(E,v){return g(_.a,m[E],v)},delegateYield:function(E,v,R){return A.resultName=v,g(_.d,e(E),R)},finish:function(E){return g(_.f,E)}},g=function(E,v,R){_.p=A.prev,_.n=A.next;try{return E(v,R)}finally{A.next=_.n}}),A.resultName&&(A[A.resultName]=_.v,A.resultName=void 0),A.sent=_.v,A.next=_.n;try{return w.call(this,A)}finally{_.p=A.prev,_.n=A.next}}}return(a.exports=i=function(){return{wrap:function(w,A,g,_){return u.w(S(w),A,g,_&&_.reverse())},isGeneratorFunction:b,mark:u.m,awrap:function(w,A){return new o(w,A)},AsyncIterator:t,async:function(w,A,g,_,E){return(b(A)?r:l)(S(w),A,g,_,E)},keys:n,values:e}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=i,a.exports.__esModule=!0,a.exports.default=a.exports}),Mu=me((f,a)=>{he(),de(),pe();var o=ju()();a.exports=o;try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}),Nu=me((f,a)=>{he(),de(),pe(),function(o,s){typeof f=="object"&&typeof a<"u"?s(f,Su(),Tu(),_a(),Ou(),Mu()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.brokerFactory={},o._defineProperty,o._slicedToArray,o.fastUniqueNumbers,o._asyncToGenerator,o._regeneratorRuntime))}(f,function(o,s,l,r,t,n){var e=function(g){return typeof g.start=="function"},i=new WeakMap;function u(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(R){return Object.getOwnPropertyDescriptor(g,R).enumerable})),E.push.apply(E,v)}return E}function d(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?u(Object(E),!0).forEach(function(v){s(g,v,E[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):u(Object(E)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(E,v))})}return g}var p=function(g){return d(d({},g),{},{connect:function(_){var E=_.call;return t(n.mark(function v(){var R,P,I,O;return n.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return R=new MessageChannel,P=R.port1,I=R.port2,k.next=1,E("connect",{port:P},[P]);case 1:return O=k.sent,i.set(I,O),k.abrupt("return",I);case 2:case"end":return k.stop()}},v)}))},disconnect:function(_){var E=_.call;return function(){var v=t(n.mark(function R(P){var I;return n.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(I=i.get(P),I!==void 0){O.next=1;break}throw new Error("The given port is not connected.");case 1:return O.next=2,E("disconnect",{portId:I});case 2:case"end":return O.stop()}},R)}));return function(R){return v.apply(this,arguments)}}()},isSupported:function(_){var E=_.call;return function(){return E("isSupported")}}})};function b(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(R){return Object.getOwnPropertyDescriptor(g,R).enumerable})),E.push.apply(E,v)}return E}function m(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?b(Object(E),!0).forEach(function(v){s(g,v,E[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):b(Object(E)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(E,v))})}return g}var S=new WeakMap,w=function(g){if(S.has(g))return S.get(g);var _=new Map;return S.set(g,_),_},A=function(g){var _=p(g);return function(E){var v=w(E);E.addEventListener("message",function(V){var L=V.data,ae=L.id;if(ae!==null&&v.has(ae)){var te=v.get(ae),Z=te.reject,le=te.resolve;v.delete(ae),L.error===void 0?le(L.result):Z(new Error(L.error.message))}}),e(E)&&E.start();for(var R=function(V){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(te,Z){var le=r.generateUniqueNumber(v);v.set(le,{reject:Z,resolve:te}),L===null?E.postMessage({id:le,method:V},ae):E.postMessage({id:le,method:V,params:L},ae)})},P=function(V,L){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];E.postMessage({id:null,method:V,params:L},ae)},I={},O=0,k=Object.entries(_);O<k.length;O++){var F=l(k[O],2),x=F[0],q=F[1];I=m(m({},I),{},s({},x,q({call:R,notify:P})))}return m({},I)}};o.createBroker=A})}),Bu=me((f,a)=>{he(),de(),pe(),function(o,s){typeof f=="object"&&typeof a<"u"?s(f,zr(),Nu(),_a()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.workerTimersBroker={},o._typeof,o.brokerFactory,o.fastUniqueNumbers))}(f,function(o,s,l,r){var t=new Map([[0,null]]),n=new Map([[0,null]]),e=l.createBroker({clearInterval:function(u){var d=u.call;return function(p){s(t.get(p))==="symbol"&&(t.set(p,null),d("clear",{timerId:p,timerType:"interval"}).then(function(){t.delete(p)}))}},clearTimeout:function(u){var d=u.call;return function(p){s(n.get(p))==="symbol"&&(n.set(p,null),d("clear",{timerId:p,timerType:"timeout"}).then(function(){n.delete(p)}))}},setInterval:function(u){var d=u.call;return function(p){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length,S=new Array(m>2?m-2:0),w=2;w<m;w++)S[w-2]=arguments[w];var A=Symbol(),g=r.generateUniqueNumber(t);t.set(g,A);var _=function(){return d("set",{delay:b,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"interval"}).then(function(){var E=t.get(g);if(E===void 0)throw new Error("The timer is in an undefined state.");E===A&&(p.apply(void 0,S),t.get(g)===A&&_())})};return _(),g}},setTimeout:function(u){var d=u.call;return function(p){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length,S=new Array(m>2?m-2:0),w=2;w<m;w++)S[w-2]=arguments[w];var A=Symbol(),g=r.generateUniqueNumber(n);return n.set(g,A),d("set",{delay:b,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"timeout"}).then(function(){var _=n.get(g);if(_===void 0)throw new Error("The timer is in an undefined state.");_===A&&(n.delete(g),p.apply(void 0,S))}),g}}}),i=function(u){var d=new Worker(u);return e(d)};o.load=i,o.wrap=e})}),Uu=me((f,a)=>{he(),de(),pe(),function(o,s){typeof f=="object"&&typeof a<"u"?s(f,Bu()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.workerTimers={},o.workerTimersBroker))}(f,function(o,s){var l=function(d,p){var b=null;return function(){if(b!==null)return b;var m=new Blob([p],{type:"application/javascript; charset=utf-8"}),S=URL.createObjectURL(m);return b=d(S),setTimeout(function(){return URL.revokeObjectURL(S)}),b}},r=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,t=l(s.load,r),n=function(d){return t().clearInterval(d)},e=function(d){return t().clearTimeout(d)},i=function(){var d;return(d=t()).setInterval.apply(d,arguments)},u=function(){var d;return(d=t()).setTimeout.apply(d,arguments)};o.clearInterval=n,o.clearTimeout=e,o.setInterval=i,o.setTimeout=u})}),Vr=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0}),f.isReactNativeBrowser=f.isWebWorker=void 0;var a=()=>{var r;return typeof window<"u"?typeof navigator<"u"&&((r=navigator.userAgent)==null?void 0:r.toLowerCase().indexOf(" electron/"))>-1&&(Le!=null&&Le.versions)?!Object.prototype.hasOwnProperty.call(Le.versions,"electron"):typeof window.document<"u":!1},o=()=>{var r,t;return!!(typeof self=="object"&&((t=(r=self==null?void 0:self.constructor)==null?void 0:r.name)!=null&&t.includes("WorkerGlobalScope"))&&typeof Deno>"u")},s=()=>typeof navigator<"u"&&navigator.product==="ReactNative",l=a()||o()||s();f.isWebWorker=o(),f.isReactNativeBrowser=s(),f.default=l}),Lu=me(f=>{he(),de(),pe();var a=f&&f.__createBinding||(Object.create?function(i,u,d,p){p===void 0&&(p=d);var b=Object.getOwnPropertyDescriptor(u,d);(!b||("get"in b?!u.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(i,p,b)}:function(i,u,d,p){p===void 0&&(p=d),i[p]=u[d]}),o=f&&f.__setModuleDefault||(Object.create?function(i,u){Object.defineProperty(i,"default",{enumerable:!0,value:u})}:function(i,u){i.default=u}),s=f&&f.__importStar||function(){var i=function(u){return i=Object.getOwnPropertyNames||function(d){var p=[];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(p[p.length]=b);return p},i(u)};return function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var p=i(u),b=0;b<p.length;b++)p[b]!=="default"&&a(d,u,p[b]);return o(d,u),d}}();Object.defineProperty(f,"__esModule",{value:!0});var l=Uu(),r=s(Vr()),t={set:l.setInterval,clear:l.clearInterval},n={set:(i,u)=>setInterval(i,u),clear:i=>clearInterval(i)},e=i=>{switch(i){case"native":return n;case"worker":return t;case"auto":default:return r.default&&!r.isWebWorker&&!r.isReactNativeBrowser?t:n}};f.default=e}),ka=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(f,"__esModule",{value:!0});var o=a(Lu()),s=class{constructor(l,r){Ae(this,"_keepalive");Ae(this,"timerId");Ae(this,"timer");Ae(this,"destroyed",!1);Ae(this,"counter");Ae(this,"client");Ae(this,"_keepaliveTimeoutTimestamp");Ae(this,"_intervalEvery");this.client=l,this.timer=typeof r=="object"&&"set"in r&&"clear"in r?r:(0,o.default)(r),this.setKeepalive(l.options.keepalive)}get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(l){if(l*=1e3,isNaN(l)||l<=0||l>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${l}`);this._keepalive=l,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${l}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let l=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+l,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};f.default=s}),fi=me(f=>{var v;he(),de(),pe();var a=f&&f.__createBinding||(Object.create?function(R,P,I,O){O===void 0&&(O=I);var k=Object.getOwnPropertyDescriptor(P,I);(!k||("get"in k?!P.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return P[I]}}),Object.defineProperty(R,O,k)}:function(R,P,I,O){O===void 0&&(O=I),R[O]=P[I]}),o=f&&f.__setModuleDefault||(Object.create?function(R,P){Object.defineProperty(R,"default",{enumerable:!0,value:P})}:function(R,P){R.default=P}),s=f&&f.__importStar||function(){var R=function(P){return R=Object.getOwnPropertyNames||function(I){var O=[];for(var k in I)Object.prototype.hasOwnProperty.call(I,k)&&(O[O.length]=k);return O},R(P)};return function(P){if(P&&P.__esModule)return P;var I={};if(P!=null)for(var O=R(P),k=0;k<O.length;k++)O[k]!=="default"&&a(I,P,O[k]);return o(I,P),I}}(),l=f&&f.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(f,"__esModule",{value:!0});var r=l(Kl()),t=Ft(),n=l(Ql()),e=l(mt()),i=s(Yl()),u=l(na()),d=l(bu()),p=l(wa()),b=l(mu()),m=Kt(),S=vu(),w=l(ka()),A=s(Vr()),g=globalThis.setImmediate||((...R)=>{let P=R.shift();(0,m.nextTick)(()=>{P(...R)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},E=(v=class extends S.TypedEventEmitter{constructor(I,O){super();Ae(this,"connected");Ae(this,"disconnecting");Ae(this,"disconnected");Ae(this,"reconnecting");Ae(this,"incomingStore");Ae(this,"outgoingStore");Ae(this,"options");Ae(this,"queueQoSZero");Ae(this,"_reconnectCount");Ae(this,"log");Ae(this,"messageIdProvider");Ae(this,"outgoing");Ae(this,"messageIdToTopic");Ae(this,"noop");Ae(this,"keepaliveManager");Ae(this,"stream");Ae(this,"queue");Ae(this,"streamBuilder");Ae(this,"_resubscribeTopics");Ae(this,"connackTimer");Ae(this,"reconnectTimer");Ae(this,"_storeProcessing");Ae(this,"_packetIdsDuringStoreProcessing");Ae(this,"_storeProcessingQueue");Ae(this,"_firstConnection");Ae(this,"topicAliasRecv");Ae(this,"topicAliasSend");Ae(this,"_deferredReconnect");Ae(this,"connackPacket");this.options=O||{};for(let k in _)typeof this.options[k]>"u"?this.options[k]=_[k]:this.options[k]=O[k];this.log=this.options.log||(0,e.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",v.VERSION),A.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",A.default?"browser":"node"),this.log("MqttClient :: options.protocol",O.protocol),this.log("MqttClient :: options.protocolVersion",O.protocolVersion),this.log("MqttClient :: options.username",O.username),this.log("MqttClient :: options.keepalive",O.keepalive),this.log("MqttClient :: options.reconnectPeriod",O.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",O.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",O.properties?O.properties.topicAliasMaximum:void 0),this.options.clientId=typeof O.clientId=="string"?O.clientId:v.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=O.protocolVersion===5&&O.customHandleAcks?O.customHandleAcks:(...k)=>{k[3](null,0)},this.options.writeCache||(r.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=O.outgoingStore||new u.default,this.incomingStore=O.incomingStore||new u.default,this.queueQoSZero=O.queueQoSZero===void 0?!0:O.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,O.properties&&O.properties.topicAliasMaximum>0&&(O.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new b.default(O.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:k}=this,F=()=>{let x=k.shift();this.log("deliver :: entry %o",x);let q=null;if(!x){this._resubscribe();return}q=x.packet,this.log("deliver :: call _sendPacket for %o",q);let V=!0;q.messageId&&q.messageId!==0&&(this.messageIdProvider.register(q.messageId)||(V=!1)),V?this._sendPacket(q,L=>{x.cb&&x.cb(L),F()}):(this.log("messageId: %d has already used. The message is skipped and removed.",q.messageId),F())};this.log("connect :: sending queued packets"),F()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}handleAuth(I,O){O()}handleMessage(I,O){O()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var ae;let I=new t.Writable,O=r.default.parser(this.options),k=null,F=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new u.default,this.outgoingStore=this.options.outgoingStore||new u.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),O.on("packet",te=>{this.log("parser :: on packet push to packets array."),F.push(te)});let x=()=>{this.log("work :: getting next packet in queue");let te=F.shift();if(te)this.log("work :: packet pulled from queue"),(0,d.default)(this,te,q);else{this.log("work :: no packets in queue");let Z=k;k=null,this.log("work :: done flag is %s",!!Z),Z&&Z()}},q=()=>{if(F.length)(0,m.nextTick)(x);else{let te=k;k=null,te()}};I._write=(te,Z,le)=>{k=le,this.log("writable stream :: parsing buffer"),O.parse(te),x()};let V=te=>{this.log("streamErrorHandler :: error",te.message),te.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",te)):this.noop(te)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",V),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let L={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(L.will={...this.options.will,payload:(ae=this.options.will)==null?void 0:ae.payload}),this.topicAliasRecv&&(L.properties||(L.properties={}),this.topicAliasRecv&&(L.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(L),O.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let te={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(te)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,O,k,F){this.log("publish :: message `%s` to topic `%s`",O,I);let{options:x}=this;typeof k=="function"&&(F=k,k=null),k=k||{},k={qos:0,retain:!1,dup:!1,...k};let{qos:q,retain:V,dup:L,properties:ae,cbStorePut:te}=k;if(this._checkDisconnecting(F))return this;let Z=()=>{let le=0;if((q===1||q===2)&&(le=this._nextId(),le===null))return this.log("No messageId left"),!1;let H={cmd:"publish",topic:I,payload:O,qos:q,retain:V,messageId:le,dup:L};switch(x.protocolVersion===5&&(H.properties=ae),this.log("publish :: qos",q),q){case 1:case 2:this.outgoing[H.messageId]={volatile:!1,cb:F||this.noop},this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,void 0,te);break;default:this.log("MqttClient:publish: packet cmd: %s",H.cmd),this._sendPacket(H,F,te);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Z())&&this._storeProcessingQueue.push({invoke:Z,cbStorePut:k.cbStorePut,callback:F}),this}publishAsync(I,O,k){return new Promise((F,x)=>{this.publish(I,O,k,(q,V)=>{q?x(q):F(V)})})}subscribe(I,O,k){let F=this.options.protocolVersion;typeof O=="function"&&(k=O),k=k||this.noop;let x=!1,q=[];typeof I=="string"?(I=[I],q=I):Array.isArray(I)?q=I:typeof I=="object"&&(x=I.resubscribe,delete I.resubscribe,q=Object.keys(I));let V=i.validateTopics(q);if(V!==null)return g(k,new Error(`Invalid topic ${V}`)),this;if(this._checkDisconnecting(k))return this.log("subscribe: discconecting true"),this;let L={qos:0};F===5&&(L.nl=!1,L.rap=!1,L.rh=0),O={...L,...O};let{properties:ae}=O,te=[],Z=(ie,j)=>{if(j=j||O,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ie)||this._resubscribeTopics[ie].qos<j.qos||x){let G={topic:ie,qos:j.qos};F===5&&(G.nl=j.nl,G.rap=j.rap,G.rh=j.rh,G.properties=ae),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",G.topic,G.qos),te.push(G)}};if(Array.isArray(I)?I.forEach(ie=>{this.log("subscribe: array topic %s",ie),Z(ie)}):Object.keys(I).forEach(ie=>{this.log("subscribe: object topic %s, %o",ie,I[ie]),Z(ie,I[ie])}),!te.length)return k(null,[]),this;let le=(ie,j)=>{let G={cmd:"subscribe",subscriptions:ie,messageId:j};if(ae&&(G.properties=ae),this.options.resubscribe){this.log("subscribe :: resubscribe true");let $=[];ie.forEach(_e=>{if(this.options.reconnectPeriod>0){let X={qos:_e.qos};F===5&&(X.nl=_e.nl||!1,X.rap=_e.rap||!1,X.rh=_e.rh||0,X.properties=_e.properties),this._resubscribeTopics[_e.topic]=X,$.push(_e.topic)}}),this.messageIdToTopic[G.messageId]=$}let fe=new Promise(($,_e)=>{this.outgoing[G.messageId]={volatile:!0,cb(X,D){if(!X){let{granted:se}=D;for(let K=0;K<se.length;K+=1)ie[K].qos=se[K]}X?_e(new m.ErrorWithSubackPacket(X.message,D)):$(D)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(G),fe},H=()=>{let ie=this.options.subscribeBatchSize??te.length,j=[];for(let G=0;G<te.length;G+=ie){let fe=te.slice(G,G+ie),$=this._nextId();if($===null)return this.log("No messageId left"),!1;j.push(le(fe,$))}return Promise.all(j).then(G=>{k(null,te,G.at(-1))}).catch(G=>{k(G,te,G.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!H())&&this._storeProcessingQueue.push({invoke:H,callback:k}),this}subscribeAsync(I,O){return new Promise((k,F)=>{this.subscribe(I,O,(x,q)=>{x?F(x):k(q)})})}unsubscribe(I,O,k){typeof I=="string"&&(I=[I]),typeof O=="function"&&(k=O),k=k||this.noop;let F=i.validateTopics(I);if(F!==null)return g(k,new Error(`Invalid topic ${F}`)),this;if(this._checkDisconnecting(k))return this;let x=()=>{let q=this._nextId();if(q===null)return this.log("No messageId left"),!1;let V={cmd:"unsubscribe",messageId:q,unsubscriptions:[]};return typeof I=="string"?V.unsubscriptions=[I]:Array.isArray(I)&&(V.unsubscriptions=I),this.options.resubscribe&&V.unsubscriptions.forEach(L=>{delete this._resubscribeTopics[L]}),typeof O=="object"&&O.properties&&(V.properties=O.properties),this.outgoing[V.messageId]={volatile:!0,cb:k},this.log("unsubscribe: call _sendPacket"),this._sendPacket(V),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!x())&&this._storeProcessingQueue.push({invoke:x,callback:k}),this}unsubscribeAsync(I,O){return new Promise((k,F)=>{this.unsubscribe(I,O,(x,q)=>{x?F(x):k(q)})})}end(I,O,k){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(k=k||O,O=I,I=!1),typeof O!="object"&&(k=k||O,O=null),this.log("end :: cb? %s",!!k),(!k||typeof k!="function")&&(k=this.noop);let F=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(q=>{this.outgoingStore.close(V=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),k){let L=q||V;this.log("end :: closeStores: invoking callback with args"),k(L)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},x=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,m.nextTick)(F)},O)};return this.disconnecting?(k(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,x,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),x()),this)}endAsync(I,O){return new Promise((k,F)=>{this.end(I,O,x=>{x?F(x):k()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:O}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{O(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let O=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new u.default,this.outgoingStore=this.options.outgoingStore||new u.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=O:O(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let O;I.properties&&(O=I.properties.topicAlias);let k=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",O,k),k.length===0){if(typeof O>"u")return new Error("Unregistered Topic Alias");if(k=this.topicAliasSend.getTopicByAlias(O),typeof k>"u")return new Error("Unregistered Topic Alias");I.topic=k}O&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,O,k={}){if(O&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",O)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let F={cmd:"disconnect",...k};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(F,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),g(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),O&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",O),O())}_storeAndSend(I,O,k){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let F=I,x;if(F.cmd==="publish"&&(F=(0,n.default)(I),x=this._removeTopicAliasAndRecoverTopicName(F),x))return O&&O(x);this.outgoingStore.put(F,q=>{if(q)return O&&O(q);k(),this._writePacket(I,O)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let O;I.properties&&(O=I.properties.topicAlias);let k=I.topic.toString();if(this.topicAliasSend)if(O){if(k.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",k,O),!this.topicAliasSend.put(k,O)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",k,O),new Error("Sending Topic Alias out of range")}else k.length!==0&&(this.options.autoAssignTopicAlias?(O=this.topicAliasSend.getAliasByTopic(k),O?(I.topic="",I.properties={...I.properties,topicAlias:O},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",k,O)):(O=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(k,O),I.properties={...I.properties,topicAlias:O},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",k,O))):this.options.autoUseTopicAlias&&(O=this.topicAliasSend.getAliasByTopic(k),O&&(I.topic="",I.properties={...I.properties,topicAlias:O},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",k,O))));else if(O)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",k,O),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,O){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let k=r.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",k),!k&&O&&O!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",O)):O&&(this.log("_writePacket :: invoking cb"),O())}_sendPacket(I,O,k,F){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),k=k||this.noop,O=O||this.noop;let x=this._applyTopicAlias(I);if(x){O(x);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,O);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,O,k);return}if(F){this._writePacket(I,O);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,O,k);return;default:this._writePacket(I,O);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,O,k);break;case 0:default:this._writePacket(I,O);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,O,k){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!O),k=k||this.noop;let F=I;if(F.cmd==="publish"){F=(0,n.default)(I);let q=this._removeTopicAliasAndRecoverTopicName(F);if(q)return O&&O(q)}let x=F.qos||0;x===0&&this.queueQoSZero||F.cmd!=="publish"?this.queue.push({packet:F,cb:O}):x>0?(O=this.outgoing[F.messageId]?this.outgoing[F.messageId].cb:null,this.outgoingStore.put(F,q=>{if(q)return O&&O(q);k()})):O&&O(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new w.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let O=0;O<I.length;O++){let k={};k[I[O]]=this._resubscribeTopics[I[O]],k.resubscribe=!0,this.subscribe(k,{properties:k[I[O]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let O=()=>{let k=this.outgoingStore.createStream(),F=()=>{k.destroy(),k=null,this._flushStoreProcessingQueue(),x()},x=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",F),k.on("error",V=>{x(),this._flushStoreProcessingQueue(),this.removeListener("close",F),this.emit("error",V)});let q=()=>{if(!k)return;let V=k.read(1),L;if(!V){k.once("readable",q);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[V.messageId]){q();return}!this.disconnecting&&!this.reconnectTimer?(L=this.outgoing[V.messageId]?this.outgoing[V.messageId].cb:null,this.outgoing[V.messageId]={volatile:!1,cb(ae,te){L&&L(ae,te),q()}},this._packetIdsDuringStoreProcessing[V.messageId]=!0,this.messageIdProvider.register(V.messageId)?this._sendPacket(V,void 0,void 0,!0):this.log("messageId: %d has already used.",V.messageId)):k.destroy&&k.destroy()};k.on("end",()=>{let V=!0;for(let L in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[L]){V=!1;break}this.removeListener("close",F),V?(x(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):O()}),q()};O()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,O){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(k,F)=>{O(k,F),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}},Ae(v,"VERSION",m.MQTTJS_VERSION),v);f.default=E}),Du=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=va(),o=class{constructor(){Ae(this,"numberAllocator");Ae(this,"lastId");this.numberAllocator=new a.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(s){return this.numberAllocator.use(s)}deallocate(s){this.numberAllocator.free(s)}clear(){this.numberAllocator.clear()}};f.default=o});function Fu(){if(hi)return gr;hi=!0;let f=2147483647,a=36,o=1,s=26,l=38,r=700,t=72,n=128,e="-",i=/^xn--/,u=/[^\0-\x7F]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=a-o,m=Math.floor,S=String.fromCharCode;function w(k){throw new RangeError(p[k])}function A(k,F){let x=[],q=k.length;for(;q--;)x[q]=F(k[q]);return x}function g(k,F){let x=k.split("@"),q="";x.length>1&&(q=x[0]+"@",k=x[1]),k=k.replace(d,".");let V=k.split("."),L=A(V,F).join(".");return q+L}function _(k){let F=[],x=0,q=k.length;for(;x<q;){let V=k.charCodeAt(x++);if(V>=55296&&V<=56319&&x<q){let L=k.charCodeAt(x++);(L&64512)==56320?F.push(((V&1023)<<10)+(L&1023)+65536):(F.push(V),x--)}else F.push(V)}return F}let E=k=>String.fromCodePoint(...k),v=function(k){return k>=48&&k<58?26+(k-48):k>=65&&k<91?k-65:k>=97&&k<123?k-97:a},R=function(k,F){return k+22+75*(k<26)-((F!=0)<<5)},P=function(k,F,x){let q=0;for(k=x?m(k/r):k>>1,k+=m(k/F);k>b*s>>1;q+=a)k=m(k/b);return m(q+(b+1)*k/(k+l))},I=function(k){let F=[],x=k.length,q=0,V=n,L=t,ae=k.lastIndexOf(e);ae<0&&(ae=0);for(let te=0;te<ae;++te)k.charCodeAt(te)>=128&&w("not-basic"),F.push(k.charCodeAt(te));for(let te=ae>0?ae+1:0;te<x;){let Z=q;for(let H=1,ie=a;;ie+=a){te>=x&&w("invalid-input");let j=v(k.charCodeAt(te++));j>=a&&w("invalid-input"),j>m((f-q)/H)&&w("overflow"),q+=j*H;let G=ie<=L?o:ie>=L+s?s:ie-L;if(j<G)break;let fe=a-G;H>m(f/fe)&&w("overflow"),H*=fe}let le=F.length+1;L=P(q-Z,le,Z==0),m(q/le)>f-V&&w("overflow"),V+=m(q/le),q%=le,F.splice(q++,0,V)}return String.fromCodePoint(...F)},O=function(k){let F=[];k=_(k);let x=k.length,q=n,V=0,L=t;for(let Z of k)Z<128&&F.push(S(Z));let ae=F.length,te=ae;for(ae&&F.push(e);te<x;){let Z=f;for(let H of k)H>=q&&H<Z&&(Z=H);let le=te+1;Z-q>m((f-V)/le)&&w("overflow"),V+=(Z-q)*le,q=Z;for(let H of k)if(H<q&&++V>f&&w("overflow"),H===q){let ie=V;for(let j=a;;j+=a){let G=j<=L?o:j>=L+s?s:j-L;if(ie<G)break;let fe=ie-G,$=a-G;F.push(S(R(G+fe%$,0))),ie=m(fe/$)}F.push(S(R(ie,0))),L=P(V,le,te===ae),V=0,++te}++V,++q}return F.join("")};return gr={version:"2.3.1",ucs2:{decode:_,encode:E},decode:I,encode:O,toASCII:function(k){return g(k,function(F){return u.test(F)?"xn--"+O(F):F})},toUnicode:function(k){return g(k,function(F){return i.test(F)?I(F.slice(4).toLowerCase()):F})}},gr}var gr,hi,Tt,Wu=ot(()=>{he(),de(),pe(),gr={},hi=!1,Tt=Fu(),Tt.decode,Tt.encode,Tt.toASCII,Tt.toUnicode,Tt.ucs2,Tt.version});function qu(){return di||(di=!0,pi=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var f={},a=Symbol("test"),o=Object(a);if(typeof a=="string"||Object.prototype.toString.call(a)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var s=42;f[a]=s;for(a in f)return!1;if(typeof Object.keys=="function"&&Object.keys(f).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(f).length!==0)return!1;var l=Object.getOwnPropertySymbols(f);if(l.length!==1||l[0]!==a||!Object.prototype.propertyIsEnumerable.call(f,a))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var r=Object.getOwnPropertyDescriptor(f,a);if(r.value!==s||r.enumerable!==!0)return!1}return!0}),pi}function $u(){return yi||(yi=!0,gi=Error),gi}function zu(){return mi||(mi=!0,bi=EvalError),bi}function Vu(){return wi||(wi=!0,vi=RangeError),vi}function Hu(){return Si||(Si=!0,_i=ReferenceError),_i}function Ta(){return Ai||(Ai=!0,Ei=SyntaxError),Ei}function sr(){return xi||(xi=!0,Ii=TypeError),Ii}function Ku(){return Ti||(Ti=!0,ki=URIError),ki}function Gu(){if(Oi)return yr;Oi=!0;var f=typeof Symbol<"u"&&Symbol,a=qu();return yr=function(){return typeof f!="function"||typeof Symbol!="function"||typeof f("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:a()},yr}function Qu(){if(Pi)return br;Pi=!0;var f={__proto__:null,foo:{}},a=Object;return br=function(){return{__proto__:f}.foo===f.foo&&!(f instanceof a)},br}function Yu(){if(Ri)return mr;Ri=!0;var f="Function.prototype.bind called on incompatible ",a=Object.prototype.toString,o=Math.max,s="[object Function]",l=function(n,e){for(var i=[],u=0;u<n.length;u+=1)i[u]=n[u];for(var d=0;d<e.length;d+=1)i[d+n.length]=e[d];return i},r=function(n,e){for(var i=[],u=e,d=0;u<n.length;u+=1,d+=1)i[d]=n[u];return i},t=function(n,e){for(var i="",u=0;u<n.length;u+=1)i+=n[u],u+1<n.length&&(i+=e);return i};return mr=function(n){var e=this;if(typeof e!="function"||a.apply(e)!==s)throw new TypeError(f+e);for(var i=r(arguments,1),u,d=function(){if(this instanceof u){var w=e.apply(this,l(i,arguments));return Object(w)===w?w:this}return e.apply(n,l(i,arguments))},p=o(0,e.length-i.length),b=[],m=0;m<p;m++)b[m]="$"+m;if(u=Function("binder","return function ("+t(b,",")+"){ return binder.apply(this,arguments); }")(d),e.prototype){var S=function(){};S.prototype=e.prototype,u.prototype=new S,S.prototype=null}return u},mr}function ao(){if(Ci)return vr;Ci=!0;var f=Yu();return vr=Function.prototype.bind||f,vr}function Ju(){if(ji)return wr;ji=!0;var f=Function.prototype.call,a=Object.prototype.hasOwnProperty,o=ao();return wr=o.call(f,a),wr}function Gt(){if(Mi)return _r;Mi=!0;var f,a=$u(),o=zu(),s=Vu(),l=Hu(),r=Ta(),t=sr(),n=Ku(),e=Function,i=function(te){try{return e('"use strict"; return ('+te+").constructor;")()}catch{}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch{u=null}var d=function(){throw new t},p=u?function(){try{return arguments.callee,d}catch{try{return u(arguments,"callee").get}catch{return d}}}():d,b=Gu()(),m=Qu()(),S=Object.getPrototypeOf||(m?function(te){return te.__proto__}:null),w={},A=typeof Uint8Array>"u"||!S?f:S(Uint8Array),g={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?f:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?f:ArrayBuffer,"%ArrayIteratorPrototype%":b&&S?S([][Symbol.iterator]()):f,"%AsyncFromSyncIteratorPrototype%":f,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?f:Atomics,"%BigInt%":typeof BigInt>"u"?f:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?f:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?f:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?f:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":a,"%eval%":eval,"%EvalError%":o,"%Float32Array%":typeof Float32Array>"u"?f:Float32Array,"%Float64Array%":typeof Float64Array>"u"?f:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?f:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?f:Int8Array,"%Int16Array%":typeof Int16Array>"u"?f:Int16Array,"%Int32Array%":typeof Int32Array>"u"?f:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b&&S?S(S([][Symbol.iterator]())):f,"%JSON%":typeof JSON=="object"?JSON:f,"%Map%":typeof Map>"u"?f:Map,"%MapIteratorPrototype%":typeof Map>"u"||!b||!S?f:S(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?f:Promise,"%Proxy%":typeof Proxy>"u"?f:Proxy,"%RangeError%":s,"%ReferenceError%":l,"%Reflect%":typeof Reflect>"u"?f:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?f:Set,"%SetIteratorPrototype%":typeof Set>"u"||!b||!S?f:S(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?f:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b&&S?S(""[Symbol.iterator]()):f,"%Symbol%":b?Symbol:f,"%SyntaxError%":r,"%ThrowTypeError%":p,"%TypedArray%":A,"%TypeError%":t,"%Uint8Array%":typeof Uint8Array>"u"?f:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?f:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?f:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?f:Uint32Array,"%URIError%":n,"%WeakMap%":typeof WeakMap>"u"?f:WeakMap,"%WeakRef%":typeof WeakRef>"u"?f:WeakRef,"%WeakSet%":typeof WeakSet>"u"?f:WeakSet};if(S)try{null.error}catch(te){var _=S(S(te));g["%Error.prototype%"]=_}var E=function te(Z){var le;if(Z==="%AsyncFunction%")le=i("async function () {}");else if(Z==="%GeneratorFunction%")le=i("function* () {}");else if(Z==="%AsyncGeneratorFunction%")le=i("async function* () {}");else if(Z==="%AsyncGenerator%"){var H=te("%AsyncGeneratorFunction%");H&&(le=H.prototype)}else if(Z==="%AsyncIteratorPrototype%"){var ie=te("%AsyncGenerator%");ie&&S&&(le=S(ie.prototype))}return g[Z]=le,le},v={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},R=ao(),P=Ju(),I=R.call(Function.call,Array.prototype.concat),O=R.call(Function.apply,Array.prototype.splice),k=R.call(Function.call,String.prototype.replace),F=R.call(Function.call,String.prototype.slice),x=R.call(Function.call,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,V=/\\(\\)?/g,L=function(te){var Z=F(te,0,1),le=F(te,-1);if(Z==="%"&&le!=="%")throw new r("invalid intrinsic syntax, expected closing `%`");if(le==="%"&&Z!=="%")throw new r("invalid intrinsic syntax, expected opening `%`");var H=[];return k(te,q,function(ie,j,G,fe){H[H.length]=G?k(fe,V,"$1"):j||ie}),H},ae=function(te,Z){var le=te,H;if(P(v,le)&&(H=v[le],le="%"+H[0]+"%"),P(g,le)){var ie=g[le];if(ie===w&&(ie=E(le)),typeof ie>"u"&&!Z)throw new t("intrinsic "+te+" exists, but is not available. Please file an issue!");return{alias:H,name:le,value:ie}}throw new r("intrinsic "+te+" does not exist!")};return _r=function(te,Z){if(typeof te!="string"||te.length===0)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Z!="boolean")throw new t('"allowMissing" argument must be a boolean');if(x(/^%?[^%]*%?$/,te)===null)throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var le=L(te),H=le.length>0?le[0]:"",ie=ae("%"+H+"%",Z),j=ie.name,G=ie.value,fe=!1,$=ie.alias;$&&(H=$[0],O(le,I([0,1],$)));for(var _e=1,X=!0;_e<le.length;_e+=1){var D=le[_e],se=F(D,0,1),K=F(D,-1);if((se==='"'||se==="'"||se==="`"||K==='"'||K==="'"||K==="`")&&se!==K)throw new r("property names with quotes must have matching quotes");if((D==="constructor"||!X)&&(fe=!0),H+="."+D,j="%"+H+"%",P(g,j))G=g[j];else if(G!=null){if(!(D in G)){if(!Z)throw new t("base intrinsic for "+te+" exists, but the property is not available.");return}if(u&&_e+1>=le.length){var ee=u(G,D);X=!!ee,X&&"get"in ee&&!("originalValue"in ee.get)?G=ee.get:G=G[D]}else X=P(G,D),G=G[D];X&&!fe&&(g[j]=G)}}return G},_r}function lo(){if(Ni)return Sr;Ni=!0;var f=Gt(),a=f("%Object.defineProperty%",!0)||!1;if(a)try{a({},"a",{value:1})}catch{a=!1}return Sr=a,Sr}function Oa(){if(Bi)return Er;Bi=!0;var f=Gt(),a=f("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch{a=null}return Er=a,Er}function Xu(){if(Ui)return Ar;Ui=!0;var f=lo(),a=Ta(),o=sr(),s=Oa();return Ar=function(l,r,t){if(!l||typeof l!="object"&&typeof l!="function")throw new o("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new o("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,e=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,d=!!s&&s(l,r);if(f)f(l,r,{configurable:i===null&&d?d.configurable:!i,enumerable:n===null&&d?d.enumerable:!n,value:t,writable:e===null&&d?d.writable:!e});else if(u||!n&&!e&&!i)l[r]=t;else throw new a("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ar}function Zu(){if(Li)return Ir;Li=!0;var f=lo(),a=function(){return!!f};return a.hasArrayLengthDefineBug=function(){if(!f)return null;try{return f([],"length",{value:1}).length!==1}catch{return!0}},Ir=a,Ir}function ec(){if(Di)return xr;Di=!0;var f=Gt(),a=Xu(),o=Zu()(),s=Oa(),l=sr(),r=f("%Math.floor%");return xr=function(t,n){if(typeof t!="function")throw new l("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||r(n)!==n)throw new l("`length` must be a positive 32-bit integer");var e=arguments.length>2&&!!arguments[2],i=!0,u=!0;if("length"in t&&s){var d=s(t,"length");d&&!d.configurable&&(i=!1),d&&!d.writable&&(u=!1)}return(i||u||!e)&&(o?a(t,"length",n,!0,!0):a(t,"length",n)),t},xr}function tc(){if(Fi)return $t;Fi=!0;var f=ao(),a=Gt(),o=ec(),s=sr(),l=a("%Function.prototype.apply%"),r=a("%Function.prototype.call%"),t=a("%Reflect.apply%",!0)||f.call(r,l),n=lo(),e=a("%Math.max%");$t=function(u){if(typeof u!="function")throw new s("a function is required");var d=t(f,r,arguments);return o(d,1+e(0,u.length-(arguments.length-1)),!0)};var i=function(){return t(f,l,arguments)};return n?n($t,"apply",{value:i}):$t.apply=i,$t}function rc(){if(Wi)return kr;Wi=!0;var f=Gt(),a=tc(),o=a(f("String.prototype.indexOf"));return kr=function(s,l){var r=f(s,!!l);return typeof r=="function"&&o(s,".prototype.")>-1?a(r):r},kr}var pi,di,gi,yi,bi,mi,vi,wi,_i,Si,Ei,Ai,Ii,xi,ki,Ti,yr,Oi,br,Pi,mr,Ri,vr,Ci,wr,ji,_r,Mi,Sr,Ni,Er,Bi,Ar,Ui,Ir,Li,xr,Di,$t,Fi,kr,Wi,nc=ot(()=>{he(),de(),pe(),pi={},di=!1,gi={},yi=!1,bi={},mi=!1,vi={},wi=!1,_i={},Si=!1,Ei={},Ai=!1,Ii={},xi=!1,ki={},Ti=!1,yr={},Oi=!1,br={},Pi=!1,mr={},Ri=!1,vr={},Ci=!1,wr={},ji=!1,_r={},Mi=!1,Sr={},Ni=!1,Er={},Bi=!1,Ar={},Ui=!1,Ir={},Li=!1,xr={},Di=!1,$t={},Fi=!1,kr={},Wi=!1});function uo(f){throw new Error("Node.js process "+f+" is not supported by JSPM core outside of Node.js")}function ic(){!Ut||!Nt||(Ut=!1,Nt.length?ft=Nt.concat(ft):nr=-1,ft.length&&Pa())}function Pa(){if(!Ut){var f=setTimeout(ic,0);Ut=!0;for(var a=ft.length;a;){for(Nt=ft,ft=[];++nr<a;)Nt&&Nt[nr].run();nr=-1,a=ft.length}Nt=null,Ut=!1,clearTimeout(f)}}function oc(f){var a=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)a[o-1]=arguments[o];ft.push(new Ra(f,a)),ft.length===1&&!Ut&&setTimeout(Pa,0)}function Ra(f,a){this.fun=f,this.array=a}function et(){}function sc(f){uo("_linkedBinding")}function ac(f){uo("dlopen")}function lc(){return[]}function uc(){return[]}function cc(f,a){if(!f)throw new Error(a||"assertion error")}function fc(){return!1}function hc(){return yt.now()/1e3}function Gr(f){var a=Math.floor((Date.now()-yt.now())*.001),o=yt.now()*.001,s=Math.floor(o)+a,l=Math.floor(o%1*1e9);return f&&(s=s-f[0],l=l-f[1],l<0&&(s--,l+=Tr)),[s,l]}function Et(){return co}function pc(f){return[]}var ft,Ut,Nt,nr,bo,mo,vo,wo,_o,So,Eo,Ao,Io,xo,ko,To,Oo,Po,Ro,Co,jo,Mo,No,Bo,Uo,ur,Lo,Do,Fo,Wo,qo,$o,zo,Vo,Ho,Ko,Go,Qo,Yo,Jo,Xo,Zo,es,ts,rs,ns,is,os,ss,as,ls,yt,Qr,Tr,us,cs,fs,hs,ps,ds,gs,ys,bs,ms,vs,co,Ca=ot(()=>{he(),de(),pe(),ft=[],Ut=!1,nr=-1,Ra.prototype.run=function(){this.fun.apply(null,this.array)},bo="browser",mo="x64",vo="browser",wo={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},_o=["/usr/bin/node"],So=[],Eo="v16.8.0",Ao={},Io=function(f,a){console.warn((a?a+": ":"")+f)},xo=function(f){uo("binding")},ko=function(f){return 0},To=function(){return"/"},Oo=function(f){},Po={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Ro=et,Co=[],jo={},Mo=!1,No={},Bo=et,Uo=et,ur=function(){return{}},Lo=ur,Do=ur,Fo=et,Wo=et,qo=et,$o={},zo={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Vo=et,Ho=et,Ko=et,Go=et,Qo=et,Yo=et,Jo=et,Xo=void 0,Zo=void 0,es=void 0,ts=et,rs=2,ns=1,is="/bin/usr/node",os=9229,ss="node",as=[],ls=et,yt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},yt.now===void 0&&(Qr=Date.now(),yt.timing&&yt.timing.navigationStart&&(Qr=yt.timing.navigationStart),yt.now=()=>Date.now()-Qr),Tr=1e9,Gr.bigint=function(f){var a=Gr(f);return typeof BigInt>"u"?a[0]*Tr+a[1]:BigInt(a[0]*Tr)+BigInt(a[1])},us=10,cs={},fs=0,hs=Et,ps=Et,ds=Et,gs=Et,ys=Et,bs=et,ms=Et,vs=Et,co={version:Eo,versions:Ao,arch:mo,platform:vo,release:Po,_rawDebug:Ro,moduleLoadList:Co,binding:xo,_linkedBinding:sc,_events:cs,_eventsCount:fs,_maxListeners:us,on:Et,addListener:hs,once:ps,off:ds,removeListener:gs,removeAllListeners:ys,emit:bs,prependListener:ms,prependOnceListener:vs,listeners:pc,domain:jo,_exiting:Mo,config:No,dlopen:ac,uptime:hc,_getActiveRequests:lc,_getActiveHandles:uc,reallyExit:Bo,_kill:Uo,cpuUsage:ur,resourceUsage:Lo,memoryUsage:Do,kill:Fo,exit:Wo,openStdin:qo,allowedNodeEnvironmentFlags:$o,assert:cc,features:zo,_fatalExceptions:Vo,setUncaughtExceptionCaptureCallback:Ho,hasUncaughtExceptionCaptureCallback:fc,emitWarning:Io,nextTick:oc,_tickCallback:Ko,_debugProcess:Go,_debugEnd:Qo,_startProfilerIdleNotifier:Yo,_stopProfilerIdleNotifier:Jo,stdout:Xo,stdin:es,stderr:Zo,abort:ts,umask:ko,chdir:Oo,cwd:To,env:wo,title:bo,argv:_o,execArgv:So,pid:rs,ppid:ns,execPath:is,debugPort:os,hrtime:Gr,argv0:ss,_preload_modules:as,setSourceMapsEnabled:ls}});function dc(){if(qi)return Or;qi=!0;var f=co;function a(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function o(r,t){for(var n="",e=0,i=-1,u=0,d,p=0;p<=r.length;++p){if(p<r.length)d=r.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(i===p-1||u===1))if(i!==p-1&&u===2){if(n.length<2||e!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var b=n.lastIndexOf("/");if(b!==n.length-1){b===-1?(n="",e=0):(n=n.slice(0,b),e=n.length-1-n.lastIndexOf("/")),i=p,u=0;continue}}else if(n.length===2||n.length===1){n="",e=0,i=p,u=0;continue}}t&&(n.length>0?n+="/..":n="..",e=2)}else n.length>0?n+="/"+r.slice(i+1,p):n=r.slice(i+1,p),e=p-i-1;i=p,u=0}else d===46&&u!==-1?++u:u=-1}return n}function s(r,t){var n=t.dir||t.root,e=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+e:n+r+e:e}var l={resolve:function(){for(var r="",t=!1,n,e=arguments.length-1;e>=-1&&!t;e--){var i;e>=0?i=arguments[e]:(n===void 0&&(n=f.cwd()),i=n),a(i),i.length!==0&&(r=i+"/"+r,t=i.charCodeAt(0)===47)}return r=o(r,!t),t?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(a(r),r.length===0)return".";var t=r.charCodeAt(0)===47,n=r.charCodeAt(r.length-1)===47;return r=o(r,!t),r.length===0&&!t&&(r="."),r.length>0&&n&&(r+="/"),t?"/"+r:r},isAbsolute:function(r){return a(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,t=0;t<arguments.length;++t){var n=arguments[t];a(n),n.length>0&&(r===void 0?r=n:r+="/"+n)}return r===void 0?".":l.normalize(r)},relative:function(r,t){if(a(r),a(t),r===t||(r=l.resolve(r),t=l.resolve(t),r===t))return"";for(var n=1;n<r.length&&r.charCodeAt(n)===47;++n);for(var e=r.length,i=e-n,u=1;u<t.length&&t.charCodeAt(u)===47;++u);for(var d=t.length,p=d-u,b=i<p?i:p,m=-1,S=0;S<=b;++S){if(S===b){if(p>b){if(t.charCodeAt(u+S)===47)return t.slice(u+S+1);if(S===0)return t.slice(u+S)}else i>b&&(r.charCodeAt(n+S)===47?m=S:S===0&&(m=0));break}var w=r.charCodeAt(n+S),A=t.charCodeAt(u+S);if(w!==A)break;w===47&&(m=S)}var g="";for(S=n+m+1;S<=e;++S)(S===e||r.charCodeAt(S)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+t.slice(u+m):(u+=m,t.charCodeAt(u)===47&&++u,t.slice(u))},_makeLong:function(r){return r},dirname:function(r){if(a(r),r.length===0)return".";for(var t=r.charCodeAt(0),n=t===47,e=-1,i=!0,u=r.length-1;u>=1;--u)if(t=r.charCodeAt(u),t===47){if(!i){e=u;break}}else i=!1;return e===-1?n?"/":".":n&&e===1?"//":r.slice(0,e)},basename:function(r,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');a(r);var n=0,e=-1,i=!0,u;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";var d=t.length-1,p=-1;for(u=r.length-1;u>=0;--u){var b=r.charCodeAt(u);if(b===47){if(!i){n=u+1;break}}else p===-1&&(i=!1,p=u+1),d>=0&&(b===t.charCodeAt(d)?--d===-1&&(e=u):(d=-1,e=p))}return n===e?e=p:e===-1&&(e=r.length),r.slice(n,e)}else{for(u=r.length-1;u>=0;--u)if(r.charCodeAt(u)===47){if(!i){n=u+1;break}}else e===-1&&(i=!1,e=u+1);return e===-1?"":r.slice(n,e)}},extname:function(r){a(r);for(var t=-1,n=0,e=-1,i=!0,u=0,d=r.length-1;d>=0;--d){var p=r.charCodeAt(d);if(p===47){if(!i){n=d+1;break}continue}e===-1&&(i=!1,e=d+1),p===46?t===-1?t=d:u!==1&&(u=1):t!==-1&&(u=-1)}return t===-1||e===-1||u===0||u===1&&t===e-1&&t===n+1?"":r.slice(t,e)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return s("/",r)},parse:function(r){a(r);var t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;var n=r.charCodeAt(0),e=n===47,i;e?(t.root="/",i=1):i=0;for(var u=-1,d=0,p=-1,b=!0,m=r.length-1,S=0;m>=i;--m){if(n=r.charCodeAt(m),n===47){if(!b){d=m+1;break}continue}p===-1&&(b=!1,p=m+1),n===46?u===-1?u=m:S!==1&&(S=1):u!==-1&&(S=-1)}return u===-1||p===-1||S===0||S===1&&u===p-1&&u===d+1?p!==-1&&(d===0&&e?t.base=t.name=r.slice(1,p):t.base=t.name=r.slice(d,p)):(d===0&&e?(t.name=r.slice(1,u),t.base=r.slice(1,p)):(t.name=r.slice(d,u),t.base=r.slice(d,p)),t.ext=r.slice(u,p)),d>0?t.dir=r.slice(0,d-1):e&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,Or=l,Or}var Or,qi,$i,gc=ot(()=>{he(),de(),pe(),Ca(),Or={},qi=!1,$i=dc()}),ja={};Vt(ja,{URL:()=>$a,Url:()=>La,default:()=>tt,fileURLToPath:()=>Na,format:()=>Da,parse:()=>qa,pathToFileURL:()=>Ba,resolve:()=>Fa,resolveObject:()=>Wa});function yc(){if(zi)return Pr;zi=!0;var f=typeof Map=="function"&&Map.prototype,a=Object.getOwnPropertyDescriptor&&f?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=f&&a&&typeof a.get=="function"?a.get:null,s=f&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,r=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,t=l&&r&&typeof r.get=="function"?r.get:null,n=l&&Set.prototype.forEach,e=typeof WeakMap=="function"&&WeakMap.prototype,i=e?WeakMap.prototype.has:null,u=typeof WeakSet=="function"&&WeakSet.prototype,d=u?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,b=p?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,S=Object.prototype.toString,w=Function.prototype.toString,A=String.prototype.match,g=String.prototype.slice,_=String.prototype.replace,E=String.prototype.toUpperCase,v=String.prototype.toLowerCase,R=RegExp.prototype.test,P=Array.prototype.concat,I=Array.prototype.join,O=Array.prototype.slice,k=Math.floor,F=typeof BigInt=="function"?BigInt.prototype.valueOf:null,x=Object.getOwnPropertySymbols,q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,V=typeof Symbol=="function"&&typeof Symbol.iterator=="object",L=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===V||!0)?Symbol.toStringTag:null,ae=Object.prototype.propertyIsEnumerable,te=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(W){return W.__proto__}:null);function Z(W,Y){if(W===1/0||W===-1/0||W!==W||W&&W>-1e3&&W<1e3||R.call(/e/,Y))return Y;var Ie=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof W=="number"){var ke=W<0?-k(-W):k(W);if(ke!==W){var Te=String(ke),Me=g.call(Y,Te.length+1);return _.call(Te,Ie,"$&_")+"."+_.call(_.call(Me,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(Y,Ie,"$&_")}var le=Ua,H=le.custom,ie=ee(H)?H:null;Pr=function W(Y,Ie,ke,Te){var Me=Ie||{};if(ue(Me,"quoteStyle")&&Me.quoteStyle!=="single"&&Me.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ue(Me,"maxStringLength")&&(typeof Me.maxStringLength=="number"?Me.maxStringLength<0&&Me.maxStringLength!==1/0:Me.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ve=ue(Me,"customInspect")?Me.customInspect:!0;if(typeof Ve!="boolean"&&Ve!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ue(Me,"indent")&&Me.indent!==null&&Me.indent!=="	"&&!(parseInt(Me.indent,10)===Me.indent&&Me.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ue(Me,"numericSeparator")&&typeof Me.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ge=Me.numericSeparator;if(typeof Y>"u")return"undefined";if(Y===null)return"null";if(typeof Y=="boolean")return Y?"true":"false";if(typeof Y=="string")return ce(Y,Me);if(typeof Y=="number"){if(Y===0)return 1/0/Y>0?"0":"-0";var Ne=String(Y);return Ge?Z(Y,Ne):Ne}if(typeof Y=="bigint"){var We=String(Y)+"n";return Ge?Z(Y,We):We}var Re=typeof Me.depth>"u"?5:Me.depth;if(typeof ke>"u"&&(ke=0),ke>=Re&&Re>0&&typeof Y=="object")return fe(Y)?"[Array]":"[Object]";var Be=M(Me,ke);if(typeof Te>"u")Te=[];else if(oe(Te,Y)>=0)return"[Circular]";function De(lt,St,jt){if(St&&(Te=O.call(Te),Te.push(St)),jt){var ut={depth:Me.depth};return ue(Me,"quoteStyle")&&(ut.quoteStyle=Me.quoteStyle),W(lt,ut,ke+1,Te)}return W(lt,Me,ke+1,Te)}if(typeof Y=="function"&&!_e(Y)){var Ke=Q(Y),Ye=ne(Y,De);return"[Function"+(Ke?": "+Ke:" (anonymous)")+"]"+(Ye.length>0?" { "+I.call(Ye,", ")+" }":"")}if(ee(Y)){var st=V?_.call(String(Y),/^(Symbol\(.*\))_[^)]*$/,"$1"):q.call(Y);return typeof Y=="object"&&!V?c(st):st}if(Ee(Y)){for(var C="<"+v.call(String(Y.nodeName)),B=Y.attributes||[],Se=0;Se<B.length;Se++)C+=" "+B[Se].name+"="+j(G(B[Se].value),"double",Me);return C+=">",Y.childNodes&&Y.childNodes.length&&(C+="..."),C+="</"+v.call(String(Y.nodeName))+">",C}if(fe(Y)){if(Y.length===0)return"[]";var xe=ne(Y,De);return Be&&!T(xe)?"["+z(xe,Be)+"]":"[ "+I.call(xe,", ")+" ]"}if(X(Y)){var Oe=ne(Y,De);return!("cause"in Error.prototype)&&"cause"in Y&&!ae.call(Y,"cause")?"{ ["+String(Y)+"] "+I.call(P.call("[cause]: "+De(Y.cause),Oe),", ")+" }":Oe.length===0?"["+String(Y)+"]":"{ ["+String(Y)+"] "+I.call(Oe,", ")+" }"}if(typeof Y=="object"&&Ve){if(ie&&typeof Y[ie]=="function"&&le)return le(Y,{depth:Re-ke});if(Ve!=="symbol"&&typeof Y.inspect=="function")return Y.inspect()}if(ye(Y)){var Qe=[];return s&&s.call(Y,function(lt,St){Qe.push(De(St,Y,!0)+" => "+De(lt,Y))}),y("Map",o.call(Y),Qe,Be)}if(J(Y)){var rt=[];return n&&n.call(Y,function(lt){rt.push(De(lt,Y))}),y("Set",t.call(Y),rt,Be)}if(ge(Y))return h("WeakMap");if(ve(Y))return h("WeakSet");if(we(Y))return h("WeakRef");if(se(Y))return c(De(Number(Y)));if(re(Y))return c(De(F.call(Y)));if(K(Y))return c(m.call(Y));if(D(Y))return c(De(String(Y)));if(typeof window<"u"&&Y===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Y===globalThis||typeof Rr<"u"&&Y===Rr)return"{ [object globalThis] }";if(!$(Y)&&!_e(Y)){var at=ne(Y,De),Qt=te?te(Y)===Object.prototype:Y instanceof Object||Y.constructor===Object,Yt=Y instanceof Object?"":"null prototype",Jt=!Qt&&L&&Object(Y)===Y&&L in Y?g.call(N(Y),8,-1):Yt?"Object":"",ar=Qt||typeof Y.constructor!="function"?"":Y.constructor.name?Y.constructor.name+" ":"",Ct=ar+(Jt||Yt?"["+I.call(P.call([],Jt||[],Yt||[]),": ")+"] ":"");return at.length===0?Ct+"{}":Be?Ct+"{"+z(at,Be)+"}":Ct+"{ "+I.call(at,", ")+" }"}return String(Y)};function j(W,Y,Ie){var ke=(Ie.quoteStyle||Y)==="double"?'"':"'";return ke+W+ke}function G(W){return _.call(String(W),/"/g,"&quot;")}function fe(W){return N(W)==="[object Array]"&&(!L||!(typeof W=="object"&&L in W))}function $(W){return N(W)==="[object Date]"&&(!L||!(typeof W=="object"&&L in W))}function _e(W){return N(W)==="[object RegExp]"&&(!L||!(typeof W=="object"&&L in W))}function X(W){return N(W)==="[object Error]"&&(!L||!(typeof W=="object"&&L in W))}function D(W){return N(W)==="[object String]"&&(!L||!(typeof W=="object"&&L in W))}function se(W){return N(W)==="[object Number]"&&(!L||!(typeof W=="object"&&L in W))}function K(W){return N(W)==="[object Boolean]"&&(!L||!(typeof W=="object"&&L in W))}function ee(W){if(V)return W&&typeof W=="object"&&W instanceof Symbol;if(typeof W=="symbol")return!0;if(!W||typeof W!="object"||!q)return!1;try{return q.call(W),!0}catch{}return!1}function re(W){if(!W||typeof W!="object"||!F)return!1;try{return F.call(W),!0}catch{}return!1}var be=Object.prototype.hasOwnProperty||function(W){return W in(this||Rr)};function ue(W,Y){return be.call(W,Y)}function N(W){return S.call(W)}function Q(W){if(W.name)return W.name;var Y=A.call(w.call(W),/^function\s*([\w$]+)/);return Y?Y[1]:null}function oe(W,Y){if(W.indexOf)return W.indexOf(Y);for(var Ie=0,ke=W.length;Ie<ke;Ie++)if(W[Ie]===Y)return Ie;return-1}function ye(W){if(!o||!W||typeof W!="object")return!1;try{o.call(W);try{t.call(W)}catch{return!0}return W instanceof Map}catch{}return!1}function ge(W){if(!i||!W||typeof W!="object")return!1;try{i.call(W,i);try{d.call(W,d)}catch{return!0}return W instanceof WeakMap}catch{}return!1}function we(W){if(!b||!W||typeof W!="object")return!1;try{return b.call(W),!0}catch{}return!1}function J(W){if(!t||!W||typeof W!="object")return!1;try{t.call(W);try{o.call(W)}catch{return!0}return W instanceof Set}catch{}return!1}function ve(W){if(!d||!W||typeof W!="object")return!1;try{d.call(W,d);try{i.call(W,i)}catch{return!0}return W instanceof WeakSet}catch{}return!1}function Ee(W){return!W||typeof W!="object"?!1:typeof HTMLElement<"u"&&W instanceof HTMLElement?!0:typeof W.nodeName=="string"&&typeof W.getAttribute=="function"}function ce(W,Y){if(W.length>Y.maxStringLength){var Ie=W.length-Y.maxStringLength,ke="... "+Ie+" more character"+(Ie>1?"s":"");return ce(g.call(W,0,Y.maxStringLength),Y)+ke}var Te=_.call(_.call(W,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,je);return j(Te,"single",Y)}function je(W){var Y=W.charCodeAt(0),Ie={8:"b",9:"t",10:"n",12:"f",13:"r"}[Y];return Ie?"\\"+Ie:"\\x"+(Y<16?"0":"")+E.call(Y.toString(16))}function c(W){return"Object("+W+")"}function h(W){return W+" { ? }"}function y(W,Y,Ie,ke){var Te=ke?z(Ie,ke):I.call(Ie,", ");return W+" ("+Y+") {"+Te+"}"}function T(W){for(var Y=0;Y<W.length;Y++)if(oe(W[Y],`
`)>=0)return!1;return!0}function M(W,Y){var Ie;if(W.indent==="	")Ie="	";else if(typeof W.indent=="number"&&W.indent>0)Ie=I.call(Array(W.indent+1)," ");else return null;return{base:Ie,prev:I.call(Array(Y+1),Ie)}}function z(W,Y){if(W.length===0)return"";var Ie=`
`+Y.prev+Y.base;return Ie+I.call(W,","+Ie)+`
`+Y.prev}function ne(W,Y){var Ie=fe(W),ke=[];if(Ie){ke.length=W.length;for(var Te=0;Te<W.length;Te++)ke[Te]=ue(W,Te)?Y(W[Te],W):""}var Me=typeof x=="function"?x(W):[],Ve;if(V){Ve={};for(var Ge=0;Ge<Me.length;Ge++)Ve["$"+Me[Ge]]=Me[Ge]}for(var Ne in W)ue(W,Ne)&&(Ie&&String(Number(Ne))===Ne&&Ne<W.length||V&&Ve["$"+Ne]instanceof Symbol||(R.call(/[^\w$]/,Ne)?ke.push(Y(Ne,W)+": "+Y(W[Ne],W)):ke.push(Ne+": "+Y(W[Ne],W))));if(typeof x=="function")for(var We=0;We<Me.length;We++)ae.call(W,Me[We])&&ke.push("["+Y(Me[We])+"]: "+Y(W[Me[We]],W));return ke}return Pr}function bc(){if(Vi)return Cr;Vi=!0;var f=Gt(),a=rc(),o=yc(),s=sr(),l=f("%WeakMap%",!0),r=f("%Map%",!0),t=a("WeakMap.prototype.get",!0),n=a("WeakMap.prototype.set",!0),e=a("WeakMap.prototype.has",!0),i=a("Map.prototype.get",!0),u=a("Map.prototype.set",!0),d=a("Map.prototype.has",!0),p=function(w,A){for(var g=w,_;(_=g.next)!==null;g=_)if(_.key===A)return g.next=_.next,_.next=w.next,w.next=_,_},b=function(w,A){var g=p(w,A);return g&&g.value},m=function(w,A,g){var _=p(w,A);_?_.value=g:w.next={key:A,next:w.next,value:g}},S=function(w,A){return!!p(w,A)};return Cr=function(){var w,A,g,_={assert:function(E){if(!_.has(E))throw new s("Side channel does not contain "+o(E))},get:function(E){if(l&&E&&(typeof E=="object"||typeof E=="function")){if(w)return t(w,E)}else if(r){if(A)return i(A,E)}else if(g)return b(g,E)},has:function(E){if(l&&E&&(typeof E=="object"||typeof E=="function")){if(w)return e(w,E)}else if(r){if(A)return d(A,E)}else if(g)return S(g,E);return!1},set:function(E,v){l&&E&&(typeof E=="object"||typeof E=="function")?(w||(w=new l),n(w,E,v)):r?(A||(A=new r),u(A,E,v)):(g||(g={key:{},next:null}),m(g,E,v))}};return _},Cr}function fo(){if(Hi)return jr;Hi=!0;var f=String.prototype.replace,a=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};return jr={default:o.RFC3986,formatters:{RFC1738:function(s){return f.call(s,a,"+")},RFC3986:function(s){return String(s)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986},jr}function Ma(){if(Ki)return Mr;Ki=!0;var f=fo(),a=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var w=[],A=0;A<256;++A)w.push("%"+((A<16?"0":"")+A.toString(16)).toUpperCase());return w}(),l=function(w){for(;w.length>1;){var A=w.pop(),g=A.obj[A.prop];if(o(g)){for(var _=[],E=0;E<g.length;++E)typeof g[E]<"u"&&_.push(g[E]);A.obj[A.prop]=_}}},r=function(w,A){for(var g=A&&A.plainObjects?Object.create(null):{},_=0;_<w.length;++_)typeof w[_]<"u"&&(g[_]=w[_]);return g},t=function w(A,g,_){if(!g)return A;if(typeof g!="object"){if(o(A))A.push(g);else if(A&&typeof A=="object")(_&&(_.plainObjects||_.allowPrototypes)||!a.call(Object.prototype,g))&&(A[g]=!0);else return[A,g];return A}if(!A||typeof A!="object")return[A].concat(g);var E=A;return o(A)&&!o(g)&&(E=r(A,_)),o(A)&&o(g)?(g.forEach(function(v,R){if(a.call(A,R)){var P=A[R];P&&typeof P=="object"&&v&&typeof v=="object"?A[R]=w(P,v,_):A.push(v)}else A[R]=v}),A):Object.keys(g).reduce(function(v,R){var P=g[R];return a.call(v,R)?v[R]=w(v[R],P,_):v[R]=P,v},E)},n=function(w,A){return Object.keys(A).reduce(function(g,_){return g[_]=A[_],g},w)},e=function(w,A,g){var _=w.replace(/\+/g," ");if(g==="iso-8859-1")return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch{return _}},i=1024,u=function(w,A,g,_,E){if(w.length===0)return w;var v=w;if(typeof w=="symbol"?v=Symbol.prototype.toString.call(w):typeof w!="string"&&(v=String(w)),g==="iso-8859-1")return escape(v).replace(/%u[0-9a-f]{4}/gi,function(x){return"%26%23"+parseInt(x.slice(2),16)+"%3B"});for(var R="",P=0;P<v.length;P+=i){for(var I=v.length>=i?v.slice(P,P+i):v,O=[],k=0;k<I.length;++k){var F=I.charCodeAt(k);if(F===45||F===46||F===95||F===126||F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122||E===f.RFC1738&&(F===40||F===41)){O[O.length]=I.charAt(k);continue}if(F<128){O[O.length]=s[F];continue}if(F<2048){O[O.length]=s[192|F>>6]+s[128|F&63];continue}if(F<55296||F>=57344){O[O.length]=s[224|F>>12]+s[128|F>>6&63]+s[128|F&63];continue}k+=1,F=65536+((F&1023)<<10|I.charCodeAt(k)&1023),O[O.length]=s[240|F>>18]+s[128|F>>12&63]+s[128|F>>6&63]+s[128|F&63]}R+=O.join("")}return R},d=function(w){for(var A=[{obj:{o:w},prop:"o"}],g=[],_=0;_<A.length;++_)for(var E=A[_],v=E.obj[E.prop],R=Object.keys(v),P=0;P<R.length;++P){var I=R[P],O=v[I];typeof O=="object"&&O!==null&&g.indexOf(O)===-1&&(A.push({obj:v,prop:I}),g.push(O))}return l(A),w},p=function(w){return Object.prototype.toString.call(w)==="[object RegExp]"},b=function(w){return!w||typeof w!="object"?!1:!!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w))},m=function(w,A){return[].concat(w,A)},S=function(w,A){if(o(w)){for(var g=[],_=0;_<w.length;_+=1)g.push(A(w[_]));return g}return A(w)};return Mr={arrayToObject:r,assign:n,combine:m,compact:d,decode:e,encode:u,isBuffer:b,isRegExp:p,maybeMap:S,merge:t},Mr}function mc(){if(Gi)return Nr;Gi=!0;var f=bc(),a=Ma(),o=fo(),s=Object.prototype.hasOwnProperty,l={brackets:function(S){return S+"[]"},comma:"comma",indices:function(S,w){return S+"["+w+"]"},repeat:function(S){return S}},r=Array.isArray,t=Array.prototype.push,n=function(S,w){t.apply(S,r(w)?w:[w])},e=Date.prototype.toISOString,i=o.default,u={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:a.encode,encodeValuesOnly:!1,format:i,formatter:o.formatters[i],indices:!1,serializeDate:function(S){return e.call(S)},skipNulls:!1,strictNullHandling:!1},d=function(S){return typeof S=="string"||typeof S=="number"||typeof S=="boolean"||typeof S=="symbol"||typeof S=="bigint"},p={},b=function S(w,A,g,_,E,v,R,P,I,O,k,F,x,q,V,L,ae,te){for(var Z=w,le=te,H=0,ie=!1;(le=le.get(p))!==void 0&&!ie;){var j=le.get(w);if(H+=1,typeof j<"u"){if(j===H)throw new RangeError("Cyclic object value");ie=!0}typeof le.get(p)>"u"&&(H=0)}if(typeof O=="function"?Z=O(A,Z):Z instanceof Date?Z=x(Z):g==="comma"&&r(Z)&&(Z=a.maybeMap(Z,function(N){return N instanceof Date?x(N):N})),Z===null){if(v)return I&&!L?I(A,u.encoder,ae,"key",q):A;Z=""}if(d(Z)||a.isBuffer(Z)){if(I){var G=L?A:I(A,u.encoder,ae,"key",q);return[V(G)+"="+V(I(Z,u.encoder,ae,"value",q))]}return[V(A)+"="+V(String(Z))]}var fe=[];if(typeof Z>"u")return fe;var $;if(g==="comma"&&r(Z))L&&I&&(Z=a.maybeMap(Z,I)),$=[{value:Z.length>0?Z.join(",")||null:void 0}];else if(r(O))$=O;else{var _e=Object.keys(Z);$=k?_e.sort(k):_e}var X=P?A.replace(/\./g,"%2E"):A,D=_&&r(Z)&&Z.length===1?X+"[]":X;if(E&&r(Z)&&Z.length===0)return D+"[]";for(var se=0;se<$.length;++se){var K=$[se],ee=typeof K=="object"&&typeof K.value<"u"?K.value:Z[K];if(!(R&&ee===null)){var re=F&&P?K.replace(/\./g,"%2E"):K,be=r(Z)?typeof g=="function"?g(D,re):D:D+(F?"."+re:"["+re+"]");te.set(w,H);var ue=f();ue.set(p,te),n(fe,S(ee,be,g,_,E,v,R,P,g==="comma"&&L&&r(Z)?null:I,O,k,F,x,q,V,L,ae,ue))}}return fe},m=function(S){if(!S)return u;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.encodeDotInKeys<"u"&&typeof S.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(S.encoder!==null&&typeof S.encoder<"u"&&typeof S.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=S.charset||u.charset;if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var A=o.default;if(typeof S.format<"u"){if(!s.call(o.formatters,S.format))throw new TypeError("Unknown format option provided.");A=S.format}var g=o.formatters[A],_=u.filter;(typeof S.filter=="function"||r(S.filter))&&(_=S.filter);var E;if(S.arrayFormat in l?E=S.arrayFormat:"indices"in S?E=S.indices?"indices":"repeat":E=u.arrayFormat,"commaRoundTrip"in S&&typeof S.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v=typeof S.allowDots>"u"?S.encodeDotInKeys===!0?!0:u.allowDots:!!S.allowDots;return{addQueryPrefix:typeof S.addQueryPrefix=="boolean"?S.addQueryPrefix:u.addQueryPrefix,allowDots:v,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:u.allowEmptyArrays,arrayFormat:E,charset:w,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:u.charsetSentinel,commaRoundTrip:S.commaRoundTrip,delimiter:typeof S.delimiter>"u"?u.delimiter:S.delimiter,encode:typeof S.encode=="boolean"?S.encode:u.encode,encodeDotInKeys:typeof S.encodeDotInKeys=="boolean"?S.encodeDotInKeys:u.encodeDotInKeys,encoder:typeof S.encoder=="function"?S.encoder:u.encoder,encodeValuesOnly:typeof S.encodeValuesOnly=="boolean"?S.encodeValuesOnly:u.encodeValuesOnly,filter:_,format:A,formatter:g,serializeDate:typeof S.serializeDate=="function"?S.serializeDate:u.serializeDate,skipNulls:typeof S.skipNulls=="boolean"?S.skipNulls:u.skipNulls,sort:typeof S.sort=="function"?S.sort:null,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:u.strictNullHandling}};return Nr=function(S,w){var A=S,g=m(w),_,E;typeof g.filter=="function"?(E=g.filter,A=E("",A)):r(g.filter)&&(E=g.filter,_=E);var v=[];if(typeof A!="object"||A===null)return"";var R=l[g.arrayFormat],P=R==="comma"&&g.commaRoundTrip;_||(_=Object.keys(A)),g.sort&&_.sort(g.sort);for(var I=f(),O=0;O<_.length;++O){var k=_[O];g.skipNulls&&A[k]===null||n(v,b(A[k],k,R,P,g.allowEmptyArrays,g.strictNullHandling,g.skipNulls,g.encodeDotInKeys,g.encode?g.encoder:null,g.filter,g.sort,g.allowDots,g.serializeDate,g.format,g.formatter,g.encodeValuesOnly,g.charset,I))}var F=v.join(g.delimiter),x=g.addQueryPrefix===!0?"?":"";return g.charsetSentinel&&(g.charset==="iso-8859-1"?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),F.length>0?x+F:""},Nr}function vc(){if(Qi)return Br;Qi=!0;var f=Ma(),a=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:f.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},l=function(p){return p.replace(/&#(\d+);/g,function(b,m){return String.fromCharCode(parseInt(m,10))})},r=function(p,b){return p&&typeof p=="string"&&b.comma&&p.indexOf(",")>-1?p.split(","):p},t="utf8=%26%2310003%3B",n="utf8=%E2%9C%93",e=function(p,b){var m={__proto__:null},S=b.ignoreQueryPrefix?p.replace(/^\?/,""):p;S=S.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=b.parameterLimit===1/0?void 0:b.parameterLimit,A=S.split(b.delimiter,w),g=-1,_,E=b.charset;if(b.charsetSentinel)for(_=0;_<A.length;++_)A[_].indexOf("utf8=")===0&&(A[_]===n?E="utf-8":A[_]===t&&(E="iso-8859-1"),g=_,_=A.length);for(_=0;_<A.length;++_)if(_!==g){var v=A[_],R=v.indexOf("]="),P=R===-1?v.indexOf("="):R+1,I,O;P===-1?(I=b.decoder(v,s.decoder,E,"key"),O=b.strictNullHandling?null:""):(I=b.decoder(v.slice(0,P),s.decoder,E,"key"),O=f.maybeMap(r(v.slice(P+1),b),function(F){return b.decoder(F,s.decoder,E,"value")})),O&&b.interpretNumericEntities&&E==="iso-8859-1"&&(O=l(O)),v.indexOf("[]=")>-1&&(O=o(O)?[O]:O);var k=a.call(m,I);k&&b.duplicates==="combine"?m[I]=f.combine(m[I],O):(!k||b.duplicates==="last")&&(m[I]=O)}return m},i=function(p,b,m,S){for(var w=S?b:r(b,m),A=p.length-1;A>=0;--A){var g,_=p[A];if(_==="[]"&&m.parseArrays)g=m.allowEmptyArrays&&(w===""||m.strictNullHandling&&w===null)?[]:[].concat(w);else{g=m.plainObjects?Object.create(null):{};var E=_.charAt(0)==="["&&_.charAt(_.length-1)==="]"?_.slice(1,-1):_,v=m.decodeDotInKeys?E.replace(/%2E/g,"."):E,R=parseInt(v,10);!m.parseArrays&&v===""?g={0:w}:!isNaN(R)&&_!==v&&String(R)===v&&R>=0&&m.parseArrays&&R<=m.arrayLimit?(g=[],g[R]=w):v!=="__proto__"&&(g[v]=w)}w=g}return w},u=function(p,b,m,S){if(p){var w=m.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,A=/(\[[^[\]]*])/,g=/(\[[^[\]]*])/g,_=m.depth>0&&A.exec(w),E=_?w.slice(0,_.index):w,v=[];if(E){if(!m.plainObjects&&a.call(Object.prototype,E)&&!m.allowPrototypes)return;v.push(E)}for(var R=0;m.depth>0&&(_=g.exec(w))!==null&&R<m.depth;){if(R+=1,!m.plainObjects&&a.call(Object.prototype,_[1].slice(1,-1))&&!m.allowPrototypes)return;v.push(_[1])}if(_){if(m.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+m.depth+" and strictDepth is true");v.push("["+w.slice(_.index)+"]")}return i(v,b,m,S)}},d=function(p){if(!p)return s;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var b=typeof p.charset>"u"?s.charset:p.charset,m=typeof p.duplicates>"u"?s.duplicates:p.duplicates;if(m!=="combine"&&m!=="first"&&m!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var S=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:s.allowDots:!!p.allowDots;return{allowDots:S,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:s.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:s.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:s.arrayLimit,charset:b,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:s.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:s.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:s.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:s.decoder,delimiter:typeof p.delimiter=="string"||f.isRegExp(p.delimiter)?p.delimiter:s.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:s.depth,duplicates:m,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:s.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:s.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:s.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:s.strictNullHandling}};return Br=function(p,b){var m=d(b);if(p===""||p===null||typeof p>"u")return m.plainObjects?Object.create(null):{};for(var S=typeof p=="string"?e(p,m):p,w=m.plainObjects?Object.create(null):{},A=Object.keys(S),g=0;g<A.length;++g){var _=A[g],E=u(_,S[_],m,typeof p=="string");w=f.merge(w,E,m)}return m.allowSparse===!0?w:f.compact(w)},Br}function wc(){if(Yi)return Ur;Yi=!0;var f=mc(),a=vc(),o=fo();return Ur={formats:o,parse:a,stringify:f},Ur}function _c(){if(Ji)return Ot;Ji=!0;var f=Tt;function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,r=["<",">",'"',"`"," ","\r",`
`,"	"],t=["{","}","|","\\","^","`"].concat(r),n=["'"].concat(t),e=["%","/","?",";","#"].concat(n),i=["/","?","#"],u=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=wc();function A(v,R,P){if(v&&typeof v=="object"&&v instanceof a)return v;var I=new a;return I.parse(v,R,P),I}a.prototype.parse=function(v,R,P){if(typeof v!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var I=v.indexOf("?"),O=I!==-1&&I<v.indexOf("#")?"?":"#",k=v.split(O),F=/\\/g;k[0]=k[0].replace(F,"/"),v=k.join(O);var x=v;if(x=x.trim(),!P&&v.split("#").length===1){var q=l.exec(x);if(q)return this.path=x,this.href=x,this.pathname=q[1],q[2]?(this.search=q[2],R?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):R&&(this.search="",this.query={}),this}var V=o.exec(x);if(V){V=V[0];var L=V.toLowerCase();this.protocol=L,x=x.substr(V.length)}if(P||V||x.match(/^\/\/[^@/]+@[^@/]+/)){var ae=x.substr(0,2)==="//";ae&&!(V&&m[V])&&(x=x.substr(2),this.slashes=!0)}if(!m[V]&&(ae||V&&!S[V])){for(var te=-1,Z=0;Z<i.length;Z++){var le=x.indexOf(i[Z]);le!==-1&&(te===-1||le<te)&&(te=le)}var H,ie;te===-1?ie=x.lastIndexOf("@"):ie=x.lastIndexOf("@",te),ie!==-1&&(H=x.slice(0,ie),x=x.slice(ie+1),this.auth=decodeURIComponent(H)),te=-1;for(var Z=0;Z<e.length;Z++){var le=x.indexOf(e[Z]);le!==-1&&(te===-1||le<te)&&(te=le)}te===-1&&(te=x.length),this.host=x.slice(0,te),x=x.slice(te),this.parseHost(),this.hostname=this.hostname||"";var j=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!j)for(var G=this.hostname.split(/\./),Z=0,fe=G.length;Z<fe;Z++){var $=G[Z];if($&&!$.match(d)){for(var _e="",X=0,D=$.length;X<D;X++)$.charCodeAt(X)>127?_e+="x":_e+=$[X];if(!_e.match(d)){var se=G.slice(0,Z),K=G.slice(Z+1),ee=$.match(p);ee&&(se.push(ee[1]),K.unshift(ee[2])),K.length&&(x="/"+K.join(".")+x),this.hostname=se.join(".");break}}}this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=f.toASCII(this.hostname));var re=this.port?":"+this.port:"",be=this.hostname||"";this.host=be+re,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),x[0]!=="/"&&(x="/"+x))}if(!b[L])for(var Z=0,fe=n.length;Z<fe;Z++){var ue=n[Z];if(x.indexOf(ue)!==-1){var N=encodeURIComponent(ue);N===ue&&(N=escape(ue)),x=x.split(ue).join(N)}}var Q=x.indexOf("#");Q!==-1&&(this.hash=x.substr(Q),x=x.slice(0,Q));var oe=x.indexOf("?");if(oe!==-1?(this.search=x.substr(oe),this.query=x.substr(oe+1),R&&(this.query=w.parse(this.query)),x=x.slice(0,oe)):R&&(this.search="",this.query={}),x&&(this.pathname=x),S[L]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var re=this.pathname||"",ye=this.search||"";this.path=re+ye}return this.href=this.format(),this};function g(v){return typeof v=="string"&&(v=A(v)),v instanceof a?v.format():a.prototype.format.call(v)}a.prototype.format=function(){var v=this.auth||"";v&&(v=encodeURIComponent(v),v=v.replace(/%3A/i,":"),v+="@");var R=this.protocol||"",P=this.pathname||"",I=this.hash||"",O=!1,k="";this.host?O=v+this.host:this.hostname&&(O=v+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(O+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(k=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var F=this.search||k&&"?"+k||"";return R&&R.substr(-1)!==":"&&(R+=":"),this.slashes||(!R||S[R])&&O!==!1?(O="//"+(O||""),P&&P.charAt(0)!=="/"&&(P="/"+P)):O||(O=""),I&&I.charAt(0)!=="#"&&(I="#"+I),F&&F.charAt(0)!=="?"&&(F="?"+F),P=P.replace(/[?#]/g,function(x){return encodeURIComponent(x)}),F=F.replace("#","%23"),R+O+P+F+I};function _(v,R){return A(v,!1,!0).resolve(R)}a.prototype.resolve=function(v){return this.resolveObject(A(v,!1,!0)).format()};function E(v,R){return v?A(v,!1,!0).resolveObject(R):R}return a.prototype.resolveObject=function(v){if(typeof v=="string"){var R=new a;R.parse(v,!1,!0),v=R}for(var P=new a,I=Object.keys(this),O=0;O<I.length;O++){var k=I[O];P[k]=this[k]}if(P.hash=v.hash,v.href==="")return P.href=P.format(),P;if(v.slashes&&!v.protocol){for(var F=Object.keys(v),x=0;x<F.length;x++){var q=F[x];q!=="protocol"&&(P[q]=v[q])}return S[P.protocol]&&P.hostname&&!P.pathname&&(P.pathname="/",P.path=P.pathname),P.href=P.format(),P}if(v.protocol&&v.protocol!==P.protocol){if(!S[v.protocol]){for(var V=Object.keys(v),L=0;L<V.length;L++){var ae=V[L];P[ae]=v[ae]}return P.href=P.format(),P}if(P.protocol=v.protocol,!v.host&&!m[v.protocol]){for(var fe=(v.pathname||"").split("/");fe.length&&!(v.host=fe.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),fe[0]!==""&&fe.unshift(""),fe.length<2&&fe.unshift(""),P.pathname=fe.join("/")}else P.pathname=v.pathname;if(P.search=v.search,P.query=v.query,P.host=v.host||"",P.auth=v.auth,P.hostname=v.hostname||v.host,P.port=v.port,P.pathname||P.search){var te=P.pathname||"",Z=P.search||"";P.path=te+Z}return P.slashes=P.slashes||v.slashes,P.href=P.format(),P}var le=P.pathname&&P.pathname.charAt(0)==="/",H=v.host||v.pathname&&v.pathname.charAt(0)==="/",ie=H||le||P.host&&v.pathname,j=ie,G=P.pathname&&P.pathname.split("/")||[],fe=v.pathname&&v.pathname.split("/")||[],$=P.protocol&&!S[P.protocol];if($&&(P.hostname="",P.port=null,P.host&&(G[0]===""?G[0]=P.host:G.unshift(P.host)),P.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(fe[0]===""?fe[0]=v.host:fe.unshift(v.host)),v.host=null),ie=ie&&(fe[0]===""||G[0]==="")),H)P.host=v.host||v.host===""?v.host:P.host,P.hostname=v.hostname||v.hostname===""?v.hostname:P.hostname,P.search=v.search,P.query=v.query,G=fe;else if(fe.length)G||(G=[]),G.pop(),G=G.concat(fe),P.search=v.search,P.query=v.query;else if(v.search!=null){if($){P.host=G.shift(),P.hostname=P.host;var _e=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;_e&&(P.auth=_e.shift(),P.hostname=_e.shift(),P.host=P.hostname)}return P.search=v.search,P.query=v.query,(P.pathname!==null||P.search!==null)&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.href=P.format(),P}if(!G.length)return P.pathname=null,P.search?P.path="/"+P.search:P.path=null,P.href=P.format(),P;for(var X=G.slice(-1)[0],D=(P.host||v.host||G.length>1)&&(X==="."||X==="..")||X==="",se=0,K=G.length;K>=0;K--)X=G[K],X==="."?G.splice(K,1):X===".."?(G.splice(K,1),se++):se&&(G.splice(K,1),se--);if(!ie&&!j)for(;se--;se)G.unshift("..");ie&&G[0]!==""&&(!G[0]||G[0].charAt(0)!=="/")&&G.unshift(""),D&&G.join("/").substr(-1)!=="/"&&G.push("");var ee=G[0]===""||G[0]&&G[0].charAt(0)==="/";if($){P.hostname=ee?"":G.length?G.shift():"",P.host=P.hostname;var _e=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;_e&&(P.auth=_e.shift(),P.hostname=_e.shift(),P.host=P.hostname)}return ie=ie||P.host&&G.length,ie&&!ee&&G.unshift(""),G.length>0?P.pathname=G.join("/"):(P.pathname=null,P.path=null),(P.pathname!==null||P.search!==null)&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.auth=v.auth||P.auth,P.slashes=P.slashes||v.slashes,P.href=P.format(),P},a.prototype.parseHost=function(){var v=this.host,R=s.exec(v);R&&(R=R[0],R!==":"&&(this.port=R.substr(1)),v=v.substr(0,v.length-R.length)),v&&(this.hostname=v)},Ot.parse=A,Ot.resolve=_,Ot.resolveObject=E,Ot.format=g,Ot.Url=a,Ot}function Na(f){if(typeof f=="string")f=new URL(f);else if(!(f instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(f.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Dr?Sc(f):Ec(f)}function Sc(f){let a=f.hostname,o=f.pathname;for(let s=0;s<o.length;s++)if(o[s]==="%"){let l=o.codePointAt(s+2)||32;if(o[s+1]==="2"&&l===102||o[s+1]==="5"&&l===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(Ga,"\\"),o=decodeURIComponent(o),a!=="")return`\\\\${a}${o}`;{let s=o.codePointAt(1)|32,l=o[2];if(s<Ha||s>Ka||l!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Ec(f){if(f.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let a=f.pathname;for(let o=0;o<a.length;o++)if(a[o]==="%"){let s=a.codePointAt(o+2)||32;if(a[o+1]==="2"&&s===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(a)}function Ba(f){let a=$i.resolve(f),o=f.charCodeAt(f.length-1);(o===Va||Dr&&o===za)&&a[a.length-1]!==$i.sep&&(a+="/");let s=new URL("file://");return a.includes("%")&&(a=a.replace(Qa,"%25")),!Dr&&a.includes("\\")&&(a=a.replace(Ya,"%5C")),a.includes(`
`)&&(a=a.replace(Ja,"%0A")),a.includes("\r")&&(a=a.replace(Xa,"%0D")),a.includes("	")&&(a=a.replace(Za,"%09")),s.pathname=a,s}var Ua,Pr,zi,Rr,Cr,Vi,jr,Hi,Mr,Ki,Nr,Gi,Br,Qi,Ur,Yi,Ot,Ji,tt,ws,La,Da,Fa,Wa,qa,$a,za,Va,Ha,Ka,Dr,Ga,Qa,Ya,Ja,Xa,Za,Ac=ot(()=>{he(),de(),pe(),Wu(),nc(),gc(),Ca(),Ua=Object.freeze(Object.create(null)),Pr={},zi=!1,Rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Cr={},Vi=!1,jr={},Hi=!1,Mr={},Ki=!1,Nr={},Gi=!1,Br={},Qi=!1,Ur={},Yi=!1,Ot={},Ji=!1,tt=_c(),tt.parse,tt.resolve,tt.resolveObject,tt.format,tt.Url,ws=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,tt.URL=typeof URL<"u"?URL:null,tt.pathToFileURL=Ba,tt.fileURLToPath=Na,La=tt.Url,Da=tt.format,Fa=tt.resolve,Wa=tt.resolveObject,qa=tt.parse,$a=tt.URL,za=92,Va=47,Ha=97,Ka=122,Dr=ws==="win32",Ga=/\//g,Qa=/%/g,Ya=/\\/g,Ja=/\n/g,Xa=/\r/g,Za=/\t/g}),Ic=me((f,a)=>{he(),de(),pe(),a.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),ho=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0}),f.BufferedDuplex=void 0,f.writev=s;var a=Ft(),o=(Xe(),Fe(Je));function s(r,t){let n=new Array(r.length);for(let e=0;e<r.length;e++)typeof r[e].chunk=="string"?n[e]=o.Buffer.from(r[e].chunk,"utf8"):n[e]=r[e].chunk;this._write(o.Buffer.concat(n),"binary",t)}var l=class extends a.Duplex{constructor(t,n,e){super({objectMode:!0});Ae(this,"socket");Ae(this,"proxy");Ae(this,"isSocketOpen");Ae(this,"writeQueue");this.proxy=n,this.socket=e,this.writeQueue=[],t.objectMode||(this._writev=s.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{!this.destroyed&&this.readable&&this.push(i)})}_read(t){this.proxy.read(t)}_write(t,n,e){this.isSocketOpen?this.writeToProxy(t,n,e):this.writeQueue.push({chunk:t,encoding:n,cb:e})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,n){this.writeQueue=[],this.proxy.destroy(),n(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,n,e){this.proxy.write(t,n)===!1?this.proxy.once("drain",e):e()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:n,cb:e}=this.writeQueue.shift();this.writeToProxy(t,n,e)}}};f.BufferedDuplex=l}),cr=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(f,"__esModule",{value:!0}),f.streamBuilder=f.browserStreamBuilder=void 0;var o=(Xe(),Fe(Je)),s=a(Ic()),l=a(mt()),r=Ft(),t=a(Vr()),n=ho(),e=(0,l.default)("mqttjs:ws"),i=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(A,g){let _=`${A.protocol}://${A.hostname}:${A.port}${A.path}`;return typeof A.transformWsUrl=="function"&&(_=A.transformWsUrl(_,A,g)),_}function d(A){let g=A;return A.port||(A.protocol==="wss"?g.port=443:g.port=80),A.path||(g.path="/"),A.wsOptions||(g.wsOptions={}),!t.default&&!A.forceNativeWebSocket&&A.protocol==="wss"&&i.forEach(_=>{Object.prototype.hasOwnProperty.call(A,_)&&!Object.prototype.hasOwnProperty.call(A.wsOptions,_)&&(g.wsOptions[_]=A[_])}),g}function p(A){let g=d(A);if(g.hostname||(g.hostname=g.host),!g.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);g.hostname=_.hostname,g.port||(g.port=Number(_.port))}return g.objectMode===void 0&&(g.objectMode=!(g.binary===!0||g.binary===void 0)),g}function b(A,g,_){e("createWebSocket"),e(`protocol: ${_.protocolId} ${_.protocolVersion}`);let E=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";e(`creating new Websocket for url: ${g} and protocol: ${E}`);let v;return _.createWebsocket?v=_.createWebsocket(g,[E],_):v=new s.default(g,[E],_.wsOptions),v}function m(A,g){let _=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt",E=u(g,A),v;return g.createWebsocket?v=g.createWebsocket(E,[_],g):v=new WebSocket(E,[_]),v.binaryType="arraybuffer",v}var S=(A,g)=>{e("streamBuilder");let _=d(g);_.hostname=_.hostname||_.host||"localhost";let E=u(_,A),v=b(A,E,_),R=s.default.createWebSocketStream(v,_.wsOptions);return R.url=E,v.on("close",()=>{R.destroy()}),R};f.streamBuilder=S;var w=(A,g)=>{e("browserStreamBuilder");let _,E=p(g).browserBufferSize||1024*512,v=g.browserBufferTimeout||1e3,R=!g.objectMode,P=m(A,g),I=k(g,L,ae);g.objectMode||(I._writev=n.writev.bind(I)),I.on("close",()=>{P.close()});let O=typeof P.addEventListener<"u";P.readyState===P.OPEN?(_=I,_.socket=P):(_=new n.BufferedDuplex(g,I,P),O?P.addEventListener("open",F):P.onopen=F),O?(P.addEventListener("close",x),P.addEventListener("error",q),P.addEventListener("message",V)):(P.onclose=x,P.onerror=q,P.onmessage=V);function k(te,Z,le){let H=new r.Transform({objectMode:te.objectMode});return H._write=Z,H._flush=le,H}function F(){e("WebSocket onOpen"),_ instanceof n.BufferedDuplex&&_.socketReady()}function x(te){e("WebSocket onClose",te),_.end(),_.destroy()}function q(te){e("WebSocket onError",te);let Z=new Error("WebSocket error");Z.event=te,_.destroy(Z)}async function V(te){if(!I||!I.readable||!I.writable)return;let{data:Z}=te;Z instanceof ArrayBuffer?Z=o.Buffer.from(Z):Z instanceof Blob?Z=o.Buffer.from(await new Response(Z).arrayBuffer()):Z=o.Buffer.from(Z,"utf8"),I.push(Z)}function L(te,Z,le){if(P.bufferedAmount>E){setTimeout(L,v,te,Z,le);return}R&&typeof te=="string"&&(te=o.Buffer.from(te,"utf8"));try{P.send(te)}catch(H){return le(H)}le()}function ae(te){P.close(),te()}return _};f.browserStreamBuilder=w}),po={};Vt(po,{Server:()=>ze,Socket:()=>ze,Stream:()=>ze,_createServerHandle:()=>ze,_normalizeArgs:()=>ze,_setSimultaneousAccepts:()=>ze,connect:()=>ze,createConnection:()=>ze,createServer:()=>ze,default:()=>el,isIP:()=>ze,isIPv4:()=>ze,isIPv6:()=>ze});function ze(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var el,tl=ot(()=>{he(),de(),pe(),el={_createServerHandle:ze,_normalizeArgs:ze,_setSimultaneousAccepts:ze,connect:ze,createConnection:ze,createServer:ze,isIP:ze,isIPv4:ze,isIPv6:ze,Server:ze,Socket:ze,Stream:ze}}),rl=me((f,a)=>{he(),de(),pe(),a.exports={}}),_s=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(f,"__esModule",{value:!0});var o=a((tl(),Fe(po))),s=a(mt()),l=a(rl()),r=(0,s.default)("mqttjs:tcp"),t=(n,e)=>{if(e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",e.socksProxy)return(0,l.default)(e.hostname,e.port,e.socksProxy,{timeout:e.socksTimeout});let{port:i,path:u}=e,d=e.hostname;return r("port %d and host %s",i,d),o.default.createConnection({port:i,host:d,path:u})};f.default=t}),nl={};Vt(nl,{default:()=>il});var il,xc=ot(()=>{he(),de(),pe(),il={}}),Ss=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(f,"__esModule",{value:!0});var o=(xc(),Fe(nl)),s=a((tl(),Fe(po))),l=a(mt()),r=a(rl()),t=(0,l.default)("mqttjs:tls");function n(i){let{host:u,port:d,socksProxy:p,...b}=i;if(p!==void 0){let m=(0,r.default)(u,d,p,{timeout:i.socksTimeout});return(0,o.connect)({...b,socket:m})}return(0,o.connect)(i)}var e=(i,u)=>{u.port=u.port||8883,u.host=u.hostname||u.host||"localhost",s.default.isIP(u.host)===0&&(u.servername=u.host),u.rejectUnauthorized=u.rejectUnauthorized!==!1,delete u.path,t("port %d host %s rejectUnauthorized %b",u.port,u.host,u.rejectUnauthorized);let d=n(u);d.on("secureConnect",()=>{u.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",p)});function p(b){u.rejectUnauthorized&&i.emit("error",b),d.end()}return d.on("error",p),d};f.default=e}),Es=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=(Xe(),Fe(Je)),o=Ft(),s=ho(),l,r,t;function n(){let p=new o.Transform;return p._write=(b,m,S)=>{l.send({data:b.buffer,success(){S()},fail(w){S(new Error(w))}})},p._flush=b=>{l.close({success(){b()}})},p}function e(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function i(p,b){let m=p.protocol==="wxs"?"wss":"ws",S=`${m}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(S=`${m}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(S=p.transformWsUrl(S,p,b)),S}function u(){l.onOpen(()=>{t.socketReady()}),l.onMessage(p=>{let{data:b}=p;b instanceof ArrayBuffer?b=a.Buffer.from(b):b=a.Buffer.from(b,"utf8"),r.push(b)}),l.onClose(()=>{t.emit("close"),t.end(),t.destroy()}),l.onError(p=>{let b=new Error(p.errMsg);t.destroy(b)})}var d=(p,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let m=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";e(b);let S=i(b,p);l=wx.connectSocket({url:S,protocols:[m]}),r=n(),t=new s.BufferedDuplex(b,r,l),t._destroy=(A,g)=>{l.close({success(){g&&g(A)}})};let w=t.destroy;return t.destroy=(A,g)=>(t.destroy=w,setTimeout(()=>{l.close({fail(){t._destroy(A,g)}})},0),t),u(),t};f.default=d}),As=me(f=>{he(),de(),pe(),Object.defineProperty(f,"__esModule",{value:!0});var a=(Xe(),Fe(Je)),o=Ft(),s=ho(),l,r,t,n=!1;function e(){let b=new o.Transform;return b._write=(m,S,w)=>{l.sendSocketMessage({data:m.buffer,success(){w()},fail(){w(new Error)}})},b._flush=m=>{l.closeSocket({success(){m()}})},b}function i(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function u(b,m){let S=b.protocol==="alis"?"wss":"ws",w=`${S}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(w=`${S}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(w=b.transformWsUrl(w,b,m)),w}function d(){n||(n=!0,l.onSocketOpen(()=>{t.socketReady()}),l.onSocketMessage(b=>{if(typeof b.data=="string"){let m=a.Buffer.from(b.data,"base64");r.push(m)}else{let m=new FileReader;m.addEventListener("load",()=>{if(m.result instanceof ArrayBuffer){r.push(a.Buffer.from(m.result));return}r.push(a.Buffer.from(m.result,"utf-8"))}),m.readAsArrayBuffer(b.data)}}),l.onSocketClose(()=>{t.end(),t.destroy()}),l.onSocketError(b=>{t.destroy(b)}))}var p=(b,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let S=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";i(m);let w=u(m,b);return l=m.my,l.connectSocket({url:w,protocols:S}),r=e(),t=new s.BufferedDuplex(m,r,l),d(),t};f.default=p}),kc=me(f=>{he(),de(),pe();var a=f&&f.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(f,"__esModule",{value:!0}),f.connectAsync=u;var o=a(mt()),s=a((Ac(),Fe(ja))),l=a(fi()),r=a(Vr());typeof(Le==null?void 0:Le.nextTick)!="function"&&(Le.nextTick=setImmediate);var t=(0,o.default)("mqttjs"),n=null;function e(d){let p;if(d.auth)if(p=d.auth.match(/^(.+):(.+)$/),p){let[,b,m]=p;d.username=b,d.password=m}else d.username=d.auth}function i(d,p){var S,w,A;if(t("connecting to an MQTT broker..."),typeof d=="object"&&!p&&(p=d,d=""),p=p||{},d&&typeof d=="string"){let g=s.default.parse(d,!0),_={};if(g.port!=null&&(_.port=Number(g.port)),_.host=g.hostname,_.query=g.query,_.auth=g.auth,_.protocol=g.protocol,_.path=g.path,p={..._,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||((S=p.protocol)==null?void 0:S.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!((w=p.protocol)!=null&&w.startsWith("ws"))&&!((A=p.protocol)!=null&&A.startsWith("wx"))&&delete p.path,e(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),r.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Le<"u"&&(p.socksProxy=Le.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(n||(n={},!r.default&&!p.forceNativeWebSocket?(n.ws=cr().streamBuilder,n.wss=cr().streamBuilder,n.mqtt=_s().default,n.tcp=_s().default,n.ssl=Ss().default,n.tls=n.ssl,n.mqtts=Ss().default):(n.ws=cr().browserStreamBuilder,n.wss=cr().browserStreamBuilder,n.wx=Es().default,n.wxs=Es().default,n.ali=As().default,n.alis=As().default)),!n[p.protocol]){let g=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((_,E)=>g&&E%2===0?!1:typeof n[_]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function b(g){return p.servers&&((!g._reconnectCount||g._reconnectCount===p.servers.length)&&(g._reconnectCount=0),p.host=p.servers[g._reconnectCount].host,p.port=p.servers[g._reconnectCount].port,p.protocol=p.servers[g._reconnectCount].protocol?p.servers[g._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,g._reconnectCount++),t("calling streambuilder for",p.protocol),n[p.protocol](g,p)}let m=new l.default(b,p);return m.on("error",()=>{}),m}function u(d,p,b=!0){return new Promise((m,S)=>{let w=i(d,p),A={connect:_=>{g(),m(w)},end:()=>{g(),m(w)},error:_=>{g(),w.end(),S(_)}};b===!1&&(A.close=()=>{A.error(new Error("Couldn't connect to server"))});function g(){Object.keys(A).forEach(_=>{w.off(_,A[_])})}Object.keys(A).forEach(_=>{w.on(_,A[_])})})}f.default=i}),Is=me(f=>{he(),de(),pe();var a=f&&f.__createBinding||(Object.create?function(b,m,S,w){w===void 0&&(w=S);var A=Object.getOwnPropertyDescriptor(m,S);(!A||("get"in A?!m.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return m[S]}}),Object.defineProperty(b,w,A)}:function(b,m,S,w){w===void 0&&(w=S),b[w]=m[S]}),o=f&&f.__setModuleDefault||(Object.create?function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}:function(b,m){b.default=m}),s=f&&f.__importStar||function(){var b=function(m){return b=Object.getOwnPropertyNames||function(S){var w=[];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(w[w.length]=A);return w},b(m)};return function(m){if(m&&m.__esModule)return m;var S={};if(m!=null)for(var w=b(m),A=0;A<w.length;A++)w[A]!=="default"&&a(S,m,w[A]);return o(S,m),S}}(),l=f&&f.__exportStar||function(b,m){for(var S in b)S!=="default"&&!Object.prototype.hasOwnProperty.call(m,S)&&a(m,b,S)},r=f&&f.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(f,"__esModule",{value:!0}),f.ReasonCodes=f.KeepaliveManager=f.UniqueMessageIdProvider=f.DefaultMessageIdProvider=f.Store=f.MqttClient=f.connectAsync=f.connect=f.Client=void 0;var t=r(fi());f.MqttClient=t.default;var n=r(wa());f.DefaultMessageIdProvider=n.default;var e=r(Du());f.UniqueMessageIdProvider=e.default;var i=r(na());f.Store=i.default;var u=s(kc());f.connect=u.default,Object.defineProperty(f,"connectAsync",{enumerable:!0,get:function(){return u.connectAsync}});var d=r(ka());f.KeepaliveManager=d.default,f.Client=t.default,l(fi(),f),l(Kt(),f);var p=$r();Object.defineProperty(f,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),Tc=me(f=>{he(),de(),pe();var a=f&&f.__createBinding||(Object.create?function(t,n,e,i){i===void 0&&(i=e);var u=Object.getOwnPropertyDescriptor(n,e);(!u||("get"in u?!n.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(t,i,u)}:function(t,n,e,i){i===void 0&&(i=e),t[i]=n[e]}),o=f&&f.__setModuleDefault||(Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n}),s=f&&f.__importStar||function(){var t=function(n){return t=Object.getOwnPropertyNames||function(e){var i=[];for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&(i[i.length]=u);return i},t(n)};return function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var i=t(n),u=0;u<i.length;u++)i[u]!=="default"&&a(e,n,i[u]);return o(e,n),e}}(),l=f&&f.__exportStar||function(t,n){for(var e in t)e!=="default"&&!Object.prototype.hasOwnProperty.call(n,e)&&a(n,t,e)};Object.defineProperty(f,"__esModule",{value:!0});var r=s(Is());f.default=r,l(Is(),f)});const Oc=Tc();/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@babel/runtime/helpers/regenerator.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/class Pc{constructor(a){Ae(this,"name","mqtt");Ae(this,"endpoints");Ae(this,"client",null);Ae(this,"connected",!1);Ae(this,"lastError");Ae(this,"aborted",!1);Ae(this,"queue",[]);Ae(this,"queueResolvers",[]);Ae(this,"topic","ulp/v2/traces");this.endpoints=a,this.connect()}connect(){const a=this.endpoints.ws||this.endpoints.mqtt;if(!a){this.lastError="Missing MQTT endpoint";return}if(typeof window<"u"&&!a.startsWith("ws")){this.lastError="Browser requires ws:// or wss:// endpoint";return}this.client=Oc.connect(a,{reconnectPeriod:1500}),this.client.on("connect",()=>{var o;this.connected=!0,(o=this.client)==null||o.subscribe(this.topic,{qos:0})}),this.client.on("reconnect",()=>{this.connected=!1}),this.client.on("close",()=>{this.connected=!1}),this.client.on("error",o=>{this.lastError=o.message,this.connected=!1}),this.client.on("message",(o,s)=>{try{const l=JSON.parse(s.toString());this.enqueue({trace:l})}catch(l){this.lastError=l instanceof Error?l.message:String(l)}})}enqueue(a){const o=this.queueResolvers.shift();o?o(a):this.queue.push(a)}async nextQueueItem(){return this.queue.length?this.queue.shift()??null:new Promise(a=>{this.queueResolvers.push(a)})}async publish(a){const o=Array.isArray(a)?a:[a];if(!this.client){const r=this.lastError??"MQTT client not initialized";return{accepted:[],rejected:o.map(t=>({id:t.id,reason:r}))}}const s=[],l=[];for(const r of o)try{await new Promise((t,n)=>{var e;(e=this.client)==null||e.publish(this.topic,JSON.stringify(r),{qos:0},i=>{i?n(i):t()})}),s.push(r.id)}catch(t){const n=t instanceof Error?t.message:String(t);l.push({id:r.id,reason:n})}return{accepted:s,rejected:l}}async*subscribe(a){for(;!this.aborted;){const o=await this.nextQueueItem();if(!o)return;const s=o.trace;Rc(s,a)&&(yield s)}}status(){return{connected:this.connected,lastError:this.lastError}}close(){var a;this.aborted=!0;for(const o of this.queueResolvers)o(null);this.queueResolvers=[],this.queue=[],(a=this.client)==null||a.end(!0),this.client=null}}function Rc(f,a){var o,s,l;return a?!(a.since!=null&&f.ts<a.since||(o=a.templates)!=null&&o.length&&!a.templates.includes(f.template)||(s=a.kinds)!=null&&s.length&&!a.kinds.includes(f.kind)||(l=a.authors)!=null&&l.length&&!a.authors.includes(f.author??"")):!0}async function Cc(f){if(!f.sig||!f.author)return!1;const a=crypto.subtle;if(!a)return!1;try{const o=await Mc(f.author);if(!o)return!1;const s=new TextEncoder().encode(Zi(jc(f))),l=ol(f.sig),r=Xi(s),t=Xi(l);return await a.verify({name:"ECDSA",hash:"SHA-256"},o,t,r)}catch{return!1}}function jc(f){const{id:a,...o}=f;return o}async function Mc(f){if(!f.startsWith("p256:"))return null;const a=f.slice(5),o=ol(a);return crypto.subtle.importKey("raw",Xi(o),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"])}function ol(f){const a=f.trim(),o=new Uint8Array(a.length/2);for(let s=0;s<o.length;s++)o[s]=parseInt(a.slice(s*2,s*2+2),16);return o}function Xi(f){const a=new Uint8Array(f.length);return a.set(f),a.buffer}async function Nc(f){const a=new fl,o=localStorage.getItem("ulp_relay")??"",s=o?new yl(o):null,l=await vl(),r=l.MQTT||l.WS?new Pc({mqtt:l.MQTT,ws:l.WS}):null,t=[];s&&t.push(s),r&&t.push(r);const n=qe("div",{class:"row"},qe("h1",{},"ULP Blackboard (minimal)")),e=qe("div",{class:"row"},qe("input",{id:"relay",placeholder:"Relay base URL (optional)",value:o}),qe("button",{onclick:()=>{const w=document.getElementById("relay").value.trim();localStorage.setItem("ulp_relay",w),location.reload()}},"Set relay")),i=qe("div",{class:"card"},qe("div",{class:"row"},qe("select",{id:"kind"},qe("option",{value:"post"},"post"),qe("option",{value:"listing"},"listing")),qe("input",{id:"template",placeholder:"template",value:yo})),qe("textarea",{id:"text",placeholder:"Write something..."}),qe("div",{class:"row"},qe("button",{onclick:()=>b()},"Publish (local + relay)"),qe("button",{onclick:()=>m()},"Refresh"))),u=qe("div",{class:"status muted"},""),d=qe("div",{class:"feed"});f.append(n,e,i,u,d);function p(w){u.textContent=w}async function b(){const w=document.getElementById("kind").value,A=document.getElementById("template").value.trim()||yo,g=document.getElementById("text").value.trim();if(!g)return;const _={text:g},E=bl(A,_);if(!E.ok){p(`Template error: ${E.reason}`);return}const v=await hl({kind:w,template:A,payload:_});await a.put(v);for(const R of t)await R.publish(v);document.getElementById("text").value="",p(""),await m()}async function m(){const w=await a.listRecent(200),A=dl(w);gl(d);for(const g of A)d.append(S(g))}function S(w){const A=ml(w.template,w.payload),g=A.text??"",_=A.title??"";return qe("div",{class:"item"},qe("div",{class:"meta"},qe("span",{class:"pill"},w.kind),qe("span",{class:"pill"},w.template),qe("span",{class:"muted"},new Date(w.ts*1e3).toLocaleString())),_?qe("div",{class:"title"},_):qe("div",{class:"body"},g||"(no text)"),_?qe("div",{class:"body"},g||"(no text)"):qe("span",{}),qe("div",{class:"muted"},w.id))}for(const w of t)(async()=>{for await(const A of w.subscribe({since:Math.floor(Date.now()/1e3)-60*60}))(await pl(A)).ok&&(A.sig&&A.author&&!await Cc(A)||(await a.put(A),await m()))})();await m()}const xs=document.getElementById("app");xs&&Nc(xs);
